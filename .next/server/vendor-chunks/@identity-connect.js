"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@identity-connect";
exports.ids = ["vendor-chunks/@identity-connect"];
exports.modules = {

/***/ "(ssr)/./node_modules/@identity-connect/api/dist/index.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@identity-connect/api/dist/index.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_BACKEND_URL: () => (/* binding */ DEFAULT_BACKEND_URL),\n/* harmony export */   NetworkName: () => (/* binding */ NetworkName),\n/* harmony export */   PairingStatus: () => (/* binding */ PairingStatus),\n/* harmony export */   SigningRequestStatus: () => (/* binding */ SigningRequestStatus),\n/* harmony export */   SigningRequestTypes: () => (/* binding */ SigningRequestTypes),\n/* harmony export */   WalletOSEnum: () => (/* binding */ WalletOSEnum),\n/* harmony export */   WalletPlatformEnum: () => (/* binding */ WalletPlatformEnum)\n/* harmony export */ });\n// src/constants.ts\nvar DEFAULT_BACKEND_URL = \"https://identityconnect.com\";\n\n// src/network.ts\nvar NetworkName = /* @__PURE__ */ ((NetworkName2) => {\n  NetworkName2[\"DEVNET\"] = \"devnet\";\n  NetworkName2[\"MAINNET\"] = \"mainnet\";\n  NetworkName2[\"TESTNET\"] = \"testnet\";\n  return NetworkName2;\n})(NetworkName || {});\n\n// src/types/pairing.ts\nvar PairingStatus = /* @__PURE__ */ ((PairingStatus2) => {\n  PairingStatus2[\"Finalized\"] = \"FINALIZED\";\n  PairingStatus2[\"Pending\"] = \"PENDING\";\n  return PairingStatus2;\n})(PairingStatus || {});\n\n// src/types/signingRequest.ts\nvar SigningRequestTypes = /* @__PURE__ */ ((SigningRequestTypes2) => {\n  SigningRequestTypes2[\"SIGN_AND_SUBMIT_TRANSACTION\"] = \"SIGN_AND_SUBMIT_TRANSACTION\";\n  SigningRequestTypes2[\"SIGN_MESSAGE\"] = \"SIGN_MESSAGE\";\n  SigningRequestTypes2[\"SIGN_TRANSACTION\"] = \"SIGN_TRANSACTION\";\n  return SigningRequestTypes2;\n})(SigningRequestTypes || {});\nvar SigningRequestStatus = /* @__PURE__ */ ((SigningRequestStatus2) => {\n  SigningRequestStatus2[\"APPROVED\"] = \"APPROVED\";\n  SigningRequestStatus2[\"CANCELLED\"] = \"CANCELLED\";\n  SigningRequestStatus2[\"INVALID\"] = \"INVALID\";\n  SigningRequestStatus2[\"PENDING\"] = \"PENDING\";\n  SigningRequestStatus2[\"REJECTED\"] = \"REJECTED\";\n  return SigningRequestStatus2;\n})(SigningRequestStatus || {});\n\n// src/types/wallet.ts\nvar WalletOSEnum = /* @__PURE__ */ ((WalletOSEnum2) => {\n  WalletOSEnum2[\"Android\"] = \"android\";\n  WalletOSEnum2[\"IdentityConnect\"] = \"ic\";\n  WalletOSEnum2[\"Linux\"] = \"linux\";\n  WalletOSEnum2[\"Macos\"] = \"osx\";\n  WalletOSEnum2[\"Windows\"] = \"win\";\n  WalletOSEnum2[\"iOS\"] = \"ios\";\n  return WalletOSEnum2;\n})(WalletOSEnum || {});\nvar WalletPlatformEnum = /* @__PURE__ */ ((WalletPlatformEnum2) => {\n  WalletPlatformEnum2[\"BraveExtension\"] = \"brave-extension\";\n  WalletPlatformEnum2[\"ChromeExtension\"] = \"chrome-extension\";\n  WalletPlatformEnum2[\"FirefoxExtension\"] = \"firefox-extension\";\n  WalletPlatformEnum2[\"IcDappWallet\"] = \"ic-dapp-wallet\";\n  WalletPlatformEnum2[\"KiwiExtension\"] = \"kiwi-extension\";\n  WalletPlatformEnum2[\"NativeApp\"] = \"native-app\";\n  WalletPlatformEnum2[\"OperaExtension\"] = \"opera-extension\";\n  WalletPlatformEnum2[\"SafariExtension\"] = \"safari-extension\";\n  return WalletPlatformEnum2;\n})(WalletPlatformEnum || {});\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGlkZW50aXR5LWNvbm5lY3QvYXBpL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsbUJBQW1COztBQUVwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxxQkFBcUI7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsMkJBQTJCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0QkFBNEI7O0FBRTdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0JBQW9CO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQkFBMEI7QUFTekI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FwdG9nb3RjaGktcmFuZG9tLW1pbnQtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AaWRlbnRpdHktY29ubmVjdC9hcGkvZGlzdC9pbmRleC5tanM/NTdkNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29uc3RhbnRzLnRzXG52YXIgREVGQVVMVF9CQUNLRU5EX1VSTCA9IFwiaHR0cHM6Ly9pZGVudGl0eWNvbm5lY3QuY29tXCI7XG5cbi8vIHNyYy9uZXR3b3JrLnRzXG52YXIgTmV0d29ya05hbWUgPSAvKiBAX19QVVJFX18gKi8gKChOZXR3b3JrTmFtZTIpID0+IHtcbiAgTmV0d29ya05hbWUyW1wiREVWTkVUXCJdID0gXCJkZXZuZXRcIjtcbiAgTmV0d29ya05hbWUyW1wiTUFJTk5FVFwiXSA9IFwibWFpbm5ldFwiO1xuICBOZXR3b3JrTmFtZTJbXCJURVNUTkVUXCJdID0gXCJ0ZXN0bmV0XCI7XG4gIHJldHVybiBOZXR3b3JrTmFtZTI7XG59KShOZXR3b3JrTmFtZSB8fCB7fSk7XG5cbi8vIHNyYy90eXBlcy9wYWlyaW5nLnRzXG52YXIgUGFpcmluZ1N0YXR1cyA9IC8qIEBfX1BVUkVfXyAqLyAoKFBhaXJpbmdTdGF0dXMyKSA9PiB7XG4gIFBhaXJpbmdTdGF0dXMyW1wiRmluYWxpemVkXCJdID0gXCJGSU5BTElaRURcIjtcbiAgUGFpcmluZ1N0YXR1czJbXCJQZW5kaW5nXCJdID0gXCJQRU5ESU5HXCI7XG4gIHJldHVybiBQYWlyaW5nU3RhdHVzMjtcbn0pKFBhaXJpbmdTdGF0dXMgfHwge30pO1xuXG4vLyBzcmMvdHlwZXMvc2lnbmluZ1JlcXVlc3QudHNcbnZhciBTaWduaW5nUmVxdWVzdFR5cGVzID0gLyogQF9fUFVSRV9fICovICgoU2lnbmluZ1JlcXVlc3RUeXBlczIpID0+IHtcbiAgU2lnbmluZ1JlcXVlc3RUeXBlczJbXCJTSUdOX0FORF9TVUJNSVRfVFJBTlNBQ1RJT05cIl0gPSBcIlNJR05fQU5EX1NVQk1JVF9UUkFOU0FDVElPTlwiO1xuICBTaWduaW5nUmVxdWVzdFR5cGVzMltcIlNJR05fTUVTU0FHRVwiXSA9IFwiU0lHTl9NRVNTQUdFXCI7XG4gIFNpZ25pbmdSZXF1ZXN0VHlwZXMyW1wiU0lHTl9UUkFOU0FDVElPTlwiXSA9IFwiU0lHTl9UUkFOU0FDVElPTlwiO1xuICByZXR1cm4gU2lnbmluZ1JlcXVlc3RUeXBlczI7XG59KShTaWduaW5nUmVxdWVzdFR5cGVzIHx8IHt9KTtcbnZhciBTaWduaW5nUmVxdWVzdFN0YXR1cyA9IC8qIEBfX1BVUkVfXyAqLyAoKFNpZ25pbmdSZXF1ZXN0U3RhdHVzMikgPT4ge1xuICBTaWduaW5nUmVxdWVzdFN0YXR1czJbXCJBUFBST1ZFRFwiXSA9IFwiQVBQUk9WRURcIjtcbiAgU2lnbmluZ1JlcXVlc3RTdGF0dXMyW1wiQ0FOQ0VMTEVEXCJdID0gXCJDQU5DRUxMRURcIjtcbiAgU2lnbmluZ1JlcXVlc3RTdGF0dXMyW1wiSU5WQUxJRFwiXSA9IFwiSU5WQUxJRFwiO1xuICBTaWduaW5nUmVxdWVzdFN0YXR1czJbXCJQRU5ESU5HXCJdID0gXCJQRU5ESU5HXCI7XG4gIFNpZ25pbmdSZXF1ZXN0U3RhdHVzMltcIlJFSkVDVEVEXCJdID0gXCJSRUpFQ1RFRFwiO1xuICByZXR1cm4gU2lnbmluZ1JlcXVlc3RTdGF0dXMyO1xufSkoU2lnbmluZ1JlcXVlc3RTdGF0dXMgfHwge30pO1xuXG4vLyBzcmMvdHlwZXMvd2FsbGV0LnRzXG52YXIgV2FsbGV0T1NFbnVtID0gLyogQF9fUFVSRV9fICovICgoV2FsbGV0T1NFbnVtMikgPT4ge1xuICBXYWxsZXRPU0VudW0yW1wiQW5kcm9pZFwiXSA9IFwiYW5kcm9pZFwiO1xuICBXYWxsZXRPU0VudW0yW1wiSWRlbnRpdHlDb25uZWN0XCJdID0gXCJpY1wiO1xuICBXYWxsZXRPU0VudW0yW1wiTGludXhcIl0gPSBcImxpbnV4XCI7XG4gIFdhbGxldE9TRW51bTJbXCJNYWNvc1wiXSA9IFwib3N4XCI7XG4gIFdhbGxldE9TRW51bTJbXCJXaW5kb3dzXCJdID0gXCJ3aW5cIjtcbiAgV2FsbGV0T1NFbnVtMltcImlPU1wiXSA9IFwiaW9zXCI7XG4gIHJldHVybiBXYWxsZXRPU0VudW0yO1xufSkoV2FsbGV0T1NFbnVtIHx8IHt9KTtcbnZhciBXYWxsZXRQbGF0Zm9ybUVudW0gPSAvKiBAX19QVVJFX18gKi8gKChXYWxsZXRQbGF0Zm9ybUVudW0yKSA9PiB7XG4gIFdhbGxldFBsYXRmb3JtRW51bTJbXCJCcmF2ZUV4dGVuc2lvblwiXSA9IFwiYnJhdmUtZXh0ZW5zaW9uXCI7XG4gIFdhbGxldFBsYXRmb3JtRW51bTJbXCJDaHJvbWVFeHRlbnNpb25cIl0gPSBcImNocm9tZS1leHRlbnNpb25cIjtcbiAgV2FsbGV0UGxhdGZvcm1FbnVtMltcIkZpcmVmb3hFeHRlbnNpb25cIl0gPSBcImZpcmVmb3gtZXh0ZW5zaW9uXCI7XG4gIFdhbGxldFBsYXRmb3JtRW51bTJbXCJJY0RhcHBXYWxsZXRcIl0gPSBcImljLWRhcHAtd2FsbGV0XCI7XG4gIFdhbGxldFBsYXRmb3JtRW51bTJbXCJLaXdpRXh0ZW5zaW9uXCJdID0gXCJraXdpLWV4dGVuc2lvblwiO1xuICBXYWxsZXRQbGF0Zm9ybUVudW0yW1wiTmF0aXZlQXBwXCJdID0gXCJuYXRpdmUtYXBwXCI7XG4gIFdhbGxldFBsYXRmb3JtRW51bTJbXCJPcGVyYUV4dGVuc2lvblwiXSA9IFwib3BlcmEtZXh0ZW5zaW9uXCI7XG4gIFdhbGxldFBsYXRmb3JtRW51bTJbXCJTYWZhcmlFeHRlbnNpb25cIl0gPSBcInNhZmFyaS1leHRlbnNpb25cIjtcbiAgcmV0dXJuIFdhbGxldFBsYXRmb3JtRW51bTI7XG59KShXYWxsZXRQbGF0Zm9ybUVudW0gfHwge30pO1xuZXhwb3J0IHtcbiAgREVGQVVMVF9CQUNLRU5EX1VSTCxcbiAgTmV0d29ya05hbWUsXG4gIFBhaXJpbmdTdGF0dXMsXG4gIFNpZ25pbmdSZXF1ZXN0U3RhdHVzLFxuICBTaWduaW5nUmVxdWVzdFR5cGVzLFxuICBXYWxsZXRPU0VudW0sXG4gIFdhbGxldFBsYXRmb3JtRW51bVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@identity-connect/api/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@identity-connect/crypto/dist/index.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@identity-connect/crypto/dist/index.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AccountConnectionAction: () => (/* binding */ AccountConnectionAction),\n/* harmony export */   DecryptionError: () => (/* binding */ DecryptionError),\n/* harmony export */   EncryptionEnvelopeError: () => (/* binding */ EncryptionEnvelopeError),\n/* harmony export */   EnvelopeMessageMismatchError: () => (/* binding */ EnvelopeMessageMismatchError),\n/* harmony export */   KeyTypes: () => (/* binding */ KeyTypes),\n/* harmony export */   REQUIRED_FIELDS: () => (/* binding */ REQUIRED_FIELDS),\n/* harmony export */   SIGNATURE_PREFIX: () => (/* binding */ SIGNATURE_PREFIX),\n/* harmony export */   aptosAccountToEd25519Keypair: () => (/* binding */ aptosAccountToEd25519Keypair),\n/* harmony export */   aptosAccountToSerializedInfo: () => (/* binding */ aptosAccountToSerializedInfo),\n/* harmony export */   concatUint8array: () => (/* binding */ concatUint8array),\n/* harmony export */   constructMetadata: () => (/* binding */ constructMetadata),\n/* harmony export */   convertEd25519PublicKeyToX25519PublicKey: () => (/* binding */ convertEd25519PublicKeyToX25519PublicKey),\n/* harmony export */   convertEd25519SecretKeyToX25519SecretKey: () => (/* binding */ convertEd25519SecretKeyToX25519SecretKey),\n/* harmony export */   createEd25519KeyPair: () => (/* binding */ createEd25519KeyPair),\n/* harmony export */   createSerializedAccountInfo: () => (/* binding */ createSerializedAccountInfo),\n/* harmony export */   createX25519KeyPair: () => (/* binding */ createX25519KeyPair),\n/* harmony export */   dangerouslyEncryptAndSignEnvelopeUnvalidated: () => (/* binding */ dangerouslyEncryptAndSignEnvelopeUnvalidated),\n/* harmony export */   decodeBase64: () => (/* binding */ decodeBase64),\n/* harmony export */   decryptEnvelope: () => (/* binding */ decryptEnvelope),\n/* harmony export */   decryptMessage: () => (/* binding */ decryptMessage),\n/* harmony export */   decryptMessageDirect: () => (/* binding */ decryptMessageDirect),\n/* harmony export */   decryptObject: () => (/* binding */ decryptObject),\n/* harmony export */   decryptObjectDirect: () => (/* binding */ decryptObjectDirect),\n/* harmony export */   decryptSerializedEncryptionResult: () => (/* binding */ decryptSerializedEncryptionResult),\n/* harmony export */   decryptSerializedEncryptionResultDirect: () => (/* binding */ decryptSerializedEncryptionResultDirect),\n/* harmony export */   deriveAccountTransportEd25519Keypair: () => (/* binding */ deriveAccountTransportEd25519Keypair),\n/* harmony export */   deserializeEd25519PublicKeyB64: () => (/* binding */ deserializeEd25519PublicKeyB64),\n/* harmony export */   deserializeEd25519SignatureB64: () => (/* binding */ deserializeEd25519SignatureB64),\n/* harmony export */   deserializeEncryptionResult: () => (/* binding */ deserializeEncryptionResult),\n/* harmony export */   deserializePublicKeyB64: () => (/* binding */ deserializePublicKeyB64),\n/* harmony export */   deserializeSignatureB64: () => (/* binding */ deserializeSignatureB64),\n/* harmony export */   deserializeTransportEnvelope: () => (/* binding */ deserializeTransportEnvelope),\n/* harmony export */   ed25519KeypairFromSecret: () => (/* binding */ ed25519KeypairFromSecret),\n/* harmony export */   encodeBase64: () => (/* binding */ encodeBase64),\n/* harmony export */   encryptAndSignEnvelope: () => (/* binding */ encryptAndSignEnvelope),\n/* harmony export */   encryptMessage: () => (/* binding */ encryptMessage),\n/* harmony export */   encryptMessageDirect: () => (/* binding */ encryptMessageDirect),\n/* harmony export */   encryptObject: () => (/* binding */ encryptObject),\n/* harmony export */   encryptObjectDirect: () => (/* binding */ encryptObjectDirect),\n/* harmony export */   ensureMetadataFields: () => (/* binding */ ensureMetadataFields),\n/* harmony export */   ensurePrivatePublicFieldsDisjoint: () => (/* binding */ ensurePrivatePublicFieldsDisjoint),\n/* harmony export */   hashAndVerifySignature: () => (/* binding */ hashAndVerifySignature),\n/* harmony export */   keypairToEd25519: () => (/* binding */ keypairToEd25519),\n/* harmony export */   keypairToX25519: () => (/* binding */ keypairToX25519),\n/* harmony export */   makeEd25519SecretKeySignCallbackNoDomainSeparation: () => (/* binding */ makeEd25519SecretKeySignCallbackNoDomainSeparation),\n/* harmony export */   messageHash: () => (/* binding */ messageHash),\n/* harmony export */   publicKeyB64FromEd25519PublicKeyB64: () => (/* binding */ publicKeyB64FromEd25519PublicKeyB64),\n/* harmony export */   serializeEncryptionResult: () => (/* binding */ serializeEncryptionResult),\n/* harmony export */   serializePublicKeyB64: () => (/* binding */ serializePublicKeyB64),\n/* harmony export */   serializeSignatureB64: () => (/* binding */ serializeSignatureB64),\n/* harmony export */   signWithEd25519SecretKey: () => (/* binding */ signWithEd25519SecretKey),\n/* harmony export */   toKey: () => (/* binding */ toKey),\n/* harmony export */   verifyEnvelopeSignature: () => (/* binding */ verifyEnvelopeSignature),\n/* harmony export */   verifySignature: () => (/* binding */ verifySignature)\n/* harmony export */ });\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/./node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var _noble_hashes_sha3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @noble/hashes/sha3 */ \"(ssr)/./node_modules/@noble/hashes/esm/sha3.js\");\n/* harmony import */ var tweetnacl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tweetnacl */ \"(ssr)/./node_modules/tweetnacl/nacl-fast.js\");\n/* harmony import */ var ed2curve__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ed2curve */ \"(ssr)/./node_modules/ed2curve/ed2curve.js\");\n/* harmony import */ var _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aptos-connect/wallet-api */ \"(ssr)/./node_modules/@aptos-connect/wallet-api/dist/index.mjs\");\n// src/encrDecr.ts\n\n\n\n\n\n// src/errors.ts\nvar EncryptionEnvelopeError = class extends Error {\n};\nvar EnvelopeMessageMismatchError = class _EnvelopeMessageMismatchError extends EncryptionEnvelopeError {\n  constructor(message, field) {\n    super(message);\n    this.field = field;\n    this.name = \"EnvelopeMessageMismatchError\";\n    Object.setPrototypeOf(this, _EnvelopeMessageMismatchError.prototype);\n  }\n};\nvar DecryptionError = class _DecryptionError extends EncryptionEnvelopeError {\n  constructor(message) {\n    super(message);\n    this.name = \"DecryptionError\";\n    Object.setPrototypeOf(this, _DecryptionError.prototype);\n  }\n};\n\n// src/utils.ts\n\nvar KeyTypes = /* @__PURE__ */ ((KeyTypes2) => {\n  KeyTypes2[\"Ed25519PublicKey\"] = \"Ed25519PublicKey\";\n  KeyTypes2[\"Ed25519SecretKey\"] = \"Ed25519SecretKey\";\n  KeyTypes2[\"X25519PublicKey\"] = \"X25519PublicKey\";\n  KeyTypes2[\"X25519SecretKey\"] = \"X25519SecretKey\";\n  return KeyTypes2;\n})(KeyTypes || {});\nfunction createX25519KeyPair() {\n  return keypairToX25519(tweetnacl__WEBPACK_IMPORTED_MODULE_1__.box.keyPair());\n}\nfunction createEd25519KeyPair() {\n  return keypairToEd25519(tweetnacl__WEBPACK_IMPORTED_MODULE_1__.sign.keyPair());\n}\nfunction toKey(rawKey, type) {\n  return {\n    key: rawKey,\n    type\n  };\n}\nfunction keypairToEd25519(keyPair) {\n  return {\n    publicKey: toKey(keyPair.publicKey, \"Ed25519PublicKey\" /* Ed25519PublicKey */),\n    secretKey: toKey(keyPair.secretKey, \"Ed25519SecretKey\" /* Ed25519SecretKey */)\n  };\n}\nfunction keypairToX25519(keyPair) {\n  return {\n    publicKey: toKey(keyPair.publicKey, \"X25519PublicKey\" /* X25519PublicKey */),\n    secretKey: toKey(keyPair.secretKey, \"X25519SecretKey\" /* X25519SecretKey */)\n  };\n}\nfunction aptosAccountToEd25519Keypair(account) {\n  return ed25519KeypairFromSecret(account.signingKey.secretKey);\n}\nfunction ed25519KeypairFromSecret(ed25519SecretKeyBytes) {\n  return keypairToEd25519(tweetnacl__WEBPACK_IMPORTED_MODULE_1__.sign.keyPair.fromSeed(ed25519SecretKeyBytes.slice(0, 32)));\n}\nfunction decodeBase64(base64Str) {\n  if (globalThis.Buffer) {\n    return new Uint8Array(Buffer.from(base64Str, \"base64\"));\n  }\n  return Uint8Array.from(atob(base64Str), (m) => m.codePointAt(0));\n}\nfunction encodeBase64(bytes) {\n  if (globalThis.Buffer) {\n    return Buffer.from(bytes).toString(\"base64\");\n  }\n  return btoa(Array.from(bytes, (x) => String.fromCodePoint(x)).join(\"\"));\n}\nfunction concatUint8array(arrayOne, arrayTwo) {\n  const mergedArray = new Uint8Array(arrayOne.length + arrayTwo.length);\n  mergedArray.set(arrayOne);\n  mergedArray.set(arrayTwo, arrayOne.length);\n  return mergedArray;\n}\n\n// src/encrDecr.ts\nvar SIGNATURE_PREFIX = \"APTOS::IDENTITY_CONNECT\";\nfunction convertEd25519PublicKeyToX25519PublicKey(ed25519PublicKey, errorKeyName) {\n  const x25519PublicKey = ed2curve__WEBPACK_IMPORTED_MODULE_2__.convertPublicKey(ed25519PublicKey.key.slice(0, 32));\n  if (!x25519PublicKey)\n    throw new Error(`${errorKeyName} is not a valid Ed25519 public key`);\n  return toKey(x25519PublicKey, \"X25519PublicKey\" /* X25519PublicKey */);\n}\nfunction convertEd25519SecretKeyToX25519SecretKey(ed25519SecretKey) {\n  const x25519SecretKey = ed2curve__WEBPACK_IMPORTED_MODULE_2__.convertSecretKey(ed25519SecretKey.key.slice(0, 32));\n  return toKey(x25519SecretKey, \"X25519SecretKey\" /* X25519SecretKey */);\n}\nfunction serializeEncryptionResult(enc) {\n  return {\n    nonceB64: encodeBase64(enc.nonce),\n    securedB64: encodeBase64(enc.secured)\n  };\n}\nfunction deserializeEncryptionResult(enc) {\n  return {\n    nonce: decodeBase64(enc.nonceB64),\n    secured: decodeBase64(enc.securedB64)\n  };\n}\nfunction decryptSerializedEncryptionResult(senderX25519PublicKey, receiverEd25519SecretKey, enc) {\n  const des = deserializeEncryptionResult(enc);\n  return decryptObject(senderX25519PublicKey, receiverEd25519SecretKey, des.secured, des.nonce);\n}\nfunction decryptSerializedEncryptionResultDirect(senderX25519PublicKey, receiverX25519SecretKey, enc) {\n  const des = deserializeEncryptionResult(enc);\n  return decryptObjectDirect(senderX25519PublicKey, receiverX25519SecretKey, des.secured, des.nonce);\n}\nfunction encryptMessage(senderX25519SecretKey, receiverEd25519PublicKey, message) {\n  const receiverX25519PublicKey = convertEd25519PublicKeyToX25519PublicKey(\n    receiverEd25519PublicKey,\n    \"receiver public key\"\n  );\n  return encryptMessageDirect(senderX25519SecretKey, receiverX25519PublicKey, message);\n}\nfunction encryptMessageDirect(senderX25519SecretKey, receiverX25519PublicKey, message) {\n  const nonce = tweetnacl__WEBPACK_IMPORTED_MODULE_1__.randomBytes(tweetnacl__WEBPACK_IMPORTED_MODULE_1__.box.nonceLength);\n  const messageUint8 = new TextEncoder().encode(message);\n  const secured = tweetnacl__WEBPACK_IMPORTED_MODULE_1__.box(messageUint8, nonce, receiverX25519PublicKey.key, senderX25519SecretKey.key.slice(0, 32));\n  return { nonce, secured };\n}\nfunction encryptObject(senderX25519SecretKey, receiverEd25519PublicKey, message) {\n  const receiverX25519PublicKey = convertEd25519PublicKeyToX25519PublicKey(\n    receiverEd25519PublicKey,\n    \"receiver public key\"\n  );\n  return encryptObjectDirect(senderX25519SecretKey, receiverX25519PublicKey, message);\n}\nfunction encryptObjectDirect(senderX25519SecretKey, receiverX25519PublicKey, message) {\n  return encryptMessageDirect(senderX25519SecretKey, receiverX25519PublicKey, JSON.stringify(message));\n}\nfunction decryptMessage(senderX25519PublicKey, receiverEd25519SecretKey, securedMessage, nonce) {\n  const receiverX25519SecretKey = convertEd25519SecretKeyToX25519SecretKey(receiverEd25519SecretKey);\n  return decryptMessageDirect(senderX25519PublicKey, receiverX25519SecretKey, securedMessage, nonce);\n}\nfunction decryptMessageDirect(senderX25519PublicKey, receiverX25519SecretKey, securedMessage, nonce) {\n  let decryptedUint8;\n  try {\n    decryptedUint8 = tweetnacl__WEBPACK_IMPORTED_MODULE_1__.box.open(\n      securedMessage,\n      nonce,\n      senderX25519PublicKey.key.slice(0, 32),\n      receiverX25519SecretKey.key.slice(0, 32)\n    );\n  } catch (e) {\n    throw new DecryptionError(`Could not decrypt message: ${e.message}`);\n  }\n  if (!decryptedUint8)\n    throw new DecryptionError(\"Could not decrypt message\");\n  return new TextDecoder().decode(decryptedUint8);\n}\nfunction decryptObject(senderX25519PublicKey, receiverEd25519SecretKey, securedMessage, nonce) {\n  const receiverX25519SecretKey = convertEd25519SecretKeyToX25519SecretKey(receiverEd25519SecretKey);\n  return decryptObjectDirect(senderX25519PublicKey, receiverX25519SecretKey, securedMessage, nonce);\n}\nfunction decryptObjectDirect(senderX25519PublicKey, receiverX25519SecretKey, securedMessage, nonce) {\n  const decryptedStr = decryptMessageDirect(senderX25519PublicKey, receiverX25519SecretKey, securedMessage, nonce);\n  return JSON.parse(decryptedStr);\n}\nfunction messageHash(message, purpose) {\n  const signaturePrefixHash = new Uint8Array((0,_noble_hashes_sha3__WEBPACK_IMPORTED_MODULE_3__.sha3_256)(`${SIGNATURE_PREFIX}::${purpose}::`));\n  return new Uint8Array((0,_noble_hashes_sha3__WEBPACK_IMPORTED_MODULE_3__.sha3_256)(concatUint8array(signaturePrefixHash, message)));\n}\nfunction signWithEd25519SecretKey(message, signingEd25519SecretKey, purpose) {\n  return tweetnacl__WEBPACK_IMPORTED_MODULE_1__.sign.detached(messageHash(message, purpose), signingEd25519SecretKey.key);\n}\nfunction makeEd25519SecretKeySignCallbackNoDomainSeparation(signingEd25519SecretKey) {\n  return async (message) => new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519Signature(tweetnacl__WEBPACK_IMPORTED_MODULE_1__.sign.detached(message, signingEd25519SecretKey.key));\n}\nfunction verifySignature(message, signature, signingPublicKey, purpose) {\n  return signingPublicKey.verifySignature({ message: messageHash(message, purpose), signature });\n}\nfunction hashAndVerifySignature(message, signature, signingPublicKey, purpose) {\n  const messageUint8 = message instanceof Uint8Array ? message : new TextEncoder().encode(message);\n  const messageUint8Hash = (0,_noble_hashes_sha3__WEBPACK_IMPORTED_MODULE_3__.sha3_256)(messageUint8);\n  return verifySignature(messageUint8Hash, signature, signingPublicKey, purpose);\n}\n\n// src/securedEnvelope.ts\n\n\nvar REQUIRED_FIELDS = [\n  \"receiverEd25519PublicKeyB64\",\n  \"senderEd25519PublicKeyB64\",\n  \"senderX25519PublicKeyB64\",\n  \"sequence\",\n  \"timestampMillis\"\n].sort();\nfunction ensurePrivatePublicFieldsDisjoint(privateMessage, publicMessage) {\n  const intersection = Object.keys(privateMessage).filter((x) => Object.keys(publicMessage).includes(x));\n  if (intersection.length > 0) {\n    const field = intersection[0];\n    throw new EnvelopeMessageMismatchError(`Field ${field} appears in both private and public message fields`, field);\n  }\n}\nfunction ensureMetadataFields(message) {\n  const messageKeys = Object.keys(message).sort();\n  const extraFields = messageKeys.filter((key) => !REQUIRED_FIELDS.includes(key));\n  const missingFields = REQUIRED_FIELDS.filter((key) => !messageKeys.includes(key));\n  if (extraFields.length > 0 || missingFields.length > 0) {\n    let extraFieldsStr = extraFields.length > 0 ? `extra(${extraFields.join(\", \")})` : \"\";\n    const missingFieldsStr = missingFields.length > 0 ? `missing(${missingFields.join(\", \")})` : \"\";\n    extraFieldsStr = extraFieldsStr.length > 0 && missingFieldsStr.length > 0 ? `${extraFieldsStr}, ` : extraFieldsStr;\n    throw new EnvelopeMessageMismatchError(\n      `PublicMessage metadata fields do not conform to spec: ${extraFieldsStr}${missingFieldsStr}`,\n      \"_metadata\"\n    );\n  }\n}\nfunction deserializeTransportEnvelope(transportEnvelope) {\n  const publicMessage = JSON.parse(transportEnvelope.serializedPublicMessage);\n  return {\n    ...transportEnvelope,\n    publicMessage\n  };\n}\nfunction encryptAndSignEnvelope(senderEd25519SecretKey, senderEd25519PublicKey, receiverEd25519PublicKey, sequence, publicMessage, privateMessage) {\n  const senderEphemeralX25519KeyPair = createX25519KeyPair();\n  const metadata = constructMetadata(\n    senderEd25519PublicKey,\n    receiverEd25519PublicKey,\n    sequence,\n    senderEphemeralX25519KeyPair.publicKey\n  );\n  ensureMetadataFields(metadata);\n  ensurePrivatePublicFieldsDisjoint(privateMessage, publicMessage);\n  return dangerouslyEncryptAndSignEnvelopeUnvalidated(\n    senderEd25519SecretKey,\n    receiverEd25519PublicKey,\n    metadata,\n    privateMessage,\n    publicMessage,\n    senderEphemeralX25519KeyPair\n  );\n}\nfunction constructMetadata(senderEd25519PublicKey, receiverEd25519PublicKey, sequence, senderEphemeralX25519PublicKey) {\n  return {\n    receiverEd25519PublicKeyB64: encodeBase64(receiverEd25519PublicKey.key),\n    senderEd25519PublicKeyB64: encodeBase64(senderEd25519PublicKey.key),\n    senderX25519PublicKeyB64: encodeBase64(senderEphemeralX25519PublicKey.key),\n    sequence,\n    timestampMillis: Date.now()\n  };\n}\nfunction dangerouslyEncryptAndSignEnvelopeUnvalidated(senderEd25519SecretKey, receiverEd25519PublicKey, metadata, privateMessage, publicMessage, senderEphemeralX25519KeyPair) {\n  const encryptionResult = encryptObject(\n    senderEphemeralX25519KeyPair.secretKey,\n    receiverEd25519PublicKey,\n    privateMessage\n  );\n  const encryptedPrivateMessage = serializeEncryptionResult(encryptionResult);\n  const encryptedPrivateMessageBytes = decodeBase64(encryptedPrivateMessage.securedB64);\n  const serializedPublicMessage = JSON.stringify({ ...publicMessage, _metadata: metadata });\n  const publicMessageBytes = new TextEncoder().encode(serializedPublicMessage);\n  const messageSignature = signEnvelope(publicMessageBytes, encryptedPrivateMessageBytes, senderEd25519SecretKey);\n  return {\n    encryptedPrivateMessage,\n    messageSignature,\n    serializedPublicMessage\n  };\n}\nfunction combineHashedEnvelopeMessageBytes(publicMessageBytes, privateMessageBytes) {\n  const publicMessageBytesHash = (0,_noble_hashes_sha3__WEBPACK_IMPORTED_MODULE_3__.sha3_256)(publicMessageBytes);\n  const privateMessageBytesHash = (0,_noble_hashes_sha3__WEBPACK_IMPORTED_MODULE_3__.sha3_256)(privateMessageBytes);\n  const combinedHash = new Uint8Array(publicMessageBytesHash.length + privateMessageBytesHash.length);\n  combinedHash.set(publicMessageBytesHash);\n  combinedHash.set(privateMessageBytesHash, publicMessageBytesHash.length);\n  return (0,_noble_hashes_sha3__WEBPACK_IMPORTED_MODULE_3__.sha3_256)(combinedHash);\n}\nfunction signEnvelope(publicMessageBytes, privateMessageBytes, senderEd25519SecretKey) {\n  const messageHashBytes = combineHashedEnvelopeMessageBytes(publicMessageBytes, privateMessageBytes);\n  const signatureBytes = signWithEd25519SecretKey(messageHashBytes, senderEd25519SecretKey, \"SECURED_ENVELOPE\");\n  return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Hex.fromHexInput(signatureBytes).toString();\n}\nfunction verifyEnvelopeSignature(publicMessageBytes, privateMessageBytes, messageSignatureInput, senderEd25519PublicKey) {\n  const messageSignature = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519Signature(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Hex.fromHexInput(messageSignatureInput).toUint8Array());\n  const senderPublicKey = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519PublicKey(senderEd25519PublicKey.key);\n  const messageHashBytes = combineHashedEnvelopeMessageBytes(publicMessageBytes, privateMessageBytes);\n  const messageVerified = verifySignature(messageHashBytes, messageSignature, senderPublicKey, \"SECURED_ENVELOPE\");\n  if (!messageVerified) {\n    throw new EnvelopeMessageMismatchError(\"Could not verify SecuredEnvelope signature\", \"messageSignature\");\n  }\n}\nfunction decryptEnvelope(senderEd25519PublicKey, receiverEd25519SecretKey, message) {\n  const { encryptedPrivateMessage, messageSignature, serializedPublicMessage } = message;\n  const publicMessage = JSON.parse(serializedPublicMessage);\n  const rawPrivateMessage = decodeBase64(encryptedPrivateMessage.securedB64);\n  const rawPublicMessage = new TextEncoder().encode(serializedPublicMessage);\n  verifyEnvelopeSignature(rawPublicMessage, rawPrivateMessage, messageSignature, senderEd25519PublicKey);\n  const senderEd25519PublicKeyB64 = encodeBase64(senderEd25519PublicKey.key);\n  const expectedPublicKeyB64 = publicMessage._metadata.senderEd25519PublicKeyB64;\n  if (senderEd25519PublicKeyB64 !== expectedPublicKeyB64) {\n    throw new EnvelopeMessageMismatchError(\n      \"senderEd25519PublicKey in envelope does not match provided receiverEd25519SecretKey\",\n      \"senderPublicKey\"\n    );\n  }\n  const senderX25519PublicKeyBytes = decodeBase64(publicMessage._metadata.senderX25519PublicKeyB64);\n  const senderX25519PublicKey = toKey(senderX25519PublicKeyBytes, \"X25519PublicKey\" /* X25519PublicKey */);\n  const encryptionResult = deserializeEncryptionResult(encryptedPrivateMessage);\n  const privateMessage = decryptObject(\n    senderX25519PublicKey,\n    receiverEd25519SecretKey,\n    encryptionResult.secured,\n    encryptionResult.nonce\n  );\n  ensureMetadataFields(publicMessage._metadata);\n  ensurePrivatePublicFieldsDisjoint(privateMessage, publicMessage);\n  return {\n    messageSignature,\n    privateMessage,\n    publicMessage\n  };\n}\n\n// src/serialization.ts\n\n\nfunction serializePublicKeyB64(publicKey) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_4__.serializePublicKey)(serializer, publicKey);\n  return (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_4__.bytesToBase64)(serializer.toUint8Array());\n}\nfunction deserializePublicKeyB64(publicKeyB64) {\n  const serializedPublicKey = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_4__.base64ToBytes)(publicKeyB64);\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(serializedPublicKey);\n  return (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_4__.deserializePublicKey)(deserializer);\n}\nfunction deserializeEd25519PublicKeyB64(ed25519PublicKeyB64) {\n  return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519PublicKey(decodeBase64(ed25519PublicKeyB64));\n}\nfunction serializeSignatureB64(signature) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_4__.serializeSignature)(serializer, signature);\n  return (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_4__.bytesToBase64)(serializer.toUint8Array());\n}\nfunction deserializeSignatureB64(signatureB64) {\n  const serializedSignature = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_4__.base64ToBytes)(signatureB64);\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(serializedSignature);\n  return (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_4__.deserializeSignature)(deserializer);\n}\nfunction deserializeEd25519SignatureB64(ed25519SignatureB64) {\n  const signatureBytes = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Hex.fromHexInput(ed25519SignatureB64).toUint8Array();\n  return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519Signature(signatureBytes);\n}\nfunction publicKeyB64FromEd25519PublicKeyB64(ed25519PublicKeyB64) {\n  const publicKey = deserializeEd25519PublicKeyB64(ed25519PublicKeyB64);\n  return serializePublicKeyB64(publicKey);\n}\n\n// src/walletAccounts.ts\n\n\nvar AccountConnectionAction = /* @__PURE__ */ ((AccountConnectionAction2) => {\n  AccountConnectionAction2[\"ADD\"] = \"add\";\n  AccountConnectionAction2[\"REMOVE\"] = \"remove\";\n  return AccountConnectionAction2;\n})(AccountConnectionAction || {});\nfunction deriveAccountTransportEd25519Keypair(ed25519SecretKeyOrSignCallback, publicKey) {\n  const publicKeyBytes = publicKey instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.PublicKey ? publicKey.toUint8Array() : publicKey.key;\n  if (ed25519SecretKeyOrSignCallback instanceof Function) {\n    const seedGeneratorBytes = messageHash(publicKeyBytes, \"TRANSPORT_KEYPAIR\");\n    const signature = ed25519SecretKeyOrSignCallback(seedGeneratorBytes);\n    if (signature instanceof Promise) {\n      return signature.then((value) => ed25519KeypairFromSecret(value.toUint8Array()));\n    }\n    return ed25519KeypairFromSecret(signature.toUint8Array());\n  }\n  const seedBytes = signWithEd25519SecretKey(publicKeyBytes, ed25519SecretKeyOrSignCallback, \"TRANSPORT_KEYPAIR\");\n  return ed25519KeypairFromSecret(seedBytes);\n}\nfunction createSerializedAccountInfo(...[\n  signCallback,\n  publicKey,\n  transportEd25519PublicKey,\n  action,\n  intentId,\n  accountAddress\n]) {\n  const authKey = publicKey.authKey();\n  const finalAccountAddress = accountAddress || authKey.derivedAddress().toString();\n  const publicKeyB64 = serializePublicKeyB64(publicKey);\n  const accountInfo = {\n    accountAddress: finalAccountAddress,\n    action,\n    intentId,\n    publicKeyB64,\n    timestampMillis: Date.now(),\n    transportEd25519PublicKeyB64: encodeBase64(transportEd25519PublicKey.key)\n  };\n  const accountInfoSerialized = JSON.stringify(accountInfo);\n  const accountInfoBytes = new TextEncoder().encode(accountInfoSerialized);\n  const accountInfoHash = (0,_noble_hashes_sha3__WEBPACK_IMPORTED_MODULE_3__.sha3_256)(accountInfoBytes);\n  const signature = signCallback(messageHash(accountInfoHash, \"ACCOUNT_INFO\"));\n  if (signature instanceof Promise) {\n    return signature.then((value) => ({\n      accountInfoSerialized,\n      signatureB64: serializeSignatureB64(value)\n    }));\n  }\n  return {\n    accountInfoSerialized,\n    signatureB64: serializeSignatureB64(signature)\n  };\n}\nasync function aptosAccountToSerializedInfo(account, intentId) {\n  const signCallback = async (data) => account.sign(data);\n  const transportKey = await deriveAccountTransportEd25519Keypair(signCallback, account.publicKey);\n  return createSerializedAccountInfo(\n    signCallback,\n    account.publicKey,\n    transportKey.publicKey,\n    \"add\" /* ADD */,\n    intentId\n  );\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGlkZW50aXR5LWNvbm5lY3QvY3J5cHRvL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDc0Q7QUFDUjtBQUNoQjtBQUNFOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7QUFDakI7QUFDQSx5QkFBeUIsMENBQVE7QUFDakM7QUFDQTtBQUNBLDBCQUEwQiwyQ0FBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJDQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzREFBeUI7QUFDbkQ7QUFDQSx1QkFBdUIsY0FBYztBQUNyQztBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0RBQXlCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixrREFBaUIsQ0FBQywwQ0FBUztBQUMzQztBQUNBLGtCQUFrQiwwQ0FBUztBQUMzQixXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDBDQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osNERBQTRELFVBQVU7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qyw0REFBUSxJQUFJLGlCQUFpQixJQUFJLFFBQVE7QUFDdEYsd0JBQXdCLDREQUFRO0FBQ2hDO0FBQ0E7QUFDQSxTQUFTLDJDQUFVO0FBQ25CO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0VBQWdCLENBQUMsMkNBQVU7QUFDM0Q7QUFDQTtBQUNBLDRDQUE0QyxtREFBbUQ7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDREQUFRO0FBQ25DO0FBQ0E7O0FBRUE7QUFDMkg7QUFDaEU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxPQUFPO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELHVCQUF1QjtBQUNsRixtRUFBbUUseUJBQXlCO0FBQzVGLG1GQUFtRixlQUFlO0FBQ2xHO0FBQ0EsK0RBQStELGVBQWUsRUFBRSxpQkFBaUI7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCx1Q0FBdUM7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDREQUFTO0FBQzFDLGtDQUFrQyw0REFBUztBQUMzQztBQUNBO0FBQ0E7QUFDQSxTQUFTLDREQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtREFBRztBQUNaO0FBQ0E7QUFDQSwrQkFBK0IsZ0VBQWlCLENBQUMsbURBQUc7QUFDcEQsOEJBQThCLGdFQUFxQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUVBQXFFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFRbUM7QUFPUDtBQUM1QjtBQUNBLHlCQUF5QiwwREFBVTtBQUNuQyxFQUFFLDZFQUFrQjtBQUNwQixTQUFTLHdFQUFhO0FBQ3RCO0FBQ0E7QUFDQSw4QkFBOEIsd0VBQWE7QUFDM0MsMkJBQTJCLDREQUFZO0FBQ3ZDLFNBQVMsK0VBQW9CO0FBQzdCO0FBQ0E7QUFDQSxhQUFhLGdFQUFzQjtBQUNuQztBQUNBO0FBQ0EseUJBQXlCLDBEQUFVO0FBQ25DLEVBQUUsNkVBQWtCO0FBQ3BCLFNBQVMsd0VBQWE7QUFDdEI7QUFDQTtBQUNBLDhCQUE4Qix3RUFBYTtBQUMzQywyQkFBMkIsNERBQVk7QUFDdkMsU0FBUywrRUFBb0I7QUFDN0I7QUFDQTtBQUNBLHlCQUF5QixtREFBSTtBQUM3QixhQUFhLGdFQUFpQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2lFO0FBQ047QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLCtCQUErQjtBQUNoQztBQUNBLDhDQUE4Qyx5REFBYztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDREQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXdERTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXB0b2dvdGNoaS1yYW5kb20tbWludC1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BpZGVudGl0eS1jb25uZWN0L2NyeXB0by9kaXN0L2luZGV4Lm1qcz9kYjBlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9lbmNyRGVjci50c1xuaW1wb3J0IHsgRWQyNTUxOVNpZ25hdHVyZSB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IHNoYTNfMjU2IH0gZnJvbSBcIkBub2JsZS9oYXNoZXMvc2hhM1wiO1xuaW1wb3J0IG5hY2wyIGZyb20gXCJ0d2VldG5hY2xcIjtcbmltcG9ydCBlZDJjdXJ2ZSBmcm9tIFwiZWQyY3VydmVcIjtcblxuLy8gc3JjL2Vycm9ycy50c1xudmFyIEVuY3J5cHRpb25FbnZlbG9wZUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG59O1xudmFyIEVudmVsb3BlTWVzc2FnZU1pc21hdGNoRXJyb3IgPSBjbGFzcyBfRW52ZWxvcGVNZXNzYWdlTWlzbWF0Y2hFcnJvciBleHRlbmRzIEVuY3J5cHRpb25FbnZlbG9wZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgZmllbGQpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgdGhpcy5uYW1lID0gXCJFbnZlbG9wZU1lc3NhZ2VNaXNtYXRjaEVycm9yXCI7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIF9FbnZlbG9wZU1lc3NhZ2VNaXNtYXRjaEVycm9yLnByb3RvdHlwZSk7XG4gIH1cbn07XG52YXIgRGVjcnlwdGlvbkVycm9yID0gY2xhc3MgX0RlY3J5cHRpb25FcnJvciBleHRlbmRzIEVuY3J5cHRpb25FbnZlbG9wZUVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiRGVjcnlwdGlvbkVycm9yXCI7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIF9EZWNyeXB0aW9uRXJyb3IucHJvdG90eXBlKTtcbiAgfVxufTtcblxuLy8gc3JjL3V0aWxzLnRzXG5pbXBvcnQgbmFjbCBmcm9tIFwidHdlZXRuYWNsXCI7XG52YXIgS2V5VHlwZXMgPSAvKiBAX19QVVJFX18gKi8gKChLZXlUeXBlczIpID0+IHtcbiAgS2V5VHlwZXMyW1wiRWQyNTUxOVB1YmxpY0tleVwiXSA9IFwiRWQyNTUxOVB1YmxpY0tleVwiO1xuICBLZXlUeXBlczJbXCJFZDI1NTE5U2VjcmV0S2V5XCJdID0gXCJFZDI1NTE5U2VjcmV0S2V5XCI7XG4gIEtleVR5cGVzMltcIlgyNTUxOVB1YmxpY0tleVwiXSA9IFwiWDI1NTE5UHVibGljS2V5XCI7XG4gIEtleVR5cGVzMltcIlgyNTUxOVNlY3JldEtleVwiXSA9IFwiWDI1NTE5U2VjcmV0S2V5XCI7XG4gIHJldHVybiBLZXlUeXBlczI7XG59KShLZXlUeXBlcyB8fCB7fSk7XG5mdW5jdGlvbiBjcmVhdGVYMjU1MTlLZXlQYWlyKCkge1xuICByZXR1cm4ga2V5cGFpclRvWDI1NTE5KG5hY2wuYm94LmtleVBhaXIoKSk7XG59XG5mdW5jdGlvbiBjcmVhdGVFZDI1NTE5S2V5UGFpcigpIHtcbiAgcmV0dXJuIGtleXBhaXJUb0VkMjU1MTkobmFjbC5zaWduLmtleVBhaXIoKSk7XG59XG5mdW5jdGlvbiB0b0tleShyYXdLZXksIHR5cGUpIHtcbiAgcmV0dXJuIHtcbiAgICBrZXk6IHJhd0tleSxcbiAgICB0eXBlXG4gIH07XG59XG5mdW5jdGlvbiBrZXlwYWlyVG9FZDI1NTE5KGtleVBhaXIpIHtcbiAgcmV0dXJuIHtcbiAgICBwdWJsaWNLZXk6IHRvS2V5KGtleVBhaXIucHVibGljS2V5LCBcIkVkMjU1MTlQdWJsaWNLZXlcIiAvKiBFZDI1NTE5UHVibGljS2V5ICovKSxcbiAgICBzZWNyZXRLZXk6IHRvS2V5KGtleVBhaXIuc2VjcmV0S2V5LCBcIkVkMjU1MTlTZWNyZXRLZXlcIiAvKiBFZDI1NTE5U2VjcmV0S2V5ICovKVxuICB9O1xufVxuZnVuY3Rpb24ga2V5cGFpclRvWDI1NTE5KGtleVBhaXIpIHtcbiAgcmV0dXJuIHtcbiAgICBwdWJsaWNLZXk6IHRvS2V5KGtleVBhaXIucHVibGljS2V5LCBcIlgyNTUxOVB1YmxpY0tleVwiIC8qIFgyNTUxOVB1YmxpY0tleSAqLyksXG4gICAgc2VjcmV0S2V5OiB0b0tleShrZXlQYWlyLnNlY3JldEtleSwgXCJYMjU1MTlTZWNyZXRLZXlcIiAvKiBYMjU1MTlTZWNyZXRLZXkgKi8pXG4gIH07XG59XG5mdW5jdGlvbiBhcHRvc0FjY291bnRUb0VkMjU1MTlLZXlwYWlyKGFjY291bnQpIHtcbiAgcmV0dXJuIGVkMjU1MTlLZXlwYWlyRnJvbVNlY3JldChhY2NvdW50LnNpZ25pbmdLZXkuc2VjcmV0S2V5KTtcbn1cbmZ1bmN0aW9uIGVkMjU1MTlLZXlwYWlyRnJvbVNlY3JldChlZDI1NTE5U2VjcmV0S2V5Qnl0ZXMpIHtcbiAgcmV0dXJuIGtleXBhaXJUb0VkMjU1MTkobmFjbC5zaWduLmtleVBhaXIuZnJvbVNlZWQoZWQyNTUxOVNlY3JldEtleUJ5dGVzLnNsaWNlKDAsIDMyKSkpO1xufVxuZnVuY3Rpb24gZGVjb2RlQmFzZTY0KGJhc2U2NFN0cikge1xuICBpZiAoZ2xvYmFsVGhpcy5CdWZmZXIpIHtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoQnVmZmVyLmZyb20oYmFzZTY0U3RyLCBcImJhc2U2NFwiKSk7XG4gIH1cbiAgcmV0dXJuIFVpbnQ4QXJyYXkuZnJvbShhdG9iKGJhc2U2NFN0ciksIChtKSA9PiBtLmNvZGVQb2ludEF0KDApKTtcbn1cbmZ1bmN0aW9uIGVuY29kZUJhc2U2NChieXRlcykge1xuICBpZiAoZ2xvYmFsVGhpcy5CdWZmZXIpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oYnl0ZXMpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xuICB9XG4gIHJldHVybiBidG9hKEFycmF5LmZyb20oYnl0ZXMsICh4KSA9PiBTdHJpbmcuZnJvbUNvZGVQb2ludCh4KSkuam9pbihcIlwiKSk7XG59XG5mdW5jdGlvbiBjb25jYXRVaW50OGFycmF5KGFycmF5T25lLCBhcnJheVR3bykge1xuICBjb25zdCBtZXJnZWRBcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5T25lLmxlbmd0aCArIGFycmF5VHdvLmxlbmd0aCk7XG4gIG1lcmdlZEFycmF5LnNldChhcnJheU9uZSk7XG4gIG1lcmdlZEFycmF5LnNldChhcnJheVR3bywgYXJyYXlPbmUubGVuZ3RoKTtcbiAgcmV0dXJuIG1lcmdlZEFycmF5O1xufVxuXG4vLyBzcmMvZW5jckRlY3IudHNcbnZhciBTSUdOQVRVUkVfUFJFRklYID0gXCJBUFRPUzo6SURFTlRJVFlfQ09OTkVDVFwiO1xuZnVuY3Rpb24gY29udmVydEVkMjU1MTlQdWJsaWNLZXlUb1gyNTUxOVB1YmxpY0tleShlZDI1NTE5UHVibGljS2V5LCBlcnJvcktleU5hbWUpIHtcbiAgY29uc3QgeDI1NTE5UHVibGljS2V5ID0gZWQyY3VydmUuY29udmVydFB1YmxpY0tleShlZDI1NTE5UHVibGljS2V5LmtleS5zbGljZSgwLCAzMikpO1xuICBpZiAoIXgyNTUxOVB1YmxpY0tleSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7ZXJyb3JLZXlOYW1lfSBpcyBub3QgYSB2YWxpZCBFZDI1NTE5IHB1YmxpYyBrZXlgKTtcbiAgcmV0dXJuIHRvS2V5KHgyNTUxOVB1YmxpY0tleSwgXCJYMjU1MTlQdWJsaWNLZXlcIiAvKiBYMjU1MTlQdWJsaWNLZXkgKi8pO1xufVxuZnVuY3Rpb24gY29udmVydEVkMjU1MTlTZWNyZXRLZXlUb1gyNTUxOVNlY3JldEtleShlZDI1NTE5U2VjcmV0S2V5KSB7XG4gIGNvbnN0IHgyNTUxOVNlY3JldEtleSA9IGVkMmN1cnZlLmNvbnZlcnRTZWNyZXRLZXkoZWQyNTUxOVNlY3JldEtleS5rZXkuc2xpY2UoMCwgMzIpKTtcbiAgcmV0dXJuIHRvS2V5KHgyNTUxOVNlY3JldEtleSwgXCJYMjU1MTlTZWNyZXRLZXlcIiAvKiBYMjU1MTlTZWNyZXRLZXkgKi8pO1xufVxuZnVuY3Rpb24gc2VyaWFsaXplRW5jcnlwdGlvblJlc3VsdChlbmMpIHtcbiAgcmV0dXJuIHtcbiAgICBub25jZUI2NDogZW5jb2RlQmFzZTY0KGVuYy5ub25jZSksXG4gICAgc2VjdXJlZEI2NDogZW5jb2RlQmFzZTY0KGVuYy5zZWN1cmVkKVxuICB9O1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVFbmNyeXB0aW9uUmVzdWx0KGVuYykge1xuICByZXR1cm4ge1xuICAgIG5vbmNlOiBkZWNvZGVCYXNlNjQoZW5jLm5vbmNlQjY0KSxcbiAgICBzZWN1cmVkOiBkZWNvZGVCYXNlNjQoZW5jLnNlY3VyZWRCNjQpXG4gIH07XG59XG5mdW5jdGlvbiBkZWNyeXB0U2VyaWFsaXplZEVuY3J5cHRpb25SZXN1bHQoc2VuZGVyWDI1NTE5UHVibGljS2V5LCByZWNlaXZlckVkMjU1MTlTZWNyZXRLZXksIGVuYykge1xuICBjb25zdCBkZXMgPSBkZXNlcmlhbGl6ZUVuY3J5cHRpb25SZXN1bHQoZW5jKTtcbiAgcmV0dXJuIGRlY3J5cHRPYmplY3Qoc2VuZGVyWDI1NTE5UHVibGljS2V5LCByZWNlaXZlckVkMjU1MTlTZWNyZXRLZXksIGRlcy5zZWN1cmVkLCBkZXMubm9uY2UpO1xufVxuZnVuY3Rpb24gZGVjcnlwdFNlcmlhbGl6ZWRFbmNyeXB0aW9uUmVzdWx0RGlyZWN0KHNlbmRlclgyNTUxOVB1YmxpY0tleSwgcmVjZWl2ZXJYMjU1MTlTZWNyZXRLZXksIGVuYykge1xuICBjb25zdCBkZXMgPSBkZXNlcmlhbGl6ZUVuY3J5cHRpb25SZXN1bHQoZW5jKTtcbiAgcmV0dXJuIGRlY3J5cHRPYmplY3REaXJlY3Qoc2VuZGVyWDI1NTE5UHVibGljS2V5LCByZWNlaXZlclgyNTUxOVNlY3JldEtleSwgZGVzLnNlY3VyZWQsIGRlcy5ub25jZSk7XG59XG5mdW5jdGlvbiBlbmNyeXB0TWVzc2FnZShzZW5kZXJYMjU1MTlTZWNyZXRLZXksIHJlY2VpdmVyRWQyNTUxOVB1YmxpY0tleSwgbWVzc2FnZSkge1xuICBjb25zdCByZWNlaXZlclgyNTUxOVB1YmxpY0tleSA9IGNvbnZlcnRFZDI1NTE5UHVibGljS2V5VG9YMjU1MTlQdWJsaWNLZXkoXG4gICAgcmVjZWl2ZXJFZDI1NTE5UHVibGljS2V5LFxuICAgIFwicmVjZWl2ZXIgcHVibGljIGtleVwiXG4gICk7XG4gIHJldHVybiBlbmNyeXB0TWVzc2FnZURpcmVjdChzZW5kZXJYMjU1MTlTZWNyZXRLZXksIHJlY2VpdmVyWDI1NTE5UHVibGljS2V5LCBtZXNzYWdlKTtcbn1cbmZ1bmN0aW9uIGVuY3J5cHRNZXNzYWdlRGlyZWN0KHNlbmRlclgyNTUxOVNlY3JldEtleSwgcmVjZWl2ZXJYMjU1MTlQdWJsaWNLZXksIG1lc3NhZ2UpIHtcbiAgY29uc3Qgbm9uY2UgPSBuYWNsMi5yYW5kb21CeXRlcyhuYWNsMi5ib3gubm9uY2VMZW5ndGgpO1xuICBjb25zdCBtZXNzYWdlVWludDggPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUobWVzc2FnZSk7XG4gIGNvbnN0IHNlY3VyZWQgPSBuYWNsMi5ib3gobWVzc2FnZVVpbnQ4LCBub25jZSwgcmVjZWl2ZXJYMjU1MTlQdWJsaWNLZXkua2V5LCBzZW5kZXJYMjU1MTlTZWNyZXRLZXkua2V5LnNsaWNlKDAsIDMyKSk7XG4gIHJldHVybiB7IG5vbmNlLCBzZWN1cmVkIH07XG59XG5mdW5jdGlvbiBlbmNyeXB0T2JqZWN0KHNlbmRlclgyNTUxOVNlY3JldEtleSwgcmVjZWl2ZXJFZDI1NTE5UHVibGljS2V5LCBtZXNzYWdlKSB7XG4gIGNvbnN0IHJlY2VpdmVyWDI1NTE5UHVibGljS2V5ID0gY29udmVydEVkMjU1MTlQdWJsaWNLZXlUb1gyNTUxOVB1YmxpY0tleShcbiAgICByZWNlaXZlckVkMjU1MTlQdWJsaWNLZXksXG4gICAgXCJyZWNlaXZlciBwdWJsaWMga2V5XCJcbiAgKTtcbiAgcmV0dXJuIGVuY3J5cHRPYmplY3REaXJlY3Qoc2VuZGVyWDI1NTE5U2VjcmV0S2V5LCByZWNlaXZlclgyNTUxOVB1YmxpY0tleSwgbWVzc2FnZSk7XG59XG5mdW5jdGlvbiBlbmNyeXB0T2JqZWN0RGlyZWN0KHNlbmRlclgyNTUxOVNlY3JldEtleSwgcmVjZWl2ZXJYMjU1MTlQdWJsaWNLZXksIG1lc3NhZ2UpIHtcbiAgcmV0dXJuIGVuY3J5cHRNZXNzYWdlRGlyZWN0KHNlbmRlclgyNTUxOVNlY3JldEtleSwgcmVjZWl2ZXJYMjU1MTlQdWJsaWNLZXksIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcbn1cbmZ1bmN0aW9uIGRlY3J5cHRNZXNzYWdlKHNlbmRlclgyNTUxOVB1YmxpY0tleSwgcmVjZWl2ZXJFZDI1NTE5U2VjcmV0S2V5LCBzZWN1cmVkTWVzc2FnZSwgbm9uY2UpIHtcbiAgY29uc3QgcmVjZWl2ZXJYMjU1MTlTZWNyZXRLZXkgPSBjb252ZXJ0RWQyNTUxOVNlY3JldEtleVRvWDI1NTE5U2VjcmV0S2V5KHJlY2VpdmVyRWQyNTUxOVNlY3JldEtleSk7XG4gIHJldHVybiBkZWNyeXB0TWVzc2FnZURpcmVjdChzZW5kZXJYMjU1MTlQdWJsaWNLZXksIHJlY2VpdmVyWDI1NTE5U2VjcmV0S2V5LCBzZWN1cmVkTWVzc2FnZSwgbm9uY2UpO1xufVxuZnVuY3Rpb24gZGVjcnlwdE1lc3NhZ2VEaXJlY3Qoc2VuZGVyWDI1NTE5UHVibGljS2V5LCByZWNlaXZlclgyNTUxOVNlY3JldEtleSwgc2VjdXJlZE1lc3NhZ2UsIG5vbmNlKSB7XG4gIGxldCBkZWNyeXB0ZWRVaW50ODtcbiAgdHJ5IHtcbiAgICBkZWNyeXB0ZWRVaW50OCA9IG5hY2wyLmJveC5vcGVuKFxuICAgICAgc2VjdXJlZE1lc3NhZ2UsXG4gICAgICBub25jZSxcbiAgICAgIHNlbmRlclgyNTUxOVB1YmxpY0tleS5rZXkuc2xpY2UoMCwgMzIpLFxuICAgICAgcmVjZWl2ZXJYMjU1MTlTZWNyZXRLZXkua2V5LnNsaWNlKDAsIDMyKVxuICAgICk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRGVjcnlwdGlvbkVycm9yKGBDb3VsZCBub3QgZGVjcnlwdCBtZXNzYWdlOiAke2UubWVzc2FnZX1gKTtcbiAgfVxuICBpZiAoIWRlY3J5cHRlZFVpbnQ4KVxuICAgIHRocm93IG5ldyBEZWNyeXB0aW9uRXJyb3IoXCJDb3VsZCBub3QgZGVjcnlwdCBtZXNzYWdlXCIpO1xuICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGRlY3J5cHRlZFVpbnQ4KTtcbn1cbmZ1bmN0aW9uIGRlY3J5cHRPYmplY3Qoc2VuZGVyWDI1NTE5UHVibGljS2V5LCByZWNlaXZlckVkMjU1MTlTZWNyZXRLZXksIHNlY3VyZWRNZXNzYWdlLCBub25jZSkge1xuICBjb25zdCByZWNlaXZlclgyNTUxOVNlY3JldEtleSA9IGNvbnZlcnRFZDI1NTE5U2VjcmV0S2V5VG9YMjU1MTlTZWNyZXRLZXkocmVjZWl2ZXJFZDI1NTE5U2VjcmV0S2V5KTtcbiAgcmV0dXJuIGRlY3J5cHRPYmplY3REaXJlY3Qoc2VuZGVyWDI1NTE5UHVibGljS2V5LCByZWNlaXZlclgyNTUxOVNlY3JldEtleSwgc2VjdXJlZE1lc3NhZ2UsIG5vbmNlKTtcbn1cbmZ1bmN0aW9uIGRlY3J5cHRPYmplY3REaXJlY3Qoc2VuZGVyWDI1NTE5UHVibGljS2V5LCByZWNlaXZlclgyNTUxOVNlY3JldEtleSwgc2VjdXJlZE1lc3NhZ2UsIG5vbmNlKSB7XG4gIGNvbnN0IGRlY3J5cHRlZFN0ciA9IGRlY3J5cHRNZXNzYWdlRGlyZWN0KHNlbmRlclgyNTUxOVB1YmxpY0tleSwgcmVjZWl2ZXJYMjU1MTlTZWNyZXRLZXksIHNlY3VyZWRNZXNzYWdlLCBub25jZSk7XG4gIHJldHVybiBKU09OLnBhcnNlKGRlY3J5cHRlZFN0cik7XG59XG5mdW5jdGlvbiBtZXNzYWdlSGFzaChtZXNzYWdlLCBwdXJwb3NlKSB7XG4gIGNvbnN0IHNpZ25hdHVyZVByZWZpeEhhc2ggPSBuZXcgVWludDhBcnJheShzaGEzXzI1NihgJHtTSUdOQVRVUkVfUFJFRklYfTo6JHtwdXJwb3NlfTo6YCkpO1xuICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoc2hhM18yNTYoY29uY2F0VWludDhhcnJheShzaWduYXR1cmVQcmVmaXhIYXNoLCBtZXNzYWdlKSkpO1xufVxuZnVuY3Rpb24gc2lnbldpdGhFZDI1NTE5U2VjcmV0S2V5KG1lc3NhZ2UsIHNpZ25pbmdFZDI1NTE5U2VjcmV0S2V5LCBwdXJwb3NlKSB7XG4gIHJldHVybiBuYWNsMi5zaWduLmRldGFjaGVkKG1lc3NhZ2VIYXNoKG1lc3NhZ2UsIHB1cnBvc2UpLCBzaWduaW5nRWQyNTUxOVNlY3JldEtleS5rZXkpO1xufVxuZnVuY3Rpb24gbWFrZUVkMjU1MTlTZWNyZXRLZXlTaWduQ2FsbGJhY2tOb0RvbWFpblNlcGFyYXRpb24oc2lnbmluZ0VkMjU1MTlTZWNyZXRLZXkpIHtcbiAgcmV0dXJuIGFzeW5jIChtZXNzYWdlKSA9PiBuZXcgRWQyNTUxOVNpZ25hdHVyZShuYWNsMi5zaWduLmRldGFjaGVkKG1lc3NhZ2UsIHNpZ25pbmdFZDI1NTE5U2VjcmV0S2V5LmtleSkpO1xufVxuZnVuY3Rpb24gdmVyaWZ5U2lnbmF0dXJlKG1lc3NhZ2UsIHNpZ25hdHVyZSwgc2lnbmluZ1B1YmxpY0tleSwgcHVycG9zZSkge1xuICByZXR1cm4gc2lnbmluZ1B1YmxpY0tleS52ZXJpZnlTaWduYXR1cmUoeyBtZXNzYWdlOiBtZXNzYWdlSGFzaChtZXNzYWdlLCBwdXJwb3NlKSwgc2lnbmF0dXJlIH0pO1xufVxuZnVuY3Rpb24gaGFzaEFuZFZlcmlmeVNpZ25hdHVyZShtZXNzYWdlLCBzaWduYXR1cmUsIHNpZ25pbmdQdWJsaWNLZXksIHB1cnBvc2UpIHtcbiAgY29uc3QgbWVzc2FnZVVpbnQ4ID0gbWVzc2FnZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgPyBtZXNzYWdlIDogbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKG1lc3NhZ2UpO1xuICBjb25zdCBtZXNzYWdlVWludDhIYXNoID0gc2hhM18yNTYobWVzc2FnZVVpbnQ4KTtcbiAgcmV0dXJuIHZlcmlmeVNpZ25hdHVyZShtZXNzYWdlVWludDhIYXNoLCBzaWduYXR1cmUsIHNpZ25pbmdQdWJsaWNLZXksIHB1cnBvc2UpO1xufVxuXG4vLyBzcmMvc2VjdXJlZEVudmVsb3BlLnRzXG5pbXBvcnQgeyBFZDI1NTE5UHVibGljS2V5IGFzIEFwdG9zRWQyNTUxOVB1YmxpY0tleSwgRWQyNTUxOVNpZ25hdHVyZSBhcyBFZDI1NTE5U2lnbmF0dXJlMiwgSGV4IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgc2hhM18yNTYgYXMgc2hhM18yNTYyIH0gZnJvbSBcIkBub2JsZS9oYXNoZXMvc2hhM1wiO1xudmFyIFJFUVVJUkVEX0ZJRUxEUyA9IFtcbiAgXCJyZWNlaXZlckVkMjU1MTlQdWJsaWNLZXlCNjRcIixcbiAgXCJzZW5kZXJFZDI1NTE5UHVibGljS2V5QjY0XCIsXG4gIFwic2VuZGVyWDI1NTE5UHVibGljS2V5QjY0XCIsXG4gIFwic2VxdWVuY2VcIixcbiAgXCJ0aW1lc3RhbXBNaWxsaXNcIlxuXS5zb3J0KCk7XG5mdW5jdGlvbiBlbnN1cmVQcml2YXRlUHVibGljRmllbGRzRGlzam9pbnQocHJpdmF0ZU1lc3NhZ2UsIHB1YmxpY01lc3NhZ2UpIHtcbiAgY29uc3QgaW50ZXJzZWN0aW9uID0gT2JqZWN0LmtleXMocHJpdmF0ZU1lc3NhZ2UpLmZpbHRlcigoeCkgPT4gT2JqZWN0LmtleXMocHVibGljTWVzc2FnZSkuaW5jbHVkZXMoeCkpO1xuICBpZiAoaW50ZXJzZWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBmaWVsZCA9IGludGVyc2VjdGlvblswXTtcbiAgICB0aHJvdyBuZXcgRW52ZWxvcGVNZXNzYWdlTWlzbWF0Y2hFcnJvcihgRmllbGQgJHtmaWVsZH0gYXBwZWFycyBpbiBib3RoIHByaXZhdGUgYW5kIHB1YmxpYyBtZXNzYWdlIGZpZWxkc2AsIGZpZWxkKTtcbiAgfVxufVxuZnVuY3Rpb24gZW5zdXJlTWV0YWRhdGFGaWVsZHMobWVzc2FnZSkge1xuICBjb25zdCBtZXNzYWdlS2V5cyA9IE9iamVjdC5rZXlzKG1lc3NhZ2UpLnNvcnQoKTtcbiAgY29uc3QgZXh0cmFGaWVsZHMgPSBtZXNzYWdlS2V5cy5maWx0ZXIoKGtleSkgPT4gIVJFUVVJUkVEX0ZJRUxEUy5pbmNsdWRlcyhrZXkpKTtcbiAgY29uc3QgbWlzc2luZ0ZpZWxkcyA9IFJFUVVJUkVEX0ZJRUxEUy5maWx0ZXIoKGtleSkgPT4gIW1lc3NhZ2VLZXlzLmluY2x1ZGVzKGtleSkpO1xuICBpZiAoZXh0cmFGaWVsZHMubGVuZ3RoID4gMCB8fCBtaXNzaW5nRmllbGRzLmxlbmd0aCA+IDApIHtcbiAgICBsZXQgZXh0cmFGaWVsZHNTdHIgPSBleHRyYUZpZWxkcy5sZW5ndGggPiAwID8gYGV4dHJhKCR7ZXh0cmFGaWVsZHMuam9pbihcIiwgXCIpfSlgIDogXCJcIjtcbiAgICBjb25zdCBtaXNzaW5nRmllbGRzU3RyID0gbWlzc2luZ0ZpZWxkcy5sZW5ndGggPiAwID8gYG1pc3NpbmcoJHttaXNzaW5nRmllbGRzLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgZXh0cmFGaWVsZHNTdHIgPSBleHRyYUZpZWxkc1N0ci5sZW5ndGggPiAwICYmIG1pc3NpbmdGaWVsZHNTdHIubGVuZ3RoID4gMCA/IGAke2V4dHJhRmllbGRzU3RyfSwgYCA6IGV4dHJhRmllbGRzU3RyO1xuICAgIHRocm93IG5ldyBFbnZlbG9wZU1lc3NhZ2VNaXNtYXRjaEVycm9yKFxuICAgICAgYFB1YmxpY01lc3NhZ2UgbWV0YWRhdGEgZmllbGRzIGRvIG5vdCBjb25mb3JtIHRvIHNwZWM6ICR7ZXh0cmFGaWVsZHNTdHJ9JHttaXNzaW5nRmllbGRzU3RyfWAsXG4gICAgICBcIl9tZXRhZGF0YVwiXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVUcmFuc3BvcnRFbnZlbG9wZSh0cmFuc3BvcnRFbnZlbG9wZSkge1xuICBjb25zdCBwdWJsaWNNZXNzYWdlID0gSlNPTi5wYXJzZSh0cmFuc3BvcnRFbnZlbG9wZS5zZXJpYWxpemVkUHVibGljTWVzc2FnZSk7XG4gIHJldHVybiB7XG4gICAgLi4udHJhbnNwb3J0RW52ZWxvcGUsXG4gICAgcHVibGljTWVzc2FnZVxuICB9O1xufVxuZnVuY3Rpb24gZW5jcnlwdEFuZFNpZ25FbnZlbG9wZShzZW5kZXJFZDI1NTE5U2VjcmV0S2V5LCBzZW5kZXJFZDI1NTE5UHVibGljS2V5LCByZWNlaXZlckVkMjU1MTlQdWJsaWNLZXksIHNlcXVlbmNlLCBwdWJsaWNNZXNzYWdlLCBwcml2YXRlTWVzc2FnZSkge1xuICBjb25zdCBzZW5kZXJFcGhlbWVyYWxYMjU1MTlLZXlQYWlyID0gY3JlYXRlWDI1NTE5S2V5UGFpcigpO1xuICBjb25zdCBtZXRhZGF0YSA9IGNvbnN0cnVjdE1ldGFkYXRhKFxuICAgIHNlbmRlckVkMjU1MTlQdWJsaWNLZXksXG4gICAgcmVjZWl2ZXJFZDI1NTE5UHVibGljS2V5LFxuICAgIHNlcXVlbmNlLFxuICAgIHNlbmRlckVwaGVtZXJhbFgyNTUxOUtleVBhaXIucHVibGljS2V5XG4gICk7XG4gIGVuc3VyZU1ldGFkYXRhRmllbGRzKG1ldGFkYXRhKTtcbiAgZW5zdXJlUHJpdmF0ZVB1YmxpY0ZpZWxkc0Rpc2pvaW50KHByaXZhdGVNZXNzYWdlLCBwdWJsaWNNZXNzYWdlKTtcbiAgcmV0dXJuIGRhbmdlcm91c2x5RW5jcnlwdEFuZFNpZ25FbnZlbG9wZVVudmFsaWRhdGVkKFxuICAgIHNlbmRlckVkMjU1MTlTZWNyZXRLZXksXG4gICAgcmVjZWl2ZXJFZDI1NTE5UHVibGljS2V5LFxuICAgIG1ldGFkYXRhLFxuICAgIHByaXZhdGVNZXNzYWdlLFxuICAgIHB1YmxpY01lc3NhZ2UsXG4gICAgc2VuZGVyRXBoZW1lcmFsWDI1NTE5S2V5UGFpclxuICApO1xufVxuZnVuY3Rpb24gY29uc3RydWN0TWV0YWRhdGEoc2VuZGVyRWQyNTUxOVB1YmxpY0tleSwgcmVjZWl2ZXJFZDI1NTE5UHVibGljS2V5LCBzZXF1ZW5jZSwgc2VuZGVyRXBoZW1lcmFsWDI1NTE5UHVibGljS2V5KSB7XG4gIHJldHVybiB7XG4gICAgcmVjZWl2ZXJFZDI1NTE5UHVibGljS2V5QjY0OiBlbmNvZGVCYXNlNjQocmVjZWl2ZXJFZDI1NTE5UHVibGljS2V5LmtleSksXG4gICAgc2VuZGVyRWQyNTUxOVB1YmxpY0tleUI2NDogZW5jb2RlQmFzZTY0KHNlbmRlckVkMjU1MTlQdWJsaWNLZXkua2V5KSxcbiAgICBzZW5kZXJYMjU1MTlQdWJsaWNLZXlCNjQ6IGVuY29kZUJhc2U2NChzZW5kZXJFcGhlbWVyYWxYMjU1MTlQdWJsaWNLZXkua2V5KSxcbiAgICBzZXF1ZW5jZSxcbiAgICB0aW1lc3RhbXBNaWxsaXM6IERhdGUubm93KClcbiAgfTtcbn1cbmZ1bmN0aW9uIGRhbmdlcm91c2x5RW5jcnlwdEFuZFNpZ25FbnZlbG9wZVVudmFsaWRhdGVkKHNlbmRlckVkMjU1MTlTZWNyZXRLZXksIHJlY2VpdmVyRWQyNTUxOVB1YmxpY0tleSwgbWV0YWRhdGEsIHByaXZhdGVNZXNzYWdlLCBwdWJsaWNNZXNzYWdlLCBzZW5kZXJFcGhlbWVyYWxYMjU1MTlLZXlQYWlyKSB7XG4gIGNvbnN0IGVuY3J5cHRpb25SZXN1bHQgPSBlbmNyeXB0T2JqZWN0KFxuICAgIHNlbmRlckVwaGVtZXJhbFgyNTUxOUtleVBhaXIuc2VjcmV0S2V5LFxuICAgIHJlY2VpdmVyRWQyNTUxOVB1YmxpY0tleSxcbiAgICBwcml2YXRlTWVzc2FnZVxuICApO1xuICBjb25zdCBlbmNyeXB0ZWRQcml2YXRlTWVzc2FnZSA9IHNlcmlhbGl6ZUVuY3J5cHRpb25SZXN1bHQoZW5jcnlwdGlvblJlc3VsdCk7XG4gIGNvbnN0IGVuY3J5cHRlZFByaXZhdGVNZXNzYWdlQnl0ZXMgPSBkZWNvZGVCYXNlNjQoZW5jcnlwdGVkUHJpdmF0ZU1lc3NhZ2Uuc2VjdXJlZEI2NCk7XG4gIGNvbnN0IHNlcmlhbGl6ZWRQdWJsaWNNZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkoeyAuLi5wdWJsaWNNZXNzYWdlLCBfbWV0YWRhdGE6IG1ldGFkYXRhIH0pO1xuICBjb25zdCBwdWJsaWNNZXNzYWdlQnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2VyaWFsaXplZFB1YmxpY01lc3NhZ2UpO1xuICBjb25zdCBtZXNzYWdlU2lnbmF0dXJlID0gc2lnbkVudmVsb3BlKHB1YmxpY01lc3NhZ2VCeXRlcywgZW5jcnlwdGVkUHJpdmF0ZU1lc3NhZ2VCeXRlcywgc2VuZGVyRWQyNTUxOVNlY3JldEtleSk7XG4gIHJldHVybiB7XG4gICAgZW5jcnlwdGVkUHJpdmF0ZU1lc3NhZ2UsXG4gICAgbWVzc2FnZVNpZ25hdHVyZSxcbiAgICBzZXJpYWxpemVkUHVibGljTWVzc2FnZVxuICB9O1xufVxuZnVuY3Rpb24gY29tYmluZUhhc2hlZEVudmVsb3BlTWVzc2FnZUJ5dGVzKHB1YmxpY01lc3NhZ2VCeXRlcywgcHJpdmF0ZU1lc3NhZ2VCeXRlcykge1xuICBjb25zdCBwdWJsaWNNZXNzYWdlQnl0ZXNIYXNoID0gc2hhM18yNTYyKHB1YmxpY01lc3NhZ2VCeXRlcyk7XG4gIGNvbnN0IHByaXZhdGVNZXNzYWdlQnl0ZXNIYXNoID0gc2hhM18yNTYyKHByaXZhdGVNZXNzYWdlQnl0ZXMpO1xuICBjb25zdCBjb21iaW5lZEhhc2ggPSBuZXcgVWludDhBcnJheShwdWJsaWNNZXNzYWdlQnl0ZXNIYXNoLmxlbmd0aCArIHByaXZhdGVNZXNzYWdlQnl0ZXNIYXNoLmxlbmd0aCk7XG4gIGNvbWJpbmVkSGFzaC5zZXQocHVibGljTWVzc2FnZUJ5dGVzSGFzaCk7XG4gIGNvbWJpbmVkSGFzaC5zZXQocHJpdmF0ZU1lc3NhZ2VCeXRlc0hhc2gsIHB1YmxpY01lc3NhZ2VCeXRlc0hhc2gubGVuZ3RoKTtcbiAgcmV0dXJuIHNoYTNfMjU2Mihjb21iaW5lZEhhc2gpO1xufVxuZnVuY3Rpb24gc2lnbkVudmVsb3BlKHB1YmxpY01lc3NhZ2VCeXRlcywgcHJpdmF0ZU1lc3NhZ2VCeXRlcywgc2VuZGVyRWQyNTUxOVNlY3JldEtleSkge1xuICBjb25zdCBtZXNzYWdlSGFzaEJ5dGVzID0gY29tYmluZUhhc2hlZEVudmVsb3BlTWVzc2FnZUJ5dGVzKHB1YmxpY01lc3NhZ2VCeXRlcywgcHJpdmF0ZU1lc3NhZ2VCeXRlcyk7XG4gIGNvbnN0IHNpZ25hdHVyZUJ5dGVzID0gc2lnbldpdGhFZDI1NTE5U2VjcmV0S2V5KG1lc3NhZ2VIYXNoQnl0ZXMsIHNlbmRlckVkMjU1MTlTZWNyZXRLZXksIFwiU0VDVVJFRF9FTlZFTE9QRVwiKTtcbiAgcmV0dXJuIEhleC5mcm9tSGV4SW5wdXQoc2lnbmF0dXJlQnl0ZXMpLnRvU3RyaW5nKCk7XG59XG5mdW5jdGlvbiB2ZXJpZnlFbnZlbG9wZVNpZ25hdHVyZShwdWJsaWNNZXNzYWdlQnl0ZXMsIHByaXZhdGVNZXNzYWdlQnl0ZXMsIG1lc3NhZ2VTaWduYXR1cmVJbnB1dCwgc2VuZGVyRWQyNTUxOVB1YmxpY0tleSkge1xuICBjb25zdCBtZXNzYWdlU2lnbmF0dXJlID0gbmV3IEVkMjU1MTlTaWduYXR1cmUyKEhleC5mcm9tSGV4SW5wdXQobWVzc2FnZVNpZ25hdHVyZUlucHV0KS50b1VpbnQ4QXJyYXkoKSk7XG4gIGNvbnN0IHNlbmRlclB1YmxpY0tleSA9IG5ldyBBcHRvc0VkMjU1MTlQdWJsaWNLZXkoc2VuZGVyRWQyNTUxOVB1YmxpY0tleS5rZXkpO1xuICBjb25zdCBtZXNzYWdlSGFzaEJ5dGVzID0gY29tYmluZUhhc2hlZEVudmVsb3BlTWVzc2FnZUJ5dGVzKHB1YmxpY01lc3NhZ2VCeXRlcywgcHJpdmF0ZU1lc3NhZ2VCeXRlcyk7XG4gIGNvbnN0IG1lc3NhZ2VWZXJpZmllZCA9IHZlcmlmeVNpZ25hdHVyZShtZXNzYWdlSGFzaEJ5dGVzLCBtZXNzYWdlU2lnbmF0dXJlLCBzZW5kZXJQdWJsaWNLZXksIFwiU0VDVVJFRF9FTlZFTE9QRVwiKTtcbiAgaWYgKCFtZXNzYWdlVmVyaWZpZWQpIHtcbiAgICB0aHJvdyBuZXcgRW52ZWxvcGVNZXNzYWdlTWlzbWF0Y2hFcnJvcihcIkNvdWxkIG5vdCB2ZXJpZnkgU2VjdXJlZEVudmVsb3BlIHNpZ25hdHVyZVwiLCBcIm1lc3NhZ2VTaWduYXR1cmVcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlY3J5cHRFbnZlbG9wZShzZW5kZXJFZDI1NTE5UHVibGljS2V5LCByZWNlaXZlckVkMjU1MTlTZWNyZXRLZXksIG1lc3NhZ2UpIHtcbiAgY29uc3QgeyBlbmNyeXB0ZWRQcml2YXRlTWVzc2FnZSwgbWVzc2FnZVNpZ25hdHVyZSwgc2VyaWFsaXplZFB1YmxpY01lc3NhZ2UgfSA9IG1lc3NhZ2U7XG4gIGNvbnN0IHB1YmxpY01lc3NhZ2UgPSBKU09OLnBhcnNlKHNlcmlhbGl6ZWRQdWJsaWNNZXNzYWdlKTtcbiAgY29uc3QgcmF3UHJpdmF0ZU1lc3NhZ2UgPSBkZWNvZGVCYXNlNjQoZW5jcnlwdGVkUHJpdmF0ZU1lc3NhZ2Uuc2VjdXJlZEI2NCk7XG4gIGNvbnN0IHJhd1B1YmxpY01lc3NhZ2UgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2VyaWFsaXplZFB1YmxpY01lc3NhZ2UpO1xuICB2ZXJpZnlFbnZlbG9wZVNpZ25hdHVyZShyYXdQdWJsaWNNZXNzYWdlLCByYXdQcml2YXRlTWVzc2FnZSwgbWVzc2FnZVNpZ25hdHVyZSwgc2VuZGVyRWQyNTUxOVB1YmxpY0tleSk7XG4gIGNvbnN0IHNlbmRlckVkMjU1MTlQdWJsaWNLZXlCNjQgPSBlbmNvZGVCYXNlNjQoc2VuZGVyRWQyNTUxOVB1YmxpY0tleS5rZXkpO1xuICBjb25zdCBleHBlY3RlZFB1YmxpY0tleUI2NCA9IHB1YmxpY01lc3NhZ2UuX21ldGFkYXRhLnNlbmRlckVkMjU1MTlQdWJsaWNLZXlCNjQ7XG4gIGlmIChzZW5kZXJFZDI1NTE5UHVibGljS2V5QjY0ICE9PSBleHBlY3RlZFB1YmxpY0tleUI2NCkge1xuICAgIHRocm93IG5ldyBFbnZlbG9wZU1lc3NhZ2VNaXNtYXRjaEVycm9yKFxuICAgICAgXCJzZW5kZXJFZDI1NTE5UHVibGljS2V5IGluIGVudmVsb3BlIGRvZXMgbm90IG1hdGNoIHByb3ZpZGVkIHJlY2VpdmVyRWQyNTUxOVNlY3JldEtleVwiLFxuICAgICAgXCJzZW5kZXJQdWJsaWNLZXlcIlxuICAgICk7XG4gIH1cbiAgY29uc3Qgc2VuZGVyWDI1NTE5UHVibGljS2V5Qnl0ZXMgPSBkZWNvZGVCYXNlNjQocHVibGljTWVzc2FnZS5fbWV0YWRhdGEuc2VuZGVyWDI1NTE5UHVibGljS2V5QjY0KTtcbiAgY29uc3Qgc2VuZGVyWDI1NTE5UHVibGljS2V5ID0gdG9LZXkoc2VuZGVyWDI1NTE5UHVibGljS2V5Qnl0ZXMsIFwiWDI1NTE5UHVibGljS2V5XCIgLyogWDI1NTE5UHVibGljS2V5ICovKTtcbiAgY29uc3QgZW5jcnlwdGlvblJlc3VsdCA9IGRlc2VyaWFsaXplRW5jcnlwdGlvblJlc3VsdChlbmNyeXB0ZWRQcml2YXRlTWVzc2FnZSk7XG4gIGNvbnN0IHByaXZhdGVNZXNzYWdlID0gZGVjcnlwdE9iamVjdChcbiAgICBzZW5kZXJYMjU1MTlQdWJsaWNLZXksXG4gICAgcmVjZWl2ZXJFZDI1NTE5U2VjcmV0S2V5LFxuICAgIGVuY3J5cHRpb25SZXN1bHQuc2VjdXJlZCxcbiAgICBlbmNyeXB0aW9uUmVzdWx0Lm5vbmNlXG4gICk7XG4gIGVuc3VyZU1ldGFkYXRhRmllbGRzKHB1YmxpY01lc3NhZ2UuX21ldGFkYXRhKTtcbiAgZW5zdXJlUHJpdmF0ZVB1YmxpY0ZpZWxkc0Rpc2pvaW50KHByaXZhdGVNZXNzYWdlLCBwdWJsaWNNZXNzYWdlKTtcbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlU2lnbmF0dXJlLFxuICAgIHByaXZhdGVNZXNzYWdlLFxuICAgIHB1YmxpY01lc3NhZ2VcbiAgfTtcbn1cblxuLy8gc3JjL3NlcmlhbGl6YXRpb24udHNcbmltcG9ydCB7XG4gIGJhc2U2NFRvQnl0ZXMsXG4gIGJ5dGVzVG9CYXNlNjQsXG4gIGRlc2VyaWFsaXplUHVibGljS2V5LFxuICBkZXNlcmlhbGl6ZVNpZ25hdHVyZSxcbiAgc2VyaWFsaXplUHVibGljS2V5LFxuICBzZXJpYWxpemVTaWduYXR1cmVcbn0gZnJvbSBcIkBhcHRvcy1jb25uZWN0L3dhbGxldC1hcGlcIjtcbmltcG9ydCB7XG4gIERlc2VyaWFsaXplcixcbiAgRWQyNTUxOVB1YmxpY0tleSBhcyBBcHRvc0VkMjU1MTlQdWJsaWNLZXkyLFxuICBFZDI1NTE5U2lnbmF0dXJlIGFzIEVkMjU1MTlTaWduYXR1cmUzLFxuICBIZXggYXMgSGV4MixcbiAgU2VyaWFsaXplclxufSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5mdW5jdGlvbiBzZXJpYWxpemVQdWJsaWNLZXlCNjQocHVibGljS2V5KSB7XG4gIGNvbnN0IHNlcmlhbGl6ZXIgPSBuZXcgU2VyaWFsaXplcigpO1xuICBzZXJpYWxpemVQdWJsaWNLZXkoc2VyaWFsaXplciwgcHVibGljS2V5KTtcbiAgcmV0dXJuIGJ5dGVzVG9CYXNlNjQoc2VyaWFsaXplci50b1VpbnQ4QXJyYXkoKSk7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVB1YmxpY0tleUI2NChwdWJsaWNLZXlCNjQpIHtcbiAgY29uc3Qgc2VyaWFsaXplZFB1YmxpY0tleSA9IGJhc2U2NFRvQnl0ZXMocHVibGljS2V5QjY0KTtcbiAgY29uc3QgZGVzZXJpYWxpemVyID0gbmV3IERlc2VyaWFsaXplcihzZXJpYWxpemVkUHVibGljS2V5KTtcbiAgcmV0dXJuIGRlc2VyaWFsaXplUHVibGljS2V5KGRlc2VyaWFsaXplcik7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUVkMjU1MTlQdWJsaWNLZXlCNjQoZWQyNTUxOVB1YmxpY0tleUI2NCkge1xuICByZXR1cm4gbmV3IEFwdG9zRWQyNTUxOVB1YmxpY0tleTIoZGVjb2RlQmFzZTY0KGVkMjU1MTlQdWJsaWNLZXlCNjQpKTtcbn1cbmZ1bmN0aW9uIHNlcmlhbGl6ZVNpZ25hdHVyZUI2NChzaWduYXR1cmUpIHtcbiAgY29uc3Qgc2VyaWFsaXplciA9IG5ldyBTZXJpYWxpemVyKCk7XG4gIHNlcmlhbGl6ZVNpZ25hdHVyZShzZXJpYWxpemVyLCBzaWduYXR1cmUpO1xuICByZXR1cm4gYnl0ZXNUb0Jhc2U2NChzZXJpYWxpemVyLnRvVWludDhBcnJheSgpKTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplU2lnbmF0dXJlQjY0KHNpZ25hdHVyZUI2NCkge1xuICBjb25zdCBzZXJpYWxpemVkU2lnbmF0dXJlID0gYmFzZTY0VG9CeXRlcyhzaWduYXR1cmVCNjQpO1xuICBjb25zdCBkZXNlcmlhbGl6ZXIgPSBuZXcgRGVzZXJpYWxpemVyKHNlcmlhbGl6ZWRTaWduYXR1cmUpO1xuICByZXR1cm4gZGVzZXJpYWxpemVTaWduYXR1cmUoZGVzZXJpYWxpemVyKTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplRWQyNTUxOVNpZ25hdHVyZUI2NChlZDI1NTE5U2lnbmF0dXJlQjY0KSB7XG4gIGNvbnN0IHNpZ25hdHVyZUJ5dGVzID0gSGV4Mi5mcm9tSGV4SW5wdXQoZWQyNTUxOVNpZ25hdHVyZUI2NCkudG9VaW50OEFycmF5KCk7XG4gIHJldHVybiBuZXcgRWQyNTUxOVNpZ25hdHVyZTMoc2lnbmF0dXJlQnl0ZXMpO1xufVxuZnVuY3Rpb24gcHVibGljS2V5QjY0RnJvbUVkMjU1MTlQdWJsaWNLZXlCNjQoZWQyNTUxOVB1YmxpY0tleUI2NCkge1xuICBjb25zdCBwdWJsaWNLZXkgPSBkZXNlcmlhbGl6ZUVkMjU1MTlQdWJsaWNLZXlCNjQoZWQyNTUxOVB1YmxpY0tleUI2NCk7XG4gIHJldHVybiBzZXJpYWxpemVQdWJsaWNLZXlCNjQocHVibGljS2V5KTtcbn1cblxuLy8gc3JjL3dhbGxldEFjY291bnRzLnRzXG5pbXBvcnQgeyBQdWJsaWNLZXkgYXMgQXB0b3NQdWJsaWNLZXkgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5pbXBvcnQgeyBzaGEzXzI1NiBhcyBzaGEzXzI1NjMgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy9zaGEzXCI7XG52YXIgQWNjb3VudENvbm5lY3Rpb25BY3Rpb24gPSAvKiBAX19QVVJFX18gKi8gKChBY2NvdW50Q29ubmVjdGlvbkFjdGlvbjIpID0+IHtcbiAgQWNjb3VudENvbm5lY3Rpb25BY3Rpb24yW1wiQUREXCJdID0gXCJhZGRcIjtcbiAgQWNjb3VudENvbm5lY3Rpb25BY3Rpb24yW1wiUkVNT1ZFXCJdID0gXCJyZW1vdmVcIjtcbiAgcmV0dXJuIEFjY291bnRDb25uZWN0aW9uQWN0aW9uMjtcbn0pKEFjY291bnRDb25uZWN0aW9uQWN0aW9uIHx8IHt9KTtcbmZ1bmN0aW9uIGRlcml2ZUFjY291bnRUcmFuc3BvcnRFZDI1NTE5S2V5cGFpcihlZDI1NTE5U2VjcmV0S2V5T3JTaWduQ2FsbGJhY2ssIHB1YmxpY0tleSkge1xuICBjb25zdCBwdWJsaWNLZXlCeXRlcyA9IHB1YmxpY0tleSBpbnN0YW5jZW9mIEFwdG9zUHVibGljS2V5ID8gcHVibGljS2V5LnRvVWludDhBcnJheSgpIDogcHVibGljS2V5LmtleTtcbiAgaWYgKGVkMjU1MTlTZWNyZXRLZXlPclNpZ25DYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgY29uc3Qgc2VlZEdlbmVyYXRvckJ5dGVzID0gbWVzc2FnZUhhc2gocHVibGljS2V5Qnl0ZXMsIFwiVFJBTlNQT1JUX0tFWVBBSVJcIik7XG4gICAgY29uc3Qgc2lnbmF0dXJlID0gZWQyNTUxOVNlY3JldEtleU9yU2lnbkNhbGxiYWNrKHNlZWRHZW5lcmF0b3JCeXRlcyk7XG4gICAgaWYgKHNpZ25hdHVyZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgIHJldHVybiBzaWduYXR1cmUudGhlbigodmFsdWUpID0+IGVkMjU1MTlLZXlwYWlyRnJvbVNlY3JldCh2YWx1ZS50b1VpbnQ4QXJyYXkoKSkpO1xuICAgIH1cbiAgICByZXR1cm4gZWQyNTUxOUtleXBhaXJGcm9tU2VjcmV0KHNpZ25hdHVyZS50b1VpbnQ4QXJyYXkoKSk7XG4gIH1cbiAgY29uc3Qgc2VlZEJ5dGVzID0gc2lnbldpdGhFZDI1NTE5U2VjcmV0S2V5KHB1YmxpY0tleUJ5dGVzLCBlZDI1NTE5U2VjcmV0S2V5T3JTaWduQ2FsbGJhY2ssIFwiVFJBTlNQT1JUX0tFWVBBSVJcIik7XG4gIHJldHVybiBlZDI1NTE5S2V5cGFpckZyb21TZWNyZXQoc2VlZEJ5dGVzKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVNlcmlhbGl6ZWRBY2NvdW50SW5mbyguLi5bXG4gIHNpZ25DYWxsYmFjayxcbiAgcHVibGljS2V5LFxuICB0cmFuc3BvcnRFZDI1NTE5UHVibGljS2V5LFxuICBhY3Rpb24sXG4gIGludGVudElkLFxuICBhY2NvdW50QWRkcmVzc1xuXSkge1xuICBjb25zdCBhdXRoS2V5ID0gcHVibGljS2V5LmF1dGhLZXkoKTtcbiAgY29uc3QgZmluYWxBY2NvdW50QWRkcmVzcyA9IGFjY291bnRBZGRyZXNzIHx8IGF1dGhLZXkuZGVyaXZlZEFkZHJlc3MoKS50b1N0cmluZygpO1xuICBjb25zdCBwdWJsaWNLZXlCNjQgPSBzZXJpYWxpemVQdWJsaWNLZXlCNjQocHVibGljS2V5KTtcbiAgY29uc3QgYWNjb3VudEluZm8gPSB7XG4gICAgYWNjb3VudEFkZHJlc3M6IGZpbmFsQWNjb3VudEFkZHJlc3MsXG4gICAgYWN0aW9uLFxuICAgIGludGVudElkLFxuICAgIHB1YmxpY0tleUI2NCxcbiAgICB0aW1lc3RhbXBNaWxsaXM6IERhdGUubm93KCksXG4gICAgdHJhbnNwb3J0RWQyNTUxOVB1YmxpY0tleUI2NDogZW5jb2RlQmFzZTY0KHRyYW5zcG9ydEVkMjU1MTlQdWJsaWNLZXkua2V5KVxuICB9O1xuICBjb25zdCBhY2NvdW50SW5mb1NlcmlhbGl6ZWQgPSBKU09OLnN0cmluZ2lmeShhY2NvdW50SW5mbyk7XG4gIGNvbnN0IGFjY291bnRJbmZvQnl0ZXMgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYWNjb3VudEluZm9TZXJpYWxpemVkKTtcbiAgY29uc3QgYWNjb3VudEluZm9IYXNoID0gc2hhM18yNTYzKGFjY291bnRJbmZvQnl0ZXMpO1xuICBjb25zdCBzaWduYXR1cmUgPSBzaWduQ2FsbGJhY2sobWVzc2FnZUhhc2goYWNjb3VudEluZm9IYXNoLCBcIkFDQ09VTlRfSU5GT1wiKSk7XG4gIGlmIChzaWduYXR1cmUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgcmV0dXJuIHNpZ25hdHVyZS50aGVuKCh2YWx1ZSkgPT4gKHtcbiAgICAgIGFjY291bnRJbmZvU2VyaWFsaXplZCxcbiAgICAgIHNpZ25hdHVyZUI2NDogc2VyaWFsaXplU2lnbmF0dXJlQjY0KHZhbHVlKVxuICAgIH0pKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGFjY291bnRJbmZvU2VyaWFsaXplZCxcbiAgICBzaWduYXR1cmVCNjQ6IHNlcmlhbGl6ZVNpZ25hdHVyZUI2NChzaWduYXR1cmUpXG4gIH07XG59XG5hc3luYyBmdW5jdGlvbiBhcHRvc0FjY291bnRUb1NlcmlhbGl6ZWRJbmZvKGFjY291bnQsIGludGVudElkKSB7XG4gIGNvbnN0IHNpZ25DYWxsYmFjayA9IGFzeW5jIChkYXRhKSA9PiBhY2NvdW50LnNpZ24oZGF0YSk7XG4gIGNvbnN0IHRyYW5zcG9ydEtleSA9IGF3YWl0IGRlcml2ZUFjY291bnRUcmFuc3BvcnRFZDI1NTE5S2V5cGFpcihzaWduQ2FsbGJhY2ssIGFjY291bnQucHVibGljS2V5KTtcbiAgcmV0dXJuIGNyZWF0ZVNlcmlhbGl6ZWRBY2NvdW50SW5mbyhcbiAgICBzaWduQ2FsbGJhY2ssXG4gICAgYWNjb3VudC5wdWJsaWNLZXksXG4gICAgdHJhbnNwb3J0S2V5LnB1YmxpY0tleSxcbiAgICBcImFkZFwiIC8qIEFERCAqLyxcbiAgICBpbnRlbnRJZFxuICApO1xufVxuZXhwb3J0IHtcbiAgQWNjb3VudENvbm5lY3Rpb25BY3Rpb24sXG4gIERlY3J5cHRpb25FcnJvcixcbiAgRW5jcnlwdGlvbkVudmVsb3BlRXJyb3IsXG4gIEVudmVsb3BlTWVzc2FnZU1pc21hdGNoRXJyb3IsXG4gIEtleVR5cGVzLFxuICBSRVFVSVJFRF9GSUVMRFMsXG4gIFNJR05BVFVSRV9QUkVGSVgsXG4gIGFwdG9zQWNjb3VudFRvRWQyNTUxOUtleXBhaXIsXG4gIGFwdG9zQWNjb3VudFRvU2VyaWFsaXplZEluZm8sXG4gIGNvbmNhdFVpbnQ4YXJyYXksXG4gIGNvbnN0cnVjdE1ldGFkYXRhLFxuICBjb252ZXJ0RWQyNTUxOVB1YmxpY0tleVRvWDI1NTE5UHVibGljS2V5LFxuICBjb252ZXJ0RWQyNTUxOVNlY3JldEtleVRvWDI1NTE5U2VjcmV0S2V5LFxuICBjcmVhdGVFZDI1NTE5S2V5UGFpcixcbiAgY3JlYXRlU2VyaWFsaXplZEFjY291bnRJbmZvLFxuICBjcmVhdGVYMjU1MTlLZXlQYWlyLFxuICBkYW5nZXJvdXNseUVuY3J5cHRBbmRTaWduRW52ZWxvcGVVbnZhbGlkYXRlZCxcbiAgZGVjb2RlQmFzZTY0LFxuICBkZWNyeXB0RW52ZWxvcGUsXG4gIGRlY3J5cHRNZXNzYWdlLFxuICBkZWNyeXB0TWVzc2FnZURpcmVjdCxcbiAgZGVjcnlwdE9iamVjdCxcbiAgZGVjcnlwdE9iamVjdERpcmVjdCxcbiAgZGVjcnlwdFNlcmlhbGl6ZWRFbmNyeXB0aW9uUmVzdWx0LFxuICBkZWNyeXB0U2VyaWFsaXplZEVuY3J5cHRpb25SZXN1bHREaXJlY3QsXG4gIGRlcml2ZUFjY291bnRUcmFuc3BvcnRFZDI1NTE5S2V5cGFpcixcbiAgZGVzZXJpYWxpemVFZDI1NTE5UHVibGljS2V5QjY0LFxuICBkZXNlcmlhbGl6ZUVkMjU1MTlTaWduYXR1cmVCNjQsXG4gIGRlc2VyaWFsaXplRW5jcnlwdGlvblJlc3VsdCxcbiAgZGVzZXJpYWxpemVQdWJsaWNLZXlCNjQsXG4gIGRlc2VyaWFsaXplU2lnbmF0dXJlQjY0LFxuICBkZXNlcmlhbGl6ZVRyYW5zcG9ydEVudmVsb3BlLFxuICBlZDI1NTE5S2V5cGFpckZyb21TZWNyZXQsXG4gIGVuY29kZUJhc2U2NCxcbiAgZW5jcnlwdEFuZFNpZ25FbnZlbG9wZSxcbiAgZW5jcnlwdE1lc3NhZ2UsXG4gIGVuY3J5cHRNZXNzYWdlRGlyZWN0LFxuICBlbmNyeXB0T2JqZWN0LFxuICBlbmNyeXB0T2JqZWN0RGlyZWN0LFxuICBlbnN1cmVNZXRhZGF0YUZpZWxkcyxcbiAgZW5zdXJlUHJpdmF0ZVB1YmxpY0ZpZWxkc0Rpc2pvaW50LFxuICBoYXNoQW5kVmVyaWZ5U2lnbmF0dXJlLFxuICBrZXlwYWlyVG9FZDI1NTE5LFxuICBrZXlwYWlyVG9YMjU1MTksXG4gIG1ha2VFZDI1NTE5U2VjcmV0S2V5U2lnbkNhbGxiYWNrTm9Eb21haW5TZXBhcmF0aW9uLFxuICBtZXNzYWdlSGFzaCxcbiAgcHVibGljS2V5QjY0RnJvbUVkMjU1MTlQdWJsaWNLZXlCNjQsXG4gIHNlcmlhbGl6ZUVuY3J5cHRpb25SZXN1bHQsXG4gIHNlcmlhbGl6ZVB1YmxpY0tleUI2NCxcbiAgc2VyaWFsaXplU2lnbmF0dXJlQjY0LFxuICBzaWduV2l0aEVkMjU1MTlTZWNyZXRLZXksXG4gIHRvS2V5LFxuICB2ZXJpZnlFbnZlbG9wZVNpZ25hdHVyZSxcbiAgdmVyaWZ5U2lnbmF0dXJlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@identity-connect/crypto/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@identity-connect/dapp-sdk/dist/index.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@identity-connect/dapp-sdk/dist/index.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACDappClient: () => (/* binding */ ACDappClient),\n/* harmony export */   ACKeylessClient: () => (/* binding */ ACKeylessClient),\n/* harmony export */   DAPP_PAIRINGS_WINDOW_STORAGE_KEY: () => (/* binding */ DAPP_PAIRINGS_WINDOW_STORAGE_KEY),\n/* harmony export */   ICDappClient: () => (/* binding */ ICDappClient),\n/* harmony export */   windowStateAccessors: () => (/* binding */ windowStateAccessors)\n/* harmony export */ });\n/* harmony import */ var _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-connect/wallet-api */ \"(ssr)/./node_modules/@aptos-connect/wallet-api/dist/index.mjs\");\n/* harmony import */ var _aptos_connect_web_transport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aptos-connect/web-transport */ \"(ssr)/./node_modules/@aptos-connect/web-transport/dist/index.mjs\");\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/./node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var _identity_connect_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @identity-connect/api */ \"(ssr)/./node_modules/@identity-connect/api/dist/index.mjs\");\n/* harmony import */ var _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @identity-connect/crypto */ \"(ssr)/./node_modules/@identity-connect/crypto/dist/index.mjs\");\n/* harmony import */ var _identity_connect_wallet_api__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @identity-connect/wallet-api */ \"(ssr)/./node_modules/@identity-connect/wallet-api/dist/index.mjs\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! axios */ \"(ssr)/./node_modules/axios/lib/axios.js\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! axios */ \"(ssr)/./node_modules/axios/index.js\");\n// src/ACDappClient.ts\n\n\n\n\n\n\n// src/constants.ts\nvar DEFAULT_FRONTEND_URL = \"https://aptosconnect.app\";\n\n// src/conversion.ts\n\nfunction convertToSerializableArgument(argument) {\n  if (argument === void 0 || argument === null) {\n    return argument;\n  }\n  if (Array.isArray(argument)) {\n    return argument.map((subArgument) => convertToSerializableArgument(subArgument));\n  }\n  if (typeof argument === \"string\" || typeof argument === \"number\" || typeof argument === \"boolean\" || argument instanceof Uint8Array) {\n    return argument;\n  }\n  if (typeof argument === \"bigint\") {\n    return argument.toString();\n  }\n  if (argument instanceof ArrayBuffer) {\n    return new Uint8Array(argument);\n  }\n  if (\"values\" in argument) {\n    return argument.values.map((subArgument) => convertToSerializableArgument(subArgument));\n  }\n  if (\"data\" in argument) {\n    return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AccountAddress.from(argument.data).toString();\n  }\n  if (argument.value === void 0) {\n    return void 0;\n  }\n  if (typeof argument.value === \"string\" || typeof argument.value === \"number\" || typeof argument.value === \"boolean\" || argument.value instanceof Uint8Array) {\n    return argument.value;\n  }\n  if (typeof argument.value === \"bigint\") {\n    return argument.value.toString();\n  }\n  throw new Error(\"Unexpected argument\");\n}\nfunction normalizePayloadForIC(payload, aptosConfig) {\n  if (\"bcsToBytes\" in payload) {\n    return payload;\n  }\n  if (\"bytecode\" in payload) {\n    return (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.generateTransactionPayload)(payload);\n  }\n  if (aptosConfig) {\n    return payload.abi !== void 0 ? (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.generateTransactionPayloadWithABI)({ ...payload, abi: payload.abi }) : (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.generateTransactionPayload)({ aptosConfig, ...payload });\n  }\n  const entryFunctionPayload = {\n    arguments: payload.functionArguments.map(convertToSerializableArgument),\n    function: payload.function,\n    type: \"entry_function_payload\",\n    type_arguments: (payload.typeArguments ?? []).map((ta) => ta.toString())\n  };\n  return \"multisigAddress\" in payload ? {\n    multisig_address: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AccountAddress.from(payload.multisigAddress).toString(),\n    transaction_payload: entryFunctionPayload,\n    type: \"multisig_payload\"\n  } : entryFunctionPayload;\n}\n\n// src/PairingClient.ts\n\n\n\n\n\n\n// src/errors.ts\nvar SignatureRequestError = class _SignatureRequestError extends Error {\n  constructor(status) {\n    super(status);\n    this.name = \"SignatureRequestError\";\n    Object.setPrototypeOf(this, _SignatureRequestError.prototype);\n  }\n};\nvar UnexpectedSignatureResponseError = class _UnexpectedSignatureResponseError extends Error {\n  constructor(missingFields) {\n    const message = `Missing the following fields: ${missingFields.join(\", \")}`;\n    super(message);\n    this.name = \"UnexpectedSignatureResponseError\";\n    Object.setPrototypeOf(this, _UnexpectedSignatureResponseError.prototype);\n  }\n};\nvar PairingExpiredError = class _PairingExpiredError extends Error {\n  constructor() {\n    super();\n    this.name = \"PairingExpiredError\";\n    Object.setPrototypeOf(this, _PairingExpiredError.prototype);\n  }\n};\nvar UnregisteredDappError = class _UnregisteredDappError extends Error {\n  constructor() {\n    super(\"Dapp ID is invalid or not associated with a registered Dapp.\");\n    this.name = \"UnregisteredDappError\";\n    Object.setPrototypeOf(this, _UnregisteredDappError.prototype);\n  }\n};\n\n// src/state.ts\nvar DAPP_PAIRINGS_WINDOW_STORAGE_KEY = \"icDappPairings\";\nvar windowStateAccessors = {\n  async get(address) {\n    const pairings = await this.getAll();\n    return pairings[address];\n  },\n  async getAll() {\n    const serialized = window.localStorage.getItem(DAPP_PAIRINGS_WINDOW_STORAGE_KEY);\n    return serialized ? JSON.parse(serialized) : {};\n  },\n  async update(address, pairing) {\n    const pairings = await this.getAll();\n    if (pairing === void 0) {\n      delete pairings[address];\n    } else {\n      pairings[address] = pairing;\n    }\n    const newSerialized = JSON.stringify(pairings);\n    window.localStorage.setItem(DAPP_PAIRINGS_WINDOW_STORAGE_KEY, newSerialized);\n  }\n};\n\n// src/utils.ts\nvar SIGN_MESSAGE_RESPONSE_REQUIRED_FIELDS = [\n  \"address\",\n  \"application\",\n  \"chainId\",\n  \"fullMessage\",\n  \"message\",\n  \"nonce\",\n  \"prefix\",\n  \"signature\"\n];\nfunction validateSignMessageResponse(response) {\n  const providedFields = new Set(Object.keys(response));\n  const missingFields = SIGN_MESSAGE_RESPONSE_REQUIRED_FIELDS.filter((field) => !providedFields.has(field));\n  if (missingFields.length > 0) {\n    throw new UnexpectedSignatureResponseError(missingFields);\n  }\n}\nvar SIGN_AND_SUBMIT_TRANSACTION_RESPONSE_REQUIRED_FIELDS = [\"hash\"];\nfunction validateSignAndSubmitTransactionResponse(response) {\n  const providedFields = new Set(Object.keys(response));\n  const missingFields = SIGN_AND_SUBMIT_TRANSACTION_RESPONSE_REQUIRED_FIELDS.filter(\n    (field) => !providedFields.has(field)\n  );\n  if (missingFields.length > 0) {\n    throw new UnexpectedSignatureResponseError(missingFields);\n  }\n}\n\n// src/PairingClient.ts\nvar API_VERSION = \"0.2.0\";\nvar SIGNING_REQUEST_POLLING_INTERVAL = 2500;\nvar SEQUENCE_NUMBER_MISMATCH_PATTERN = /^Sequence number mismatch, expected (?:\\S+ to be )?(\\d+)/;\nasync function waitFor(milliseconds) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, milliseconds);\n  });\n}\nasync function withRetries(requestFn, onError, retries = 1) {\n  for (let i = 0; i < retries; i += 1) {\n    try {\n      return await requestFn();\n    } catch (err) {\n      onError(err);\n    }\n  }\n  return requestFn();\n}\nvar ACPairingClient = class {\n  constructor({\n    accessors = windowStateAccessors,\n    axiosConfig,\n    defaultNetworkName = _identity_connect_api__WEBPACK_IMPORTED_MODULE_3__.NetworkName.MAINNET\n  } = {}) {\n    // endregion\n    this.onDisconnectListeners = /* @__PURE__ */ new Set();\n    this.accessors = accessors;\n    this.defaultNetworkName = defaultNetworkName;\n    this.axiosInstance = axios__WEBPACK_IMPORTED_MODULE_6__[\"default\"].create({\n      baseURL: DEFAULT_FRONTEND_URL,\n      ...axiosConfig\n    });\n    const isClientSideRendering = typeof window !== \"undefined\";\n    this.initPromise = isClientSideRendering ? this.syncFirstPairing() : void 0;\n  }\n  async getPairing(id) {\n    const response = await this.axiosInstance.get(`v1/pairing/${id}/`);\n    return response.data.data.pairing;\n  }\n  async syncFirstPairing() {\n    const pairings = await this.accessors.getAll();\n    const firstPairing = Object.values(pairings)[0];\n    if (firstPairing === void 0) {\n      return;\n    }\n    try {\n      const { dappSpecificWallet, maxDappSequenceNumber } = await this.getPairing(firstPairing.pairingId);\n      await this.accessors.update(firstPairing.accountAddress, {\n        ...firstPairing,\n        currSequenceNumber: maxDappSequenceNumber,\n        dappWalletId: dappSpecificWallet?.id\n      });\n    } catch (err) {\n      await this.accessors.update(firstPairing.accountAddress, void 0);\n    }\n  }\n  async createSigningRequest(pairing, type, networkName, requestBody) {\n    const dappEd25519SecretKey = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.dappEd25519SecretKeyB64);\n    const dappEd25519PublicKey = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.dappEd25519PublicKeyB64);\n    const accountTransportEd25519PublicKey = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.accountTransportEd25519PublicKeyB64);\n    let sequenceNumber = pairing.currSequenceNumber + 1;\n    return withRetries(\n      async () => {\n        const requestEnvelope = await (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.encryptAndSignEnvelope)(\n          (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)(dappEd25519SecretKey, _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519SecretKey),\n          (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)(dappEd25519PublicKey, _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519PublicKey),\n          (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)(accountTransportEd25519PublicKey, _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519PublicKey),\n          sequenceNumber,\n          { apiVersion: API_VERSION, networkName, requestType: type },\n          requestBody\n        );\n        const response = await this.axiosInstance.post(\n          `v1/pairing/${pairing.pairingId}/signing-request/`,\n          requestEnvelope\n        );\n        await this.accessors.update(pairing.accountAddress, {\n          ...pairing,\n          currSequenceNumber: sequenceNumber\n        });\n        return response.data.data.signingRequest;\n      },\n      (err) => {\n        if ((0,axios__WEBPACK_IMPORTED_MODULE_7__.isAxiosError)(err)) {\n          const errorMessage = err.response?.data?.message;\n          const expectedSequenceNumber = errorMessage?.match(SEQUENCE_NUMBER_MISMATCH_PATTERN)?.[1];\n          if (expectedSequenceNumber !== void 0) {\n            sequenceNumber = Number(expectedSequenceNumber);\n            return;\n          }\n        }\n        throw err;\n      }\n    );\n  }\n  async getSigningRequest(id) {\n    const response = await this.axiosInstance.get(\n      `v1/signing-request/${id}/`,\n      {\n        validateStatus: (status) => status === 200 || status === 404\n      }\n    );\n    return response.data?.data?.signingRequest;\n  }\n  async deletePairing(pairingId, secretKey, publicKey) {\n    const requestEnvelope = await (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.encryptAndSignEnvelope)(\n      secretKey,\n      publicKey,\n      publicKey,\n      0,\n      // ignored\n      {},\n      {}\n    );\n    await this.axiosInstance.post(\n      `v1/pairing/${pairingId}/delete/`,\n      requestEnvelope,\n      { validateStatus: (status) => status === 204 || status === 404 }\n    );\n  }\n  async cancelSigningRequest(pairing, id) {\n    const sequenceNumber = pairing.currSequenceNumber;\n    const dappEd25519SecretKey = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.dappEd25519SecretKeyB64);\n    const dappEd25519PublicKey = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.dappEd25519PublicKeyB64);\n    const accountTransportEd25519PublicKey = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.accountTransportEd25519PublicKeyB64);\n    const requestEnvelope = await (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.encryptAndSignEnvelope)(\n      (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)(dappEd25519SecretKey, _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519SecretKey),\n      (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)(dappEd25519PublicKey, _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519PublicKey),\n      (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)(accountTransportEd25519PublicKey, _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519PublicKey),\n      sequenceNumber + 1,\n      {},\n      {}\n    );\n    const response = await this.axiosInstance.patch(\n      `v1/signing-request/${id}/cancel/`,\n      requestEnvelope\n    );\n    await this.accessors.update(pairing.accountAddress, {\n      ...pairing,\n      currSequenceNumber: sequenceNumber + 1\n    });\n    return response.data.data.signingRequest;\n  }\n  async signRequest(address, type, requestBody, { cancelToken, networkName } = {}) {\n    await this.initPromise;\n    const pairing = await this.accessors.get(address);\n    if (pairing === void 0) {\n      throw new Error(\"The requested account is not paired\");\n    }\n    let signingRequest;\n    try {\n      signingRequest = await this.createSigningRequest(\n        pairing,\n        type,\n        networkName || this.defaultNetworkName,\n        requestBody\n      );\n      while (signingRequest.status === \"PENDING\") {\n        await waitFor(SIGNING_REQUEST_POLLING_INTERVAL);\n        if (cancelToken?.cancelled) {\n          signingRequest.status = _identity_connect_api__WEBPACK_IMPORTED_MODULE_3__.SigningRequestStatus.CANCELLED;\n          break;\n        }\n        signingRequest = await this.getSigningRequest(signingRequest.id) ?? signingRequest;\n      }\n    } catch (err) {\n      if ((0,axios__WEBPACK_IMPORTED_MODULE_7__.isAxiosError)(err) && err.code === \"404\") {\n        await this.accessors.update(address, void 0);\n        for (const listener of this.onDisconnectListeners) {\n          listener(address);\n        }\n        throw new PairingExpiredError();\n      }\n      throw err;\n    }\n    if (signingRequest.status !== \"APPROVED\") {\n      throw new SignatureRequestError(signingRequest.status);\n    }\n    const decrypted = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decryptEnvelope)(\n      (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)((0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.accountTransportEd25519PublicKeyB64), _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519PublicKey),\n      (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)((0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.dappEd25519SecretKeyB64), _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519SecretKey),\n      signingRequest.responseEnvelope\n    );\n    return decrypted.privateMessage;\n  }\n  // region Public API\n  /**\n   * Requests a connection to an account (internally known as pairing).\n   * @returns either the address of the connected account, or undefined if the\n   * connection was cancelled.\n   */\n  async addPairing({ publicKey, secretKey }, finalizedPairing) {\n    await this.accessors.update(finalizedPairing.account.accountAddress, {\n      accountAddress: finalizedPairing.account.accountAddress,\n      accountAlias: finalizedPairing.account.userSubmittedAlias ?? void 0,\n      accountPublicKeyB64: finalizedPairing.account.publicKeyB64,\n      accountTransportEd25519PublicKeyB64: finalizedPairing.account.transportEd25519PublicKeyB64,\n      currSequenceNumber: finalizedPairing.maxDappSequenceNumber,\n      dappEd25519PublicKeyB64: (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.encodeBase64)(publicKey.key),\n      dappEd25519SecretKeyB64: (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.encodeBase64)(secretKey.key),\n      dappWalletId: finalizedPairing.dappSpecificWalletId,\n      pairingId: finalizedPairing.id\n    });\n  }\n  async disconnect(address) {\n    const pairing = await this.accessors.get(address);\n    if (pairing === void 0) {\n      throw new Error(\"The specified account is not paired\");\n    }\n    const dappEd25519SecretKey = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.dappEd25519SecretKeyB64);\n    const dappEd25519PublicKey = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.decodeBase64)(pairing.dappEd25519PublicKeyB64);\n    await this.deletePairing(\n      pairing.pairingId,\n      (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)(dappEd25519SecretKey, _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519SecretKey),\n      (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.toKey)(dappEd25519PublicKey, _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.KeyTypes.Ed25519PublicKey)\n    );\n    await this.accessors.update(address, void 0);\n    for (const listener of this.onDisconnectListeners) {\n      listener(address);\n    }\n  }\n  async signMessage(address, args, options) {\n    const response = await this.signRequest(\n      address,\n      _identity_connect_api__WEBPACK_IMPORTED_MODULE_3__.SigningRequestTypes.SIGN_MESSAGE,\n      args,\n      options\n    );\n    validateSignMessageResponse(response);\n    return response;\n  }\n  async signTransaction(address, args, options) {\n    const serializedRequestArgs = (0,_identity_connect_wallet_api__WEBPACK_IMPORTED_MODULE_5__.serializeSignTransactionRequestArgs)(args);\n    const serializedResponseArgs = await this.signRequest(address, _identity_connect_api__WEBPACK_IMPORTED_MODULE_3__.SigningRequestTypes.SIGN_TRANSACTION, serializedRequestArgs, options);\n    return (0,_identity_connect_wallet_api__WEBPACK_IMPORTED_MODULE_5__.deserializeSignTransactionResponseArgs)(serializedResponseArgs);\n  }\n  // endregion\n  async signAndSubmitTransaction(address, args, options) {\n    const serializedRequestArgs = (0,_identity_connect_wallet_api__WEBPACK_IMPORTED_MODULE_5__.serializeSignAndSubmitTransactionRequestArgs)(args);\n    try {\n      const responseArgs = await this.signRequest(address, _identity_connect_api__WEBPACK_IMPORTED_MODULE_3__.SigningRequestTypes.SIGN_AND_SUBMIT_TRANSACTION, serializedRequestArgs, options);\n      validateSignAndSubmitTransactionResponse(responseArgs);\n      return responseArgs;\n    } catch (e) {\n      if (e instanceof axios__WEBPACK_IMPORTED_MODULE_7__.AxiosError && e.response?.data?.message) {\n        throw new Error(e.response?.data?.message);\n      }\n      throw e;\n    }\n  }\n  async getConnectedAccounts() {\n    await this.initPromise;\n    const pairings = await this.accessors.getAll();\n    return Object.values(pairings).map(\n      ({ accountAddress, accountEd25519PublicKeyB64, accountPublicKeyB64 }) => ({\n        address: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AccountAddress.from(accountAddress),\n        publicKey: accountPublicKeyB64 !== void 0 ? (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.deserializePublicKeyB64)(accountPublicKeyB64) : (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.deserializeEd25519PublicKeyB64)(accountEd25519PublicKeyB64)\n      })\n    );\n  }\n  onDisconnect(listener) {\n    this.onDisconnectListeners.add(listener);\n    return () => this.onDisconnectListeners.delete(listener);\n  }\n};\n\n// src/ACDappClient.ts\nvar ACDappClient = class {\n  constructor({\n    backendBaseURL,\n    dappId,\n    dappImageURI,\n    dappName,\n    defaultNetworkName = _identity_connect_api__WEBPACK_IMPORTED_MODULE_3__.NetworkName.MAINNET,\n    frontendBaseURL = DEFAULT_FRONTEND_URL\n  } = {}) {\n    this.defaultNetworkName = defaultNetworkName;\n    this.dappInfo = {\n      domain: window.location.origin,\n      imageURI: dappImageURI,\n      name: dappName ?? document.title\n    };\n    this.transport = new _aptos_connect_web_transport__WEBPACK_IMPORTED_MODULE_1__.WebWalletTransport(frontendBaseURL);\n    this.dappId = dappId;\n    this.pairingClient = new ACPairingClient({\n      axiosConfig: {\n        baseURL: backendBaseURL ?? frontendBaseURL\n      },\n      defaultNetworkName\n    });\n  }\n  // region Public API\n  async getKeylessAccounts() {\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.GetConnectedAccountsRequest.serialize(this.dappInfo);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.GetConnectedAccountsResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  async getIcAccounts() {\n    return this.pairingClient.getConnectedAccounts() ?? [];\n  }\n  async isIcAccount(address) {\n    const icAccounts = await this.getIcAccounts();\n    return icAccounts.find((account) => account.address.equals(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AccountAddress.from(address))) !== void 0;\n  }\n  async getConnectedAccounts() {\n    const keylessAccounts = await this.getKeylessAccounts();\n    const icAccounts = await this.getIcAccounts();\n    return [...keylessAccounts, ...icAccounts];\n  }\n  async disconnect(address) {\n    if (await this.isIcAccount(address)) {\n      const stringAddress = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AccountAddress.from(address).toString();\n      await this.pairingClient.disconnect(stringAddress);\n    } else {\n      const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.DisconnectRequest.serialize(this.dappInfo);\n      await this.transport.sendRequest(serializedRequest);\n    }\n  }\n  async connect({ preferredWalletName } = {}) {\n    const dappKeypair = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.createEd25519KeyPair)();\n    const injectedPreferredWalletName = typeof window !== \"undefined\" ? window.AC_PREFERRED_WALLET_NAME : void 0;\n    const requestArgs = {\n      dappEd25519PublicKeyB64: (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.encodeBase64)(dappKeypair.publicKey.key),\n      dappId: this.dappId,\n      preferredWalletName: preferredWalletName ?? injectedPreferredWalletName\n    };\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectRequest.serialize(this.dappInfo, requestArgs);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectResponse.deserialize(serializedResponse);\n    if (response.args.status === \"approved\") {\n      const { account, pairing } = response.args.args;\n      if (pairing) {\n        await this.pairingClient.addPairing(dappKeypair, pairing);\n      }\n      return (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.makeUserApproval)({ account });\n    }\n    return response.args;\n  }\n  async signMessage(args) {\n    const { signerAddress } = args;\n    if (await this.isIcAccount(signerAddress)) {\n      const { chainId } = args;\n      const network = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.chainIdToNetwork)(chainId);\n      let message;\n      let nonce;\n      try {\n        message = new TextDecoder().decode(args.message);\n        nonce = new TextDecoder().decode(args.nonce);\n      } catch (err) {\n        throw new Error(\"Only UTF-8 encoded text is supported when using IC\");\n      }\n      const { fullMessage, signature: hexSignature } = await this.pairingClient.signMessage(\n        signerAddress.toString(),\n        {\n          address: true,\n          application: true,\n          chainId: true,\n          message,\n          nonce\n        },\n        { networkName: network }\n      );\n      const signatureBytes = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Hex.fromHexInput(hexSignature).toUint8Array();\n      const signature = signatureBytes.length === _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Ed25519Signature.LENGTH ? new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Ed25519Signature(signatureBytes) : _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AnySignature.deserialize(new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.Deserializer(signatureBytes));\n      return (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.makeUserApproval)({\n        fullMessage,\n        signature\n      });\n    }\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignMessageRequest.serialize(this.dappInfo, args);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignMessageResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  async signTransaction(args) {\n    const normalizedArgs = \"transaction\" in args ? _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignTransactionRequest.normalizeArgs(args) : args;\n    const { signerAddress } = args;\n    if (await this.isIcAccount(signerAddress)) {\n      const {\n        expirationSecondsFromNow,\n        expirationTimestamp,\n        feePayer,\n        gasUnitPrice,\n        maxGasAmount,\n        network,\n        payload,\n        secondarySigners,\n        sender,\n        sequenceNumber\n      } = normalizedArgs;\n      if (feePayer !== void 0) {\n        throw new Error(\"Sponsored transaction not currently supported\");\n      }\n      if (secondarySigners && secondarySigners.length > 0) {\n        throw new Error(\"Multi-agent transactions not currently supported\");\n      }\n      if (!(\"bcsToBytes\" in payload)) {\n        throw new Error(\"Payload input format is only supported with Keyless accounts.\");\n      }\n      const responseArgs = await this.pairingClient.signTransaction(\n        signerAddress.toString(),\n        {\n          options: {\n            expirationSecondsFromNow,\n            expirationTimestamp,\n            gasUnitPrice,\n            maxGasAmount,\n            sender: sender?.address.toString(),\n            sequenceNumber: sequenceNumber !== void 0 ? Number(sequenceNumber) : void 0\n          },\n          payload\n        },\n        {\n          networkName: network\n        }\n      );\n      return (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.makeUserApproval)({\n        authenticator: responseArgs.accountAuthenticator,\n        rawTransaction: responseArgs.rawTxn\n      });\n    }\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignTransactionRequest.serialize(this.dappInfo, normalizedArgs);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignTransactionResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  async signAndSubmitTransaction(args) {\n    const { signerAddress } = args;\n    if (await this.isIcAccount(signerAddress)) {\n      const { expirationTimestamp, feePayer, gasUnitPrice, maxGasAmount, network } = args;\n      const aptosConfig = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.AptosConfig({ network });\n      let convertedArgs;\n      if (feePayer !== void 0) {\n        const payload = await normalizePayloadForIC(args.payload, aptosConfig);\n        const rawTxn = await (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.generateRawTransaction)({\n          aptosConfig,\n          feePayerAddress: feePayer.address,\n          options: {\n            gasUnitPrice,\n            maxGasAmount\n          },\n          payload,\n          sender: signerAddress\n        });\n        convertedArgs = {\n          feePayerAuthenticator: feePayer.authenticator,\n          rawTxn: new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_2__.FeePayerRawTransaction(rawTxn, [], feePayer.address)\n        };\n      } else {\n        const payload = normalizePayloadForIC(args.payload);\n        convertedArgs = {\n          options: {\n            expirationTimestamp,\n            gasUnitPrice,\n            maxGasAmount\n          },\n          payload\n        };\n      }\n      const { hash } = await this.pairingClient.signAndSubmitTransaction(signerAddress.toString(), convertedArgs, {\n        networkName: network\n      });\n      return (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.makeUserApproval)({ txnHash: hash });\n    }\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignAndSubmitTransactionRequest.serialize(this.dappInfo, args);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignAndSubmitTransactionResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  // endregion\n};\n\n// src/ICDappClient.ts\n\n\n\n// src/prompt.ts\nvar DEFAULT_PROMPT_SIZE = { height: 695, width: 465 };\nvar PROMPT_POLLER_INTERVAL = 500;\nfunction openPrompt(url, size = DEFAULT_PROMPT_SIZE) {\n  const { height, width } = size;\n  const options = {\n    height,\n    left: window.screenLeft + Math.round((window.outerWidth - width) / 2),\n    popup: true,\n    top: window.screenTop + Math.round((window.outerHeight - height) / 2),\n    width\n  };\n  const strOptions = Object.entries(options).map(([key, value]) => `${key}=${JSON.stringify(value)}`).reduce((acc, entry) => `${acc}, ${entry}`);\n  const href = url instanceof URL ? url.href : url;\n  const promptWindow = window.open(href, void 0, strOptions);\n  if (promptWindow === null) {\n    throw new Error(\"Couldn't open prompt\");\n  }\n  return promptWindow;\n}\nasync function waitForPromptResponse(promptWindow) {\n  return new Promise((resolve) => {\n    const listeners = {\n      onMessage: (message) => {\n        if (message.source !== promptWindow) {\n          return;\n        }\n        window.removeEventListener(\"message\", listeners.onMessage);\n        clearTimeout(listeners.promptPollerId);\n        resolve({\n          args: message.data,\n          status: \"approved\"\n        });\n      },\n      promptPollerId: setInterval(() => {\n        if (promptWindow.closed) {\n          window.removeEventListener(\"message\", listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          resolve({\n            status: \"dismissed\"\n          });\n        }\n      }, PROMPT_POLLER_INTERVAL)\n    };\n    window.addEventListener(\"message\", listeners.onMessage);\n  });\n}\n\n// src/ICDappClient.ts\nvar ICDappClient = class extends ACPairingClient {\n  constructor(dappId, { frontendBaseURL = DEFAULT_FRONTEND_URL, ...pairingClientConfig } = {}) {\n    super(pairingClientConfig);\n    this.dappId = dappId;\n    this.frontendBaseURL = frontendBaseURL;\n  }\n  async createPairingRequest(dappEd25519PublicKeyB64) {\n    try {\n      const response = await this.axiosInstance.post(\"v1/pairing/\", {\n        dappEd25519PublicKeyB64,\n        dappId: this.dappId\n      });\n      return response.data.data.pairing;\n    } catch (err) {\n      if ((0,axios__WEBPACK_IMPORTED_MODULE_7__.isAxiosError)(err) && err.response?.data?.message === \"Dapp not found\") {\n        throw new UnregisteredDappError();\n      }\n      throw err;\n    }\n  }\n  // region Public API\n  /**\n   * Requests a connection to an account (internally known as pairing).\n   * @returns either the address of the connected account, or undefined if the\n   * connection was cancelled.\n   */\n  async connect() {\n    const { publicKey, secretKey } = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.createEd25519KeyPair)();\n    const dappEd25519PublicKeyB64 = (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_4__.encodeBase64)(publicKey.key);\n    const url = new URL(`${this.frontendBaseURL}/pairing`);\n    const promptWindow = await openPrompt(url.href);\n    let pairingId;\n    try {\n      const pendingPairing = await this.createPairingRequest(dappEd25519PublicKeyB64);\n      pairingId = pendingPairing.id;\n    } catch (err) {\n      promptWindow.close();\n      throw err;\n    }\n    url.searchParams.set(\"pairingId\", pairingId);\n    promptWindow.location.href = url.href;\n    const promptResponse = await waitForPromptResponse(promptWindow);\n    if (promptResponse.status === \"dismissed\") {\n      void this.deletePairing(pairingId, secretKey, publicKey);\n      return void 0;\n    }\n    const finalizedPairing = promptResponse.args;\n    await this.addPairing({ publicKey, secretKey }, finalizedPairing);\n    return finalizedPairing.account.accountAddress;\n  }\n  async offboard(address) {\n    const pairing = await this.accessors.get(address);\n    if (pairing === void 0) {\n      throw new Error(\"This account is not paired\");\n    }\n    const walletId = pairing.dappWalletId;\n    if (walletId === void 0) {\n      throw new Error(\"This account cannot be offboarded\");\n    }\n    const url = new URL(`${this.frontendBaseURL}/offboarding?walletId=${walletId}`);\n    const promptWindow = openPrompt(url);\n    const response = await waitForPromptResponse(promptWindow);\n    if (response.status === \"approved\" && response.args.offboarded) {\n      this.disconnect(address);\n      return true;\n    }\n    return false;\n  }\n  // endregion\n};\n\n// src/KeylessClient.ts\n\n\n\nvar ACKeylessClient = class {\n  constructor({\n    dappImageURI,\n    dappName,\n    defaultNetworkName = _identity_connect_api__WEBPACK_IMPORTED_MODULE_3__.NetworkName.MAINNET,\n    frontendBaseURL = DEFAULT_FRONTEND_URL\n  } = {}) {\n    this.defaultNetworkName = defaultNetworkName;\n    this.dappInfo = {\n      domain: window.location.origin,\n      imageURI: dappImageURI,\n      name: dappName ?? document.title\n    };\n    this.transport = new _aptos_connect_web_transport__WEBPACK_IMPORTED_MODULE_1__.WebWalletTransport(frontendBaseURL);\n  }\n  // region Public API\n  async isConnected() {\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.IsConnectedRequest.serialize(this.dappInfo);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.IsConnectedResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  async getConnectedAccounts() {\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.GetConnectedAccountsRequest.serialize(this.dappInfo);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.GetConnectedAccountsResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  async disconnect() {\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.DisconnectRequest.serialize(this.dappInfo);\n    await this.transport.sendRequest(serializedRequest);\n  }\n  async connect() {\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectRequest.serialize(this.dappInfo);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  async signMessage(args) {\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignMessageRequest.serialize(this.dappInfo, args);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignMessageResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  async signTransaction(args) {\n    const normalizedArgs = \"transaction\" in args ? _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignTransactionRequest.normalizeArgs(args) : args;\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignTransactionRequest.serialize(this.dappInfo, normalizedArgs);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignTransactionResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  async signAndSubmitTransaction(args) {\n    const serializedRequest = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignAndSubmitTransactionRequest.serialize(this.dappInfo, args);\n    const serializedResponse = await this.transport.sendRequest(serializedRequest);\n    const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignAndSubmitTransactionResponse.deserialize(serializedResponse);\n    return response.args;\n  }\n  // endregion\n};\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGlkZW50aXR5LWNvbm5lY3QvZGFwcC1zZGsvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBZW1DO0FBQytCO0FBVXRDO0FBQ3dDO0FBQzJCOztBQUUvRjtBQUNBOztBQUVBO0FBSzRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDhEQUFjO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDhFQUEwQjtBQUNyQztBQUNBO0FBQ0Esb0NBQW9DLHFGQUFpQyxHQUFHLDhCQUE4QixJQUFJLDhFQUEwQixHQUFHLHlCQUF5QjtBQUNoSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFjO0FBQ3BDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDdUU7QUFLeEM7QUFVRztBQUtJO0FBQ2tCOztBQUV4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCx5QkFBeUI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QXdCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixzRkFBZ0M7QUFDOUQ7QUFDQSxxQkFBcUIsdUZBQWlDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBT0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FwdG9nb3RjaGktcmFuZG9tLW1pbnQtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AaWRlbnRpdHktY29ubmVjdC9kYXBwLXNkay9kaXN0L2luZGV4Lm1qcz8yNGI0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9BQ0RhcHBDbGllbnQudHNcbmltcG9ydCB7XG4gIGNoYWluSWRUb05ldHdvcmssXG4gIENvbm5lY3RSZXF1ZXN0LFxuICBDb25uZWN0UmVzcG9uc2UsXG4gIERpc2Nvbm5lY3RSZXF1ZXN0LFxuICBHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QsXG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2UsXG4gIG1ha2VVc2VyQXBwcm92YWwsXG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QsXG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlc3BvbnNlLFxuICBTaWduTWVzc2FnZVJlcXVlc3QsXG4gIFNpZ25NZXNzYWdlUmVzcG9uc2UsXG4gIFNpZ25UcmFuc2FjdGlvblJlcXVlc3QsXG4gIFNpZ25UcmFuc2FjdGlvblJlc3BvbnNlXG59IGZyb20gXCJAYXB0b3MtY29ubmVjdC93YWxsZXQtYXBpXCI7XG5pbXBvcnQgeyBXZWJXYWxsZXRUcmFuc3BvcnQgfSBmcm9tIFwiQGFwdG9zLWNvbm5lY3Qvd2ViLXRyYW5zcG9ydFwiO1xuaW1wb3J0IHtcbiAgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3MzLFxuICBBbnlTaWduYXR1cmUsXG4gIEFwdG9zQ29uZmlnIGFzIEFwdG9zQ29uZmlnMixcbiAgRGVzZXJpYWxpemVyLFxuICBFZDI1NTE5U2lnbmF0dXJlLFxuICBGZWVQYXllclJhd1RyYW5zYWN0aW9uLFxuICBnZW5lcmF0ZVJhd1RyYW5zYWN0aW9uLFxuICBIZXhcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgTmV0d29ya05hbWUgYXMgTmV0d29ya05hbWUyIH0gZnJvbSBcIkBpZGVudGl0eS1jb25uZWN0L2FwaVwiO1xuaW1wb3J0IHsgY3JlYXRlRWQyNTUxOUtleVBhaXIsIGVuY29kZUJhc2U2NCBhcyBlbmNvZGVCYXNlNjQyIH0gZnJvbSBcIkBpZGVudGl0eS1jb25uZWN0L2NyeXB0b1wiO1xuXG4vLyBzcmMvY29uc3RhbnRzLnRzXG52YXIgREVGQVVMVF9GUk9OVEVORF9VUkwgPSBcImh0dHBzOi8vYXB0b3Njb25uZWN0LmFwcFwiO1xuXG4vLyBzcmMvY29udmVyc2lvbi50c1xuaW1wb3J0IHtcbiAgQWNjb3VudEFkZHJlc3MsXG4gIGdlbmVyYXRlVHJhbnNhY3Rpb25QYXlsb2FkLFxuICBnZW5lcmF0ZVRyYW5zYWN0aW9uUGF5bG9hZFdpdGhBQklcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuZnVuY3Rpb24gY29udmVydFRvU2VyaWFsaXphYmxlQXJndW1lbnQoYXJndW1lbnQpIHtcbiAgaWYgKGFyZ3VtZW50ID09PSB2b2lkIDAgfHwgYXJndW1lbnQgPT09IG51bGwpIHtcbiAgICByZXR1cm4gYXJndW1lbnQ7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnQpKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50Lm1hcCgoc3ViQXJndW1lbnQpID0+IGNvbnZlcnRUb1NlcmlhbGl6YWJsZUFyZ3VtZW50KHN1YkFyZ3VtZW50KSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgYXJndW1lbnQgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIGFyZ3VtZW50ID09PSBcImJvb2xlYW5cIiB8fCBhcmd1bWVudCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICByZXR1cm4gYXJndW1lbnQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gXCJiaWdpbnRcIikge1xuICAgIHJldHVybiBhcmd1bWVudC50b1N0cmluZygpO1xuICB9XG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGFyZ3VtZW50KTtcbiAgfVxuICBpZiAoXCJ2YWx1ZXNcIiBpbiBhcmd1bWVudCkge1xuICAgIHJldHVybiBhcmd1bWVudC52YWx1ZXMubWFwKChzdWJBcmd1bWVudCkgPT4gY29udmVydFRvU2VyaWFsaXphYmxlQXJndW1lbnQoc3ViQXJndW1lbnQpKTtcbiAgfVxuICBpZiAoXCJkYXRhXCIgaW4gYXJndW1lbnQpIHtcbiAgICByZXR1cm4gQWNjb3VudEFkZHJlc3MuZnJvbShhcmd1bWVudC5kYXRhKS50b1N0cmluZygpO1xuICB9XG4gIGlmIChhcmd1bWVudC52YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuICBpZiAodHlwZW9mIGFyZ3VtZW50LnZhbHVlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBhcmd1bWVudC52YWx1ZSA9PT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgYXJndW1lbnQudmFsdWUgPT09IFwiYm9vbGVhblwiIHx8IGFyZ3VtZW50LnZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgIHJldHVybiBhcmd1bWVudC52YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIGFyZ3VtZW50LnZhbHVlID09PSBcImJpZ2ludFwiKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50LnZhbHVlLnRvU3RyaW5nKCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBhcmd1bWVudFwiKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVBheWxvYWRGb3JJQyhwYXlsb2FkLCBhcHRvc0NvbmZpZykge1xuICBpZiAoXCJiY3NUb0J5dGVzXCIgaW4gcGF5bG9hZCkge1xuICAgIHJldHVybiBwYXlsb2FkO1xuICB9XG4gIGlmIChcImJ5dGVjb2RlXCIgaW4gcGF5bG9hZCkge1xuICAgIHJldHVybiBnZW5lcmF0ZVRyYW5zYWN0aW9uUGF5bG9hZChwYXlsb2FkKTtcbiAgfVxuICBpZiAoYXB0b3NDb25maWcpIHtcbiAgICByZXR1cm4gcGF5bG9hZC5hYmkgIT09IHZvaWQgMCA/IGdlbmVyYXRlVHJhbnNhY3Rpb25QYXlsb2FkV2l0aEFCSSh7IC4uLnBheWxvYWQsIGFiaTogcGF5bG9hZC5hYmkgfSkgOiBnZW5lcmF0ZVRyYW5zYWN0aW9uUGF5bG9hZCh7IGFwdG9zQ29uZmlnLCAuLi5wYXlsb2FkIH0pO1xuICB9XG4gIGNvbnN0IGVudHJ5RnVuY3Rpb25QYXlsb2FkID0ge1xuICAgIGFyZ3VtZW50czogcGF5bG9hZC5mdW5jdGlvbkFyZ3VtZW50cy5tYXAoY29udmVydFRvU2VyaWFsaXphYmxlQXJndW1lbnQpLFxuICAgIGZ1bmN0aW9uOiBwYXlsb2FkLmZ1bmN0aW9uLFxuICAgIHR5cGU6IFwiZW50cnlfZnVuY3Rpb25fcGF5bG9hZFwiLFxuICAgIHR5cGVfYXJndW1lbnRzOiAocGF5bG9hZC50eXBlQXJndW1lbnRzID8/IFtdKS5tYXAoKHRhKSA9PiB0YS50b1N0cmluZygpKVxuICB9O1xuICByZXR1cm4gXCJtdWx0aXNpZ0FkZHJlc3NcIiBpbiBwYXlsb2FkID8ge1xuICAgIG11bHRpc2lnX2FkZHJlc3M6IEFjY291bnRBZGRyZXNzLmZyb20ocGF5bG9hZC5tdWx0aXNpZ0FkZHJlc3MpLnRvU3RyaW5nKCksXG4gICAgdHJhbnNhY3Rpb25fcGF5bG9hZDogZW50cnlGdW5jdGlvblBheWxvYWQsXG4gICAgdHlwZTogXCJtdWx0aXNpZ19wYXlsb2FkXCJcbiAgfSA6IGVudHJ5RnVuY3Rpb25QYXlsb2FkO1xufVxuXG4vLyBzcmMvUGFpcmluZ0NsaWVudC50c1xuaW1wb3J0IHsgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3MyIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHtcbiAgTmV0d29ya05hbWUsXG4gIFNpZ25pbmdSZXF1ZXN0U3RhdHVzLFxuICBTaWduaW5nUmVxdWVzdFR5cGVzXG59IGZyb20gXCJAaWRlbnRpdHktY29ubmVjdC9hcGlcIjtcbmltcG9ydCB7XG4gIGRlY29kZUJhc2U2NCxcbiAgZGVjcnlwdEVudmVsb3BlLFxuICBkZXNlcmlhbGl6ZUVkMjU1MTlQdWJsaWNLZXlCNjQsXG4gIGRlc2VyaWFsaXplUHVibGljS2V5QjY0LFxuICBlbmNvZGVCYXNlNjQsXG4gIGVuY3J5cHRBbmRTaWduRW52ZWxvcGUsXG4gIEtleVR5cGVzLFxuICB0b0tleVxufSBmcm9tIFwiQGlkZW50aXR5LWNvbm5lY3QvY3J5cHRvXCI7XG5pbXBvcnQge1xuICBkZXNlcmlhbGl6ZVNpZ25UcmFuc2FjdGlvblJlc3BvbnNlQXJncyxcbiAgc2VyaWFsaXplU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdEFyZ3MsXG4gIHNlcmlhbGl6ZVNpZ25UcmFuc2FjdGlvblJlcXVlc3RBcmdzXG59IGZyb20gXCJAaWRlbnRpdHktY29ubmVjdC93YWxsZXQtYXBpXCI7XG5pbXBvcnQgYXhpb3MsIHsgQXhpb3NFcnJvciwgaXNBeGlvc0Vycm9yIH0gZnJvbSBcImF4aW9zXCI7XG5cbi8vIHNyYy9lcnJvcnMudHNcbnZhciBTaWduYXR1cmVSZXF1ZXN0RXJyb3IgPSBjbGFzcyBfU2lnbmF0dXJlUmVxdWVzdEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihzdGF0dXMpIHtcbiAgICBzdXBlcihzdGF0dXMpO1xuICAgIHRoaXMubmFtZSA9IFwiU2lnbmF0dXJlUmVxdWVzdEVycm9yXCI7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIF9TaWduYXR1cmVSZXF1ZXN0RXJyb3IucHJvdG90eXBlKTtcbiAgfVxufTtcbnZhciBVbmV4cGVjdGVkU2lnbmF0dXJlUmVzcG9uc2VFcnJvciA9IGNsYXNzIF9VbmV4cGVjdGVkU2lnbmF0dXJlUmVzcG9uc2VFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWlzc2luZ0ZpZWxkcykge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBgTWlzc2luZyB0aGUgZm9sbG93aW5nIGZpZWxkczogJHttaXNzaW5nRmllbGRzLmpvaW4oXCIsIFwiKX1gO1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiVW5leHBlY3RlZFNpZ25hdHVyZVJlc3BvbnNlRXJyb3JcIjtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgX1VuZXhwZWN0ZWRTaWduYXR1cmVSZXNwb25zZUVycm9yLnByb3RvdHlwZSk7XG4gIH1cbn07XG52YXIgUGFpcmluZ0V4cGlyZWRFcnJvciA9IGNsYXNzIF9QYWlyaW5nRXhwaXJlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubmFtZSA9IFwiUGFpcmluZ0V4cGlyZWRFcnJvclwiO1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBfUGFpcmluZ0V4cGlyZWRFcnJvci5wcm90b3R5cGUpO1xuICB9XG59O1xudmFyIFVucmVnaXN0ZXJlZERhcHBFcnJvciA9IGNsYXNzIF9VbnJlZ2lzdGVyZWREYXBwRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiRGFwcCBJRCBpcyBpbnZhbGlkIG9yIG5vdCBhc3NvY2lhdGVkIHdpdGggYSByZWdpc3RlcmVkIERhcHAuXCIpO1xuICAgIHRoaXMubmFtZSA9IFwiVW5yZWdpc3RlcmVkRGFwcEVycm9yXCI7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIF9VbnJlZ2lzdGVyZWREYXBwRXJyb3IucHJvdG90eXBlKTtcbiAgfVxufTtcblxuLy8gc3JjL3N0YXRlLnRzXG52YXIgREFQUF9QQUlSSU5HU19XSU5ET1dfU1RPUkFHRV9LRVkgPSBcImljRGFwcFBhaXJpbmdzXCI7XG52YXIgd2luZG93U3RhdGVBY2Nlc3NvcnMgPSB7XG4gIGFzeW5jIGdldChhZGRyZXNzKSB7XG4gICAgY29uc3QgcGFpcmluZ3MgPSBhd2FpdCB0aGlzLmdldEFsbCgpO1xuICAgIHJldHVybiBwYWlyaW5nc1thZGRyZXNzXTtcbiAgfSxcbiAgYXN5bmMgZ2V0QWxsKCkge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oREFQUF9QQUlSSU5HU19XSU5ET1dfU1RPUkFHRV9LRVkpO1xuICAgIHJldHVybiBzZXJpYWxpemVkID8gSlNPTi5wYXJzZShzZXJpYWxpemVkKSA6IHt9O1xuICB9LFxuICBhc3luYyB1cGRhdGUoYWRkcmVzcywgcGFpcmluZykge1xuICAgIGNvbnN0IHBhaXJpbmdzID0gYXdhaXQgdGhpcy5nZXRBbGwoKTtcbiAgICBpZiAocGFpcmluZyA9PT0gdm9pZCAwKSB7XG4gICAgICBkZWxldGUgcGFpcmluZ3NbYWRkcmVzc107XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhaXJpbmdzW2FkZHJlc3NdID0gcGFpcmluZztcbiAgICB9XG4gICAgY29uc3QgbmV3U2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KHBhaXJpbmdzKTtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oREFQUF9QQUlSSU5HU19XSU5ET1dfU1RPUkFHRV9LRVksIG5ld1NlcmlhbGl6ZWQpO1xuICB9XG59O1xuXG4vLyBzcmMvdXRpbHMudHNcbnZhciBTSUdOX01FU1NBR0VfUkVTUE9OU0VfUkVRVUlSRURfRklFTERTID0gW1xuICBcImFkZHJlc3NcIixcbiAgXCJhcHBsaWNhdGlvblwiLFxuICBcImNoYWluSWRcIixcbiAgXCJmdWxsTWVzc2FnZVwiLFxuICBcIm1lc3NhZ2VcIixcbiAgXCJub25jZVwiLFxuICBcInByZWZpeFwiLFxuICBcInNpZ25hdHVyZVwiXG5dO1xuZnVuY3Rpb24gdmFsaWRhdGVTaWduTWVzc2FnZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gIGNvbnN0IHByb3ZpZGVkRmllbGRzID0gbmV3IFNldChPYmplY3Qua2V5cyhyZXNwb25zZSkpO1xuICBjb25zdCBtaXNzaW5nRmllbGRzID0gU0lHTl9NRVNTQUdFX1JFU1BPTlNFX1JFUVVJUkVEX0ZJRUxEUy5maWx0ZXIoKGZpZWxkKSA9PiAhcHJvdmlkZWRGaWVsZHMuaGFzKGZpZWxkKSk7XG4gIGlmIChtaXNzaW5nRmllbGRzLmxlbmd0aCA+IDApIHtcbiAgICB0aHJvdyBuZXcgVW5leHBlY3RlZFNpZ25hdHVyZVJlc3BvbnNlRXJyb3IobWlzc2luZ0ZpZWxkcyk7XG4gIH1cbn1cbnZhciBTSUdOX0FORF9TVUJNSVRfVFJBTlNBQ1RJT05fUkVTUE9OU0VfUkVRVUlSRURfRklFTERTID0gW1wiaGFzaFwiXTtcbmZ1bmN0aW9uIHZhbGlkYXRlU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgY29uc3QgcHJvdmlkZWRGaWVsZHMgPSBuZXcgU2V0KE9iamVjdC5rZXlzKHJlc3BvbnNlKSk7XG4gIGNvbnN0IG1pc3NpbmdGaWVsZHMgPSBTSUdOX0FORF9TVUJNSVRfVFJBTlNBQ1RJT05fUkVTUE9OU0VfUkVRVUlSRURfRklFTERTLmZpbHRlcihcbiAgICAoZmllbGQpID0+ICFwcm92aWRlZEZpZWxkcy5oYXMoZmllbGQpXG4gICk7XG4gIGlmIChtaXNzaW5nRmllbGRzLmxlbmd0aCA+IDApIHtcbiAgICB0aHJvdyBuZXcgVW5leHBlY3RlZFNpZ25hdHVyZVJlc3BvbnNlRXJyb3IobWlzc2luZ0ZpZWxkcyk7XG4gIH1cbn1cblxuLy8gc3JjL1BhaXJpbmdDbGllbnQudHNcbnZhciBBUElfVkVSU0lPTiA9IFwiMC4yLjBcIjtcbnZhciBTSUdOSU5HX1JFUVVFU1RfUE9MTElOR19JTlRFUlZBTCA9IDI1MDA7XG52YXIgU0VRVUVOQ0VfTlVNQkVSX01JU01BVENIX1BBVFRFUk4gPSAvXlNlcXVlbmNlIG51bWJlciBtaXNtYXRjaCwgZXhwZWN0ZWQgKD86XFxTKyB0byBiZSApPyhcXGQrKS87XG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yKG1pbGxpc2Vjb25kcykge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBzZXRUaW1lb3V0KHJlc29sdmUsIG1pbGxpc2Vjb25kcyk7XG4gIH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gd2l0aFJldHJpZXMocmVxdWVzdEZuLCBvbkVycm9yLCByZXRyaWVzID0gMSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHJldHJpZXM7IGkgKz0gMSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgcmVxdWVzdEZuKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBvbkVycm9yKGVycik7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXF1ZXN0Rm4oKTtcbn1cbnZhciBBQ1BhaXJpbmdDbGllbnQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBhY2Nlc3NvcnMgPSB3aW5kb3dTdGF0ZUFjY2Vzc29ycyxcbiAgICBheGlvc0NvbmZpZyxcbiAgICBkZWZhdWx0TmV0d29ya05hbWUgPSBOZXR3b3JrTmFtZS5NQUlOTkVUXG4gIH0gPSB7fSkge1xuICAgIC8vIGVuZHJlZ2lvblxuICAgIHRoaXMub25EaXNjb25uZWN0TGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICB0aGlzLmFjY2Vzc29ycyA9IGFjY2Vzc29ycztcbiAgICB0aGlzLmRlZmF1bHROZXR3b3JrTmFtZSA9IGRlZmF1bHROZXR3b3JrTmFtZTtcbiAgICB0aGlzLmF4aW9zSW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoe1xuICAgICAgYmFzZVVSTDogREVGQVVMVF9GUk9OVEVORF9VUkwsXG4gICAgICAuLi5heGlvc0NvbmZpZ1xuICAgIH0pO1xuICAgIGNvbnN0IGlzQ2xpZW50U2lkZVJlbmRlcmluZyA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCI7XG4gICAgdGhpcy5pbml0UHJvbWlzZSA9IGlzQ2xpZW50U2lkZVJlbmRlcmluZyA/IHRoaXMuc3luY0ZpcnN0UGFpcmluZygpIDogdm9pZCAwO1xuICB9XG4gIGFzeW5jIGdldFBhaXJpbmcoaWQpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXhpb3NJbnN0YW5jZS5nZXQoYHYxL3BhaXJpbmcvJHtpZH0vYCk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuZGF0YS5wYWlyaW5nO1xuICB9XG4gIGFzeW5jIHN5bmNGaXJzdFBhaXJpbmcoKSB7XG4gICAgY29uc3QgcGFpcmluZ3MgPSBhd2FpdCB0aGlzLmFjY2Vzc29ycy5nZXRBbGwoKTtcbiAgICBjb25zdCBmaXJzdFBhaXJpbmcgPSBPYmplY3QudmFsdWVzKHBhaXJpbmdzKVswXTtcbiAgICBpZiAoZmlyc3RQYWlyaW5nID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGFwcFNwZWNpZmljV2FsbGV0LCBtYXhEYXBwU2VxdWVuY2VOdW1iZXIgfSA9IGF3YWl0IHRoaXMuZ2V0UGFpcmluZyhmaXJzdFBhaXJpbmcucGFpcmluZ0lkKTtcbiAgICAgIGF3YWl0IHRoaXMuYWNjZXNzb3JzLnVwZGF0ZShmaXJzdFBhaXJpbmcuYWNjb3VudEFkZHJlc3MsIHtcbiAgICAgICAgLi4uZmlyc3RQYWlyaW5nLFxuICAgICAgICBjdXJyU2VxdWVuY2VOdW1iZXI6IG1heERhcHBTZXF1ZW5jZU51bWJlcixcbiAgICAgICAgZGFwcFdhbGxldElkOiBkYXBwU3BlY2lmaWNXYWxsZXQ/LmlkXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWNjZXNzb3JzLnVwZGF0ZShmaXJzdFBhaXJpbmcuYWNjb3VudEFkZHJlc3MsIHZvaWQgMCk7XG4gICAgfVxuICB9XG4gIGFzeW5jIGNyZWF0ZVNpZ25pbmdSZXF1ZXN0KHBhaXJpbmcsIHR5cGUsIG5ldHdvcmtOYW1lLCByZXF1ZXN0Qm9keSkge1xuICAgIGNvbnN0IGRhcHBFZDI1NTE5U2VjcmV0S2V5ID0gZGVjb2RlQmFzZTY0KHBhaXJpbmcuZGFwcEVkMjU1MTlTZWNyZXRLZXlCNjQpO1xuICAgIGNvbnN0IGRhcHBFZDI1NTE5UHVibGljS2V5ID0gZGVjb2RlQmFzZTY0KHBhaXJpbmcuZGFwcEVkMjU1MTlQdWJsaWNLZXlCNjQpO1xuICAgIGNvbnN0IGFjY291bnRUcmFuc3BvcnRFZDI1NTE5UHVibGljS2V5ID0gZGVjb2RlQmFzZTY0KHBhaXJpbmcuYWNjb3VudFRyYW5zcG9ydEVkMjU1MTlQdWJsaWNLZXlCNjQpO1xuICAgIGxldCBzZXF1ZW5jZU51bWJlciA9IHBhaXJpbmcuY3VyclNlcXVlbmNlTnVtYmVyICsgMTtcbiAgICByZXR1cm4gd2l0aFJldHJpZXMoXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RFbnZlbG9wZSA9IGF3YWl0IGVuY3J5cHRBbmRTaWduRW52ZWxvcGUoXG4gICAgICAgICAgdG9LZXkoZGFwcEVkMjU1MTlTZWNyZXRLZXksIEtleVR5cGVzLkVkMjU1MTlTZWNyZXRLZXkpLFxuICAgICAgICAgIHRvS2V5KGRhcHBFZDI1NTE5UHVibGljS2V5LCBLZXlUeXBlcy5FZDI1NTE5UHVibGljS2V5KSxcbiAgICAgICAgICB0b0tleShhY2NvdW50VHJhbnNwb3J0RWQyNTUxOVB1YmxpY0tleSwgS2V5VHlwZXMuRWQyNTUxOVB1YmxpY0tleSksXG4gICAgICAgICAgc2VxdWVuY2VOdW1iZXIsXG4gICAgICAgICAgeyBhcGlWZXJzaW9uOiBBUElfVkVSU0lPTiwgbmV0d29ya05hbWUsIHJlcXVlc3RUeXBlOiB0eXBlIH0sXG4gICAgICAgICAgcmVxdWVzdEJvZHlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2UucG9zdChcbiAgICAgICAgICBgdjEvcGFpcmluZy8ke3BhaXJpbmcucGFpcmluZ0lkfS9zaWduaW5nLXJlcXVlc3QvYCxcbiAgICAgICAgICByZXF1ZXN0RW52ZWxvcGVcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hY2Nlc3NvcnMudXBkYXRlKHBhaXJpbmcuYWNjb3VudEFkZHJlc3MsIHtcbiAgICAgICAgICAuLi5wYWlyaW5nLFxuICAgICAgICAgIGN1cnJTZXF1ZW5jZU51bWJlcjogc2VxdWVuY2VOdW1iZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLmRhdGEuc2lnbmluZ1JlcXVlc3Q7XG4gICAgICB9LFxuICAgICAgKGVycikgPT4ge1xuICAgICAgICBpZiAoaXNBeGlvc0Vycm9yKGVycikpIHtcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnIucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2U7XG4gICAgICAgICAgY29uc3QgZXhwZWN0ZWRTZXF1ZW5jZU51bWJlciA9IGVycm9yTWVzc2FnZT8ubWF0Y2goU0VRVUVOQ0VfTlVNQkVSX01JU01BVENIX1BBVFRFUk4pPy5bMV07XG4gICAgICAgICAgaWYgKGV4cGVjdGVkU2VxdWVuY2VOdW1iZXIgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXIgPSBOdW1iZXIoZXhwZWN0ZWRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIGFzeW5jIGdldFNpZ25pbmdSZXF1ZXN0KGlkKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2UuZ2V0KFxuICAgICAgYHYxL3NpZ25pbmctcmVxdWVzdC8ke2lkfS9gLFxuICAgICAge1xuICAgICAgICB2YWxpZGF0ZVN0YXR1czogKHN0YXR1cykgPT4gc3RhdHVzID09PSAyMDAgfHwgc3RhdHVzID09PSA0MDRcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiByZXNwb25zZS5kYXRhPy5kYXRhPy5zaWduaW5nUmVxdWVzdDtcbiAgfVxuICBhc3luYyBkZWxldGVQYWlyaW5nKHBhaXJpbmdJZCwgc2VjcmV0S2V5LCBwdWJsaWNLZXkpIHtcbiAgICBjb25zdCByZXF1ZXN0RW52ZWxvcGUgPSBhd2FpdCBlbmNyeXB0QW5kU2lnbkVudmVsb3BlKFxuICAgICAgc2VjcmV0S2V5LFxuICAgICAgcHVibGljS2V5LFxuICAgICAgcHVibGljS2V5LFxuICAgICAgMCxcbiAgICAgIC8vIGlnbm9yZWRcbiAgICAgIHt9LFxuICAgICAge31cbiAgICApO1xuICAgIGF3YWl0IHRoaXMuYXhpb3NJbnN0YW5jZS5wb3N0KFxuICAgICAgYHYxL3BhaXJpbmcvJHtwYWlyaW5nSWR9L2RlbGV0ZS9gLFxuICAgICAgcmVxdWVzdEVudmVsb3BlLFxuICAgICAgeyB2YWxpZGF0ZVN0YXR1czogKHN0YXR1cykgPT4gc3RhdHVzID09PSAyMDQgfHwgc3RhdHVzID09PSA0MDQgfVxuICAgICk7XG4gIH1cbiAgYXN5bmMgY2FuY2VsU2lnbmluZ1JlcXVlc3QocGFpcmluZywgaWQpIHtcbiAgICBjb25zdCBzZXF1ZW5jZU51bWJlciA9IHBhaXJpbmcuY3VyclNlcXVlbmNlTnVtYmVyO1xuICAgIGNvbnN0IGRhcHBFZDI1NTE5U2VjcmV0S2V5ID0gZGVjb2RlQmFzZTY0KHBhaXJpbmcuZGFwcEVkMjU1MTlTZWNyZXRLZXlCNjQpO1xuICAgIGNvbnN0IGRhcHBFZDI1NTE5UHVibGljS2V5ID0gZGVjb2RlQmFzZTY0KHBhaXJpbmcuZGFwcEVkMjU1MTlQdWJsaWNLZXlCNjQpO1xuICAgIGNvbnN0IGFjY291bnRUcmFuc3BvcnRFZDI1NTE5UHVibGljS2V5ID0gZGVjb2RlQmFzZTY0KHBhaXJpbmcuYWNjb3VudFRyYW5zcG9ydEVkMjU1MTlQdWJsaWNLZXlCNjQpO1xuICAgIGNvbnN0IHJlcXVlc3RFbnZlbG9wZSA9IGF3YWl0IGVuY3J5cHRBbmRTaWduRW52ZWxvcGUoXG4gICAgICB0b0tleShkYXBwRWQyNTUxOVNlY3JldEtleSwgS2V5VHlwZXMuRWQyNTUxOVNlY3JldEtleSksXG4gICAgICB0b0tleShkYXBwRWQyNTUxOVB1YmxpY0tleSwgS2V5VHlwZXMuRWQyNTUxOVB1YmxpY0tleSksXG4gICAgICB0b0tleShhY2NvdW50VHJhbnNwb3J0RWQyNTUxOVB1YmxpY0tleSwgS2V5VHlwZXMuRWQyNTUxOVB1YmxpY0tleSksXG4gICAgICBzZXF1ZW5jZU51bWJlciArIDEsXG4gICAgICB7fSxcbiAgICAgIHt9XG4gICAgKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXhpb3NJbnN0YW5jZS5wYXRjaChcbiAgICAgIGB2MS9zaWduaW5nLXJlcXVlc3QvJHtpZH0vY2FuY2VsL2AsXG4gICAgICByZXF1ZXN0RW52ZWxvcGVcbiAgICApO1xuICAgIGF3YWl0IHRoaXMuYWNjZXNzb3JzLnVwZGF0ZShwYWlyaW5nLmFjY291bnRBZGRyZXNzLCB7XG4gICAgICAuLi5wYWlyaW5nLFxuICAgICAgY3VyclNlcXVlbmNlTnVtYmVyOiBzZXF1ZW5jZU51bWJlciArIDFcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5kYXRhLnNpZ25pbmdSZXF1ZXN0O1xuICB9XG4gIGFzeW5jIHNpZ25SZXF1ZXN0KGFkZHJlc3MsIHR5cGUsIHJlcXVlc3RCb2R5LCB7IGNhbmNlbFRva2VuLCBuZXR3b3JrTmFtZSB9ID0ge30pIHtcbiAgICBhd2FpdCB0aGlzLmluaXRQcm9taXNlO1xuICAgIGNvbnN0IHBhaXJpbmcgPSBhd2FpdCB0aGlzLmFjY2Vzc29ycy5nZXQoYWRkcmVzcyk7XG4gICAgaWYgKHBhaXJpbmcgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHJlcXVlc3RlZCBhY2NvdW50IGlzIG5vdCBwYWlyZWRcIik7XG4gICAgfVxuICAgIGxldCBzaWduaW5nUmVxdWVzdDtcbiAgICB0cnkge1xuICAgICAgc2lnbmluZ1JlcXVlc3QgPSBhd2FpdCB0aGlzLmNyZWF0ZVNpZ25pbmdSZXF1ZXN0KFxuICAgICAgICBwYWlyaW5nLFxuICAgICAgICB0eXBlLFxuICAgICAgICBuZXR3b3JrTmFtZSB8fCB0aGlzLmRlZmF1bHROZXR3b3JrTmFtZSxcbiAgICAgICAgcmVxdWVzdEJvZHlcbiAgICAgICk7XG4gICAgICB3aGlsZSAoc2lnbmluZ1JlcXVlc3Quc3RhdHVzID09PSBcIlBFTkRJTkdcIikge1xuICAgICAgICBhd2FpdCB3YWl0Rm9yKFNJR05JTkdfUkVRVUVTVF9QT0xMSU5HX0lOVEVSVkFMKTtcbiAgICAgICAgaWYgKGNhbmNlbFRva2VuPy5jYW5jZWxsZWQpIHtcbiAgICAgICAgICBzaWduaW5nUmVxdWVzdC5zdGF0dXMgPSBTaWduaW5nUmVxdWVzdFN0YXR1cy5DQU5DRUxMRUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc2lnbmluZ1JlcXVlc3QgPSBhd2FpdCB0aGlzLmdldFNpZ25pbmdSZXF1ZXN0KHNpZ25pbmdSZXF1ZXN0LmlkKSA/PyBzaWduaW5nUmVxdWVzdDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChpc0F4aW9zRXJyb3IoZXJyKSAmJiBlcnIuY29kZSA9PT0gXCI0MDRcIikge1xuICAgICAgICBhd2FpdCB0aGlzLmFjY2Vzc29ycy51cGRhdGUoYWRkcmVzcywgdm9pZCAwKTtcbiAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLm9uRGlzY29ubmVjdExpc3RlbmVycykge1xuICAgICAgICAgIGxpc3RlbmVyKGFkZHJlc3MpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBQYWlyaW5nRXhwaXJlZEVycm9yKCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIGlmIChzaWduaW5nUmVxdWVzdC5zdGF0dXMgIT09IFwiQVBQUk9WRURcIikge1xuICAgICAgdGhyb3cgbmV3IFNpZ25hdHVyZVJlcXVlc3RFcnJvcihzaWduaW5nUmVxdWVzdC5zdGF0dXMpO1xuICAgIH1cbiAgICBjb25zdCBkZWNyeXB0ZWQgPSBkZWNyeXB0RW52ZWxvcGUoXG4gICAgICB0b0tleShkZWNvZGVCYXNlNjQocGFpcmluZy5hY2NvdW50VHJhbnNwb3J0RWQyNTUxOVB1YmxpY0tleUI2NCksIEtleVR5cGVzLkVkMjU1MTlQdWJsaWNLZXkpLFxuICAgICAgdG9LZXkoZGVjb2RlQmFzZTY0KHBhaXJpbmcuZGFwcEVkMjU1MTlTZWNyZXRLZXlCNjQpLCBLZXlUeXBlcy5FZDI1NTE5U2VjcmV0S2V5KSxcbiAgICAgIHNpZ25pbmdSZXF1ZXN0LnJlc3BvbnNlRW52ZWxvcGVcbiAgICApO1xuICAgIHJldHVybiBkZWNyeXB0ZWQucHJpdmF0ZU1lc3NhZ2U7XG4gIH1cbiAgLy8gcmVnaW9uIFB1YmxpYyBBUElcbiAgLyoqXG4gICAqIFJlcXVlc3RzIGEgY29ubmVjdGlvbiB0byBhbiBhY2NvdW50IChpbnRlcm5hbGx5IGtub3duIGFzIHBhaXJpbmcpLlxuICAgKiBAcmV0dXJucyBlaXRoZXIgdGhlIGFkZHJlc3Mgb2YgdGhlIGNvbm5lY3RlZCBhY2NvdW50LCBvciB1bmRlZmluZWQgaWYgdGhlXG4gICAqIGNvbm5lY3Rpb24gd2FzIGNhbmNlbGxlZC5cbiAgICovXG4gIGFzeW5jIGFkZFBhaXJpbmcoeyBwdWJsaWNLZXksIHNlY3JldEtleSB9LCBmaW5hbGl6ZWRQYWlyaW5nKSB7XG4gICAgYXdhaXQgdGhpcy5hY2Nlc3NvcnMudXBkYXRlKGZpbmFsaXplZFBhaXJpbmcuYWNjb3VudC5hY2NvdW50QWRkcmVzcywge1xuICAgICAgYWNjb3VudEFkZHJlc3M6IGZpbmFsaXplZFBhaXJpbmcuYWNjb3VudC5hY2NvdW50QWRkcmVzcyxcbiAgICAgIGFjY291bnRBbGlhczogZmluYWxpemVkUGFpcmluZy5hY2NvdW50LnVzZXJTdWJtaXR0ZWRBbGlhcyA/PyB2b2lkIDAsXG4gICAgICBhY2NvdW50UHVibGljS2V5QjY0OiBmaW5hbGl6ZWRQYWlyaW5nLmFjY291bnQucHVibGljS2V5QjY0LFxuICAgICAgYWNjb3VudFRyYW5zcG9ydEVkMjU1MTlQdWJsaWNLZXlCNjQ6IGZpbmFsaXplZFBhaXJpbmcuYWNjb3VudC50cmFuc3BvcnRFZDI1NTE5UHVibGljS2V5QjY0LFxuICAgICAgY3VyclNlcXVlbmNlTnVtYmVyOiBmaW5hbGl6ZWRQYWlyaW5nLm1heERhcHBTZXF1ZW5jZU51bWJlcixcbiAgICAgIGRhcHBFZDI1NTE5UHVibGljS2V5QjY0OiBlbmNvZGVCYXNlNjQocHVibGljS2V5LmtleSksXG4gICAgICBkYXBwRWQyNTUxOVNlY3JldEtleUI2NDogZW5jb2RlQmFzZTY0KHNlY3JldEtleS5rZXkpLFxuICAgICAgZGFwcFdhbGxldElkOiBmaW5hbGl6ZWRQYWlyaW5nLmRhcHBTcGVjaWZpY1dhbGxldElkLFxuICAgICAgcGFpcmluZ0lkOiBmaW5hbGl6ZWRQYWlyaW5nLmlkXG4gICAgfSk7XG4gIH1cbiAgYXN5bmMgZGlzY29ubmVjdChhZGRyZXNzKSB7XG4gICAgY29uc3QgcGFpcmluZyA9IGF3YWl0IHRoaXMuYWNjZXNzb3JzLmdldChhZGRyZXNzKTtcbiAgICBpZiAocGFpcmluZyA9PT0gdm9pZCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3BlY2lmaWVkIGFjY291bnQgaXMgbm90IHBhaXJlZFwiKTtcbiAgICB9XG4gICAgY29uc3QgZGFwcEVkMjU1MTlTZWNyZXRLZXkgPSBkZWNvZGVCYXNlNjQocGFpcmluZy5kYXBwRWQyNTUxOVNlY3JldEtleUI2NCk7XG4gICAgY29uc3QgZGFwcEVkMjU1MTlQdWJsaWNLZXkgPSBkZWNvZGVCYXNlNjQocGFpcmluZy5kYXBwRWQyNTUxOVB1YmxpY0tleUI2NCk7XG4gICAgYXdhaXQgdGhpcy5kZWxldGVQYWlyaW5nKFxuICAgICAgcGFpcmluZy5wYWlyaW5nSWQsXG4gICAgICB0b0tleShkYXBwRWQyNTUxOVNlY3JldEtleSwgS2V5VHlwZXMuRWQyNTUxOVNlY3JldEtleSksXG4gICAgICB0b0tleShkYXBwRWQyNTUxOVB1YmxpY0tleSwgS2V5VHlwZXMuRWQyNTUxOVB1YmxpY0tleSlcbiAgICApO1xuICAgIGF3YWl0IHRoaXMuYWNjZXNzb3JzLnVwZGF0ZShhZGRyZXNzLCB2b2lkIDApO1xuICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5vbkRpc2Nvbm5lY3RMaXN0ZW5lcnMpIHtcbiAgICAgIGxpc3RlbmVyKGFkZHJlc3MpO1xuICAgIH1cbiAgfVxuICBhc3luYyBzaWduTWVzc2FnZShhZGRyZXNzLCBhcmdzLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNpZ25SZXF1ZXN0KFxuICAgICAgYWRkcmVzcyxcbiAgICAgIFNpZ25pbmdSZXF1ZXN0VHlwZXMuU0lHTl9NRVNTQUdFLFxuICAgICAgYXJncyxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHZhbGlkYXRlU2lnbk1lc3NhZ2VSZXNwb25zZShyZXNwb25zZSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG4gIGFzeW5jIHNpZ25UcmFuc2FjdGlvbihhZGRyZXNzLCBhcmdzLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZFJlcXVlc3RBcmdzID0gc2VyaWFsaXplU2lnblRyYW5zYWN0aW9uUmVxdWVzdEFyZ3MoYXJncyk7XG4gICAgY29uc3Qgc2VyaWFsaXplZFJlc3BvbnNlQXJncyA9IGF3YWl0IHRoaXMuc2lnblJlcXVlc3QoYWRkcmVzcywgU2lnbmluZ1JlcXVlc3RUeXBlcy5TSUdOX1RSQU5TQUNUSU9OLCBzZXJpYWxpemVkUmVxdWVzdEFyZ3MsIG9wdGlvbnMpO1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVNpZ25UcmFuc2FjdGlvblJlc3BvbnNlQXJncyhzZXJpYWxpemVkUmVzcG9uc2VBcmdzKTtcbiAgfVxuICAvLyBlbmRyZWdpb25cbiAgYXN5bmMgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKGFkZHJlc3MsIGFyZ3MsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBzZXJpYWxpemVkUmVxdWVzdEFyZ3MgPSBzZXJpYWxpemVTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0QXJncyhhcmdzKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2VBcmdzID0gYXdhaXQgdGhpcy5zaWduUmVxdWVzdChhZGRyZXNzLCBTaWduaW5nUmVxdWVzdFR5cGVzLlNJR05fQU5EX1NVQk1JVF9UUkFOU0FDVElPTiwgc2VyaWFsaXplZFJlcXVlc3RBcmdzLCBvcHRpb25zKTtcbiAgICAgIHZhbGlkYXRlU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVzcG9uc2UocmVzcG9uc2VBcmdzKTtcbiAgICAgIHJldHVybiByZXNwb25zZUFyZ3M7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBeGlvc0Vycm9yICYmIGUucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGUucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZ2V0Q29ubmVjdGVkQWNjb3VudHMoKSB7XG4gICAgYXdhaXQgdGhpcy5pbml0UHJvbWlzZTtcbiAgICBjb25zdCBwYWlyaW5ncyA9IGF3YWl0IHRoaXMuYWNjZXNzb3JzLmdldEFsbCgpO1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHBhaXJpbmdzKS5tYXAoXG4gICAgICAoeyBhY2NvdW50QWRkcmVzcywgYWNjb3VudEVkMjU1MTlQdWJsaWNLZXlCNjQsIGFjY291bnRQdWJsaWNLZXlCNjQgfSkgPT4gKHtcbiAgICAgICAgYWRkcmVzczogQWNjb3VudEFkZHJlc3MyLmZyb20oYWNjb3VudEFkZHJlc3MpLFxuICAgICAgICBwdWJsaWNLZXk6IGFjY291bnRQdWJsaWNLZXlCNjQgIT09IHZvaWQgMCA/IGRlc2VyaWFsaXplUHVibGljS2V5QjY0KGFjY291bnRQdWJsaWNLZXlCNjQpIDogZGVzZXJpYWxpemVFZDI1NTE5UHVibGljS2V5QjY0KGFjY291bnRFZDI1NTE5UHVibGljS2V5QjY0KVxuICAgICAgfSlcbiAgICApO1xuICB9XG4gIG9uRGlzY29ubmVjdChsaXN0ZW5lcikge1xuICAgIHRoaXMub25EaXNjb25uZWN0TGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHRoaXMub25EaXNjb25uZWN0TGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG4gIH1cbn07XG5cbi8vIHNyYy9BQ0RhcHBDbGllbnQudHNcbnZhciBBQ0RhcHBDbGllbnQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBiYWNrZW5kQmFzZVVSTCxcbiAgICBkYXBwSWQsXG4gICAgZGFwcEltYWdlVVJJLFxuICAgIGRhcHBOYW1lLFxuICAgIGRlZmF1bHROZXR3b3JrTmFtZSA9IE5ldHdvcmtOYW1lMi5NQUlOTkVULFxuICAgIGZyb250ZW5kQmFzZVVSTCA9IERFRkFVTFRfRlJPTlRFTkRfVVJMXG4gIH0gPSB7fSkge1xuICAgIHRoaXMuZGVmYXVsdE5ldHdvcmtOYW1lID0gZGVmYXVsdE5ldHdvcmtOYW1lO1xuICAgIHRoaXMuZGFwcEluZm8gPSB7XG4gICAgICBkb21haW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gICAgICBpbWFnZVVSSTogZGFwcEltYWdlVVJJLFxuICAgICAgbmFtZTogZGFwcE5hbWUgPz8gZG9jdW1lbnQudGl0bGVcbiAgICB9O1xuICAgIHRoaXMudHJhbnNwb3J0ID0gbmV3IFdlYldhbGxldFRyYW5zcG9ydChmcm9udGVuZEJhc2VVUkwpO1xuICAgIHRoaXMuZGFwcElkID0gZGFwcElkO1xuICAgIHRoaXMucGFpcmluZ0NsaWVudCA9IG5ldyBBQ1BhaXJpbmdDbGllbnQoe1xuICAgICAgYXhpb3NDb25maWc6IHtcbiAgICAgICAgYmFzZVVSTDogYmFja2VuZEJhc2VVUkwgPz8gZnJvbnRlbmRCYXNlVVJMXG4gICAgICB9LFxuICAgICAgZGVmYXVsdE5ldHdvcmtOYW1lXG4gICAgfSk7XG4gIH1cbiAgLy8gcmVnaW9uIFB1YmxpYyBBUElcbiAgYXN5bmMgZ2V0S2V5bGVzc0FjY291bnRzKCkge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXF1ZXN0ID0gR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0LnNlcmlhbGl6ZSh0aGlzLmRhcHBJbmZvKTtcbiAgICBjb25zdCBzZXJpYWxpemVkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydC5zZW5kUmVxdWVzdChzZXJpYWxpemVkUmVxdWVzdCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBHZXRDb25uZWN0ZWRBY2NvdW50c1Jlc3BvbnNlLmRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXNwb25zZSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmFyZ3M7XG4gIH1cbiAgYXN5bmMgZ2V0SWNBY2NvdW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5wYWlyaW5nQ2xpZW50LmdldENvbm5lY3RlZEFjY291bnRzKCkgPz8gW107XG4gIH1cbiAgYXN5bmMgaXNJY0FjY291bnQoYWRkcmVzcykge1xuICAgIGNvbnN0IGljQWNjb3VudHMgPSBhd2FpdCB0aGlzLmdldEljQWNjb3VudHMoKTtcbiAgICByZXR1cm4gaWNBY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LmFkZHJlc3MuZXF1YWxzKEFjY291bnRBZGRyZXNzMy5mcm9tKGFkZHJlc3MpKSkgIT09IHZvaWQgMDtcbiAgfVxuICBhc3luYyBnZXRDb25uZWN0ZWRBY2NvdW50cygpIHtcbiAgICBjb25zdCBrZXlsZXNzQWNjb3VudHMgPSBhd2FpdCB0aGlzLmdldEtleWxlc3NBY2NvdW50cygpO1xuICAgIGNvbnN0IGljQWNjb3VudHMgPSBhd2FpdCB0aGlzLmdldEljQWNjb3VudHMoKTtcbiAgICByZXR1cm4gWy4uLmtleWxlc3NBY2NvdW50cywgLi4uaWNBY2NvdW50c107XG4gIH1cbiAgYXN5bmMgZGlzY29ubmVjdChhZGRyZXNzKSB7XG4gICAgaWYgKGF3YWl0IHRoaXMuaXNJY0FjY291bnQoYWRkcmVzcykpIHtcbiAgICAgIGNvbnN0IHN0cmluZ0FkZHJlc3MgPSBBY2NvdW50QWRkcmVzczMuZnJvbShhZGRyZXNzKS50b1N0cmluZygpO1xuICAgICAgYXdhaXQgdGhpcy5wYWlyaW5nQ2xpZW50LmRpc2Nvbm5lY3Qoc3RyaW5nQWRkcmVzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXF1ZXN0ID0gRGlzY29ubmVjdFJlcXVlc3Quc2VyaWFsaXplKHRoaXMuZGFwcEluZm8pO1xuICAgICAgYXdhaXQgdGhpcy50cmFuc3BvcnQuc2VuZFJlcXVlc3Qoc2VyaWFsaXplZFJlcXVlc3QpO1xuICAgIH1cbiAgfVxuICBhc3luYyBjb25uZWN0KHsgcHJlZmVycmVkV2FsbGV0TmFtZSB9ID0ge30pIHtcbiAgICBjb25zdCBkYXBwS2V5cGFpciA9IGNyZWF0ZUVkMjU1MTlLZXlQYWlyKCk7XG4gICAgY29uc3QgaW5qZWN0ZWRQcmVmZXJyZWRXYWxsZXROYW1lID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdy5BQ19QUkVGRVJSRURfV0FMTEVUX05BTUUgOiB2b2lkIDA7XG4gICAgY29uc3QgcmVxdWVzdEFyZ3MgPSB7XG4gICAgICBkYXBwRWQyNTUxOVB1YmxpY0tleUI2NDogZW5jb2RlQmFzZTY0MihkYXBwS2V5cGFpci5wdWJsaWNLZXkua2V5KSxcbiAgICAgIGRhcHBJZDogdGhpcy5kYXBwSWQsXG4gICAgICBwcmVmZXJyZWRXYWxsZXROYW1lOiBwcmVmZXJyZWRXYWxsZXROYW1lID8/IGluamVjdGVkUHJlZmVycmVkV2FsbGV0TmFtZVxuICAgIH07XG4gICAgY29uc3Qgc2VyaWFsaXplZFJlcXVlc3QgPSBDb25uZWN0UmVxdWVzdC5zZXJpYWxpemUodGhpcy5kYXBwSW5mbywgcmVxdWVzdEFyZ3MpO1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXNwb25zZSA9IGF3YWl0IHRoaXMudHJhbnNwb3J0LnNlbmRSZXF1ZXN0KHNlcmlhbGl6ZWRSZXF1ZXN0KTtcbiAgICBjb25zdCByZXNwb25zZSA9IENvbm5lY3RSZXNwb25zZS5kZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UpO1xuICAgIGlmIChyZXNwb25zZS5hcmdzLnN0YXR1cyA9PT0gXCJhcHByb3ZlZFwiKSB7XG4gICAgICBjb25zdCB7IGFjY291bnQsIHBhaXJpbmcgfSA9IHJlc3BvbnNlLmFyZ3MuYXJncztcbiAgICAgIGlmIChwYWlyaW5nKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucGFpcmluZ0NsaWVudC5hZGRQYWlyaW5nKGRhcHBLZXlwYWlyLCBwYWlyaW5nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtYWtlVXNlckFwcHJvdmFsKHsgYWNjb3VudCB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlLmFyZ3M7XG4gIH1cbiAgYXN5bmMgc2lnbk1lc3NhZ2UoYXJncykge1xuICAgIGNvbnN0IHsgc2lnbmVyQWRkcmVzcyB9ID0gYXJncztcbiAgICBpZiAoYXdhaXQgdGhpcy5pc0ljQWNjb3VudChzaWduZXJBZGRyZXNzKSkge1xuICAgICAgY29uc3QgeyBjaGFpbklkIH0gPSBhcmdzO1xuICAgICAgY29uc3QgbmV0d29yayA9IGNoYWluSWRUb05ldHdvcmsoY2hhaW5JZCk7XG4gICAgICBsZXQgbWVzc2FnZTtcbiAgICAgIGxldCBub25jZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIG1lc3NhZ2UgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYXJncy5tZXNzYWdlKTtcbiAgICAgICAgbm9uY2UgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYXJncy5ub25jZSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBVVEYtOCBlbmNvZGVkIHRleHQgaXMgc3VwcG9ydGVkIHdoZW4gdXNpbmcgSUNcIik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGZ1bGxNZXNzYWdlLCBzaWduYXR1cmU6IGhleFNpZ25hdHVyZSB9ID0gYXdhaXQgdGhpcy5wYWlyaW5nQ2xpZW50LnNpZ25NZXNzYWdlKFxuICAgICAgICBzaWduZXJBZGRyZXNzLnRvU3RyaW5nKCksXG4gICAgICAgIHtcbiAgICAgICAgICBhZGRyZXNzOiB0cnVlLFxuICAgICAgICAgIGFwcGxpY2F0aW9uOiB0cnVlLFxuICAgICAgICAgIGNoYWluSWQ6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICBub25jZVxuICAgICAgICB9LFxuICAgICAgICB7IG5ldHdvcmtOYW1lOiBuZXR3b3JrIH1cbiAgICAgICk7XG4gICAgICBjb25zdCBzaWduYXR1cmVCeXRlcyA9IEhleC5mcm9tSGV4SW5wdXQoaGV4U2lnbmF0dXJlKS50b1VpbnQ4QXJyYXkoKTtcbiAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IHNpZ25hdHVyZUJ5dGVzLmxlbmd0aCA9PT0gRWQyNTUxOVNpZ25hdHVyZS5MRU5HVEggPyBuZXcgRWQyNTUxOVNpZ25hdHVyZShzaWduYXR1cmVCeXRlcykgOiBBbnlTaWduYXR1cmUuZGVzZXJpYWxpemUobmV3IERlc2VyaWFsaXplcihzaWduYXR1cmVCeXRlcykpO1xuICAgICAgcmV0dXJuIG1ha2VVc2VyQXBwcm92YWwoe1xuICAgICAgICBmdWxsTWVzc2FnZSxcbiAgICAgICAgc2lnbmF0dXJlXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3Qgc2VyaWFsaXplZFJlcXVlc3QgPSBTaWduTWVzc2FnZVJlcXVlc3Quc2VyaWFsaXplKHRoaXMuZGFwcEluZm8sIGFyZ3MpO1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXNwb25zZSA9IGF3YWl0IHRoaXMudHJhbnNwb3J0LnNlbmRSZXF1ZXN0KHNlcmlhbGl6ZWRSZXF1ZXN0KTtcbiAgICBjb25zdCByZXNwb25zZSA9IFNpZ25NZXNzYWdlUmVzcG9uc2UuZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuYXJncztcbiAgfVxuICBhc3luYyBzaWduVHJhbnNhY3Rpb24oYXJncykge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRBcmdzID0gXCJ0cmFuc2FjdGlvblwiIGluIGFyZ3MgPyBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Lm5vcm1hbGl6ZUFyZ3MoYXJncykgOiBhcmdzO1xuICAgIGNvbnN0IHsgc2lnbmVyQWRkcmVzcyB9ID0gYXJncztcbiAgICBpZiAoYXdhaXQgdGhpcy5pc0ljQWNjb3VudChzaWduZXJBZGRyZXNzKSkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBleHBpcmF0aW9uU2Vjb25kc0Zyb21Ob3csXG4gICAgICAgIGV4cGlyYXRpb25UaW1lc3RhbXAsXG4gICAgICAgIGZlZVBheWVyLFxuICAgICAgICBnYXNVbml0UHJpY2UsXG4gICAgICAgIG1heEdhc0Ftb3VudCxcbiAgICAgICAgbmV0d29yayxcbiAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgc2Vjb25kYXJ5U2lnbmVycyxcbiAgICAgICAgc2VuZGVyLFxuICAgICAgICBzZXF1ZW5jZU51bWJlclxuICAgICAgfSA9IG5vcm1hbGl6ZWRBcmdzO1xuICAgICAgaWYgKGZlZVBheWVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3BvbnNvcmVkIHRyYW5zYWN0aW9uIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHNlY29uZGFyeVNpZ25lcnMgJiYgc2Vjb25kYXJ5U2lnbmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk11bHRpLWFnZW50IHRyYW5zYWN0aW9ucyBub3QgY3VycmVudGx5IHN1cHBvcnRlZFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICghKFwiYmNzVG9CeXRlc1wiIGluIHBheWxvYWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBheWxvYWQgaW5wdXQgZm9ybWF0IGlzIG9ubHkgc3VwcG9ydGVkIHdpdGggS2V5bGVzcyBhY2NvdW50cy5cIik7XG4gICAgICB9XG4gICAgICBjb25zdCByZXNwb25zZUFyZ3MgPSBhd2FpdCB0aGlzLnBhaXJpbmdDbGllbnQuc2lnblRyYW5zYWN0aW9uKFxuICAgICAgICBzaWduZXJBZGRyZXNzLnRvU3RyaW5nKCksXG4gICAgICAgIHtcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBleHBpcmF0aW9uU2Vjb25kc0Zyb21Ob3csXG4gICAgICAgICAgICBleHBpcmF0aW9uVGltZXN0YW1wLFxuICAgICAgICAgICAgZ2FzVW5pdFByaWNlLFxuICAgICAgICAgICAgbWF4R2FzQW1vdW50LFxuICAgICAgICAgICAgc2VuZGVyOiBzZW5kZXI/LmFkZHJlc3MudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiBzZXF1ZW5jZU51bWJlciAhPT0gdm9pZCAwID8gTnVtYmVyKHNlcXVlbmNlTnVtYmVyKSA6IHZvaWQgMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGF5bG9hZFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmV0d29ya05hbWU6IG5ldHdvcmtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiBtYWtlVXNlckFwcHJvdmFsKHtcbiAgICAgICAgYXV0aGVudGljYXRvcjogcmVzcG9uc2VBcmdzLmFjY291bnRBdXRoZW50aWNhdG9yLFxuICAgICAgICByYXdUcmFuc2FjdGlvbjogcmVzcG9uc2VBcmdzLnJhd1R4blxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXF1ZXN0ID0gU2lnblRyYW5zYWN0aW9uUmVxdWVzdC5zZXJpYWxpemUodGhpcy5kYXBwSW5mbywgbm9ybWFsaXplZEFyZ3MpO1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXNwb25zZSA9IGF3YWl0IHRoaXMudHJhbnNwb3J0LnNlbmRSZXF1ZXN0KHNlcmlhbGl6ZWRSZXF1ZXN0KTtcbiAgICBjb25zdCByZXNwb25zZSA9IFNpZ25UcmFuc2FjdGlvblJlc3BvbnNlLmRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXNwb25zZSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmFyZ3M7XG4gIH1cbiAgYXN5bmMgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKGFyZ3MpIHtcbiAgICBjb25zdCB7IHNpZ25lckFkZHJlc3MgfSA9IGFyZ3M7XG4gICAgaWYgKGF3YWl0IHRoaXMuaXNJY0FjY291bnQoc2lnbmVyQWRkcmVzcykpIHtcbiAgICAgIGNvbnN0IHsgZXhwaXJhdGlvblRpbWVzdGFtcCwgZmVlUGF5ZXIsIGdhc1VuaXRQcmljZSwgbWF4R2FzQW1vdW50LCBuZXR3b3JrIH0gPSBhcmdzO1xuICAgICAgY29uc3QgYXB0b3NDb25maWcgPSBuZXcgQXB0b3NDb25maWcyKHsgbmV0d29yayB9KTtcbiAgICAgIGxldCBjb252ZXJ0ZWRBcmdzO1xuICAgICAgaWYgKGZlZVBheWVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IG5vcm1hbGl6ZVBheWxvYWRGb3JJQyhhcmdzLnBheWxvYWQsIGFwdG9zQ29uZmlnKTtcbiAgICAgICAgY29uc3QgcmF3VHhuID0gYXdhaXQgZ2VuZXJhdGVSYXdUcmFuc2FjdGlvbih7XG4gICAgICAgICAgYXB0b3NDb25maWcsXG4gICAgICAgICAgZmVlUGF5ZXJBZGRyZXNzOiBmZWVQYXllci5hZGRyZXNzLFxuICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIGdhc1VuaXRQcmljZSxcbiAgICAgICAgICAgIG1heEdhc0Ftb3VudFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICBzZW5kZXI6IHNpZ25lckFkZHJlc3NcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnZlcnRlZEFyZ3MgPSB7XG4gICAgICAgICAgZmVlUGF5ZXJBdXRoZW50aWNhdG9yOiBmZWVQYXllci5hdXRoZW50aWNhdG9yLFxuICAgICAgICAgIHJhd1R4bjogbmV3IEZlZVBheWVyUmF3VHJhbnNhY3Rpb24ocmF3VHhuLCBbXSwgZmVlUGF5ZXIuYWRkcmVzcylcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBub3JtYWxpemVQYXlsb2FkRm9ySUMoYXJncy5wYXlsb2FkKTtcbiAgICAgICAgY29udmVydGVkQXJncyA9IHtcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBleHBpcmF0aW9uVGltZXN0YW1wLFxuICAgICAgICAgICAgZ2FzVW5pdFByaWNlLFxuICAgICAgICAgICAgbWF4R2FzQW1vdW50XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXlsb2FkXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCB7IGhhc2ggfSA9IGF3YWl0IHRoaXMucGFpcmluZ0NsaWVudC5zaWduQW5kU3VibWl0VHJhbnNhY3Rpb24oc2lnbmVyQWRkcmVzcy50b1N0cmluZygpLCBjb252ZXJ0ZWRBcmdzLCB7XG4gICAgICAgIG5ldHdvcmtOYW1lOiBuZXR3b3JrXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtYWtlVXNlckFwcHJvdmFsKHsgdHhuSGFzaDogaGFzaCB9KTtcbiAgICB9XG4gICAgY29uc3Qgc2VyaWFsaXplZFJlcXVlc3QgPSBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0LnNlcmlhbGl6ZSh0aGlzLmRhcHBJbmZvLCBhcmdzKTtcbiAgICBjb25zdCBzZXJpYWxpemVkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydC5zZW5kUmVxdWVzdChzZXJpYWxpemVkUmVxdWVzdCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZS5kZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UpO1xuICAgIHJldHVybiByZXNwb25zZS5hcmdzO1xuICB9XG4gIC8vIGVuZHJlZ2lvblxufTtcblxuLy8gc3JjL0lDRGFwcENsaWVudC50c1xuaW1wb3J0IHsgY3JlYXRlRWQyNTUxOUtleVBhaXIgYXMgY3JlYXRlRWQyNTUxOUtleVBhaXIyLCBlbmNvZGVCYXNlNjQgYXMgZW5jb2RlQmFzZTY0MyB9IGZyb20gXCJAaWRlbnRpdHktY29ubmVjdC9jcnlwdG9cIjtcbmltcG9ydCB7IGlzQXhpb3NFcnJvciBhcyBpc0F4aW9zRXJyb3IyIH0gZnJvbSBcImF4aW9zXCI7XG5cbi8vIHNyYy9wcm9tcHQudHNcbnZhciBERUZBVUxUX1BST01QVF9TSVpFID0geyBoZWlnaHQ6IDY5NSwgd2lkdGg6IDQ2NSB9O1xudmFyIFBST01QVF9QT0xMRVJfSU5URVJWQUwgPSA1MDA7XG5mdW5jdGlvbiBvcGVuUHJvbXB0KHVybCwgc2l6ZSA9IERFRkFVTFRfUFJPTVBUX1NJWkUpIHtcbiAgY29uc3QgeyBoZWlnaHQsIHdpZHRoIH0gPSBzaXplO1xuICBjb25zdCBvcHRpb25zID0ge1xuICAgIGhlaWdodCxcbiAgICBsZWZ0OiB3aW5kb3cuc2NyZWVuTGVmdCArIE1hdGgucm91bmQoKHdpbmRvdy5vdXRlcldpZHRoIC0gd2lkdGgpIC8gMiksXG4gICAgcG9wdXA6IHRydWUsXG4gICAgdG9wOiB3aW5kb3cuc2NyZWVuVG9wICsgTWF0aC5yb3VuZCgod2luZG93Lm91dGVySGVpZ2h0IC0gaGVpZ2h0KSAvIDIpLFxuICAgIHdpZHRoXG4gIH07XG4gIGNvbnN0IHN0ck9wdGlvbnMgPSBPYmplY3QuZW50cmllcyhvcHRpb25zKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fT0ke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKS5yZWR1Y2UoKGFjYywgZW50cnkpID0+IGAke2FjY30sICR7ZW50cnl9YCk7XG4gIGNvbnN0IGhyZWYgPSB1cmwgaW5zdGFuY2VvZiBVUkwgPyB1cmwuaHJlZiA6IHVybDtcbiAgY29uc3QgcHJvbXB0V2luZG93ID0gd2luZG93Lm9wZW4oaHJlZiwgdm9pZCAwLCBzdHJPcHRpb25zKTtcbiAgaWYgKHByb21wdFdpbmRvdyA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IG9wZW4gcHJvbXB0XCIpO1xuICB9XG4gIHJldHVybiBwcm9tcHRXaW5kb3c7XG59XG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yUHJvbXB0UmVzcG9uc2UocHJvbXB0V2luZG93KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHtcbiAgICAgIG9uTWVzc2FnZTogKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc291cmNlICE9PSBwcm9tcHRXaW5kb3cpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGxpc3RlbmVycy5vbk1lc3NhZ2UpO1xuICAgICAgICBjbGVhclRpbWVvdXQobGlzdGVuZXJzLnByb21wdFBvbGxlcklkKTtcbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgYXJnczogbWVzc2FnZS5kYXRhLFxuICAgICAgICAgIHN0YXR1czogXCJhcHByb3ZlZFwiXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHByb21wdFBvbGxlcklkOiBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmIChwcm9tcHRXaW5kb3cuY2xvc2VkKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGxpc3RlbmVycy5vbk1lc3NhZ2UpO1xuICAgICAgICAgIGNsZWFyVGltZW91dChsaXN0ZW5lcnMucHJvbXB0UG9sbGVySWQpO1xuICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgc3RhdHVzOiBcImRpc21pc3NlZFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIFBST01QVF9QT0xMRVJfSU5URVJWQUwpXG4gICAgfTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbGlzdGVuZXJzLm9uTWVzc2FnZSk7XG4gIH0pO1xufVxuXG4vLyBzcmMvSUNEYXBwQ2xpZW50LnRzXG52YXIgSUNEYXBwQ2xpZW50ID0gY2xhc3MgZXh0ZW5kcyBBQ1BhaXJpbmdDbGllbnQge1xuICBjb25zdHJ1Y3RvcihkYXBwSWQsIHsgZnJvbnRlbmRCYXNlVVJMID0gREVGQVVMVF9GUk9OVEVORF9VUkwsIC4uLnBhaXJpbmdDbGllbnRDb25maWcgfSA9IHt9KSB7XG4gICAgc3VwZXIocGFpcmluZ0NsaWVudENvbmZpZyk7XG4gICAgdGhpcy5kYXBwSWQgPSBkYXBwSWQ7XG4gICAgdGhpcy5mcm9udGVuZEJhc2VVUkwgPSBmcm9udGVuZEJhc2VVUkw7XG4gIH1cbiAgYXN5bmMgY3JlYXRlUGFpcmluZ1JlcXVlc3QoZGFwcEVkMjU1MTlQdWJsaWNLZXlCNjQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2UucG9zdChcInYxL3BhaXJpbmcvXCIsIHtcbiAgICAgICAgZGFwcEVkMjU1MTlQdWJsaWNLZXlCNjQsXG4gICAgICAgIGRhcHBJZDogdGhpcy5kYXBwSWRcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuZGF0YS5wYWlyaW5nO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKGlzQXhpb3NFcnJvcjIoZXJyKSAmJiBlcnIucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UgPT09IFwiRGFwcCBub3QgZm91bmRcIikge1xuICAgICAgICB0aHJvdyBuZXcgVW5yZWdpc3RlcmVkRGFwcEVycm9yKCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG4gIC8vIHJlZ2lvbiBQdWJsaWMgQVBJXG4gIC8qKlxuICAgKiBSZXF1ZXN0cyBhIGNvbm5lY3Rpb24gdG8gYW4gYWNjb3VudCAoaW50ZXJuYWxseSBrbm93biBhcyBwYWlyaW5nKS5cbiAgICogQHJldHVybnMgZWl0aGVyIHRoZSBhZGRyZXNzIG9mIHRoZSBjb25uZWN0ZWQgYWNjb3VudCwgb3IgdW5kZWZpbmVkIGlmIHRoZVxuICAgKiBjb25uZWN0aW9uIHdhcyBjYW5jZWxsZWQuXG4gICAqL1xuICBhc3luYyBjb25uZWN0KCkge1xuICAgIGNvbnN0IHsgcHVibGljS2V5LCBzZWNyZXRLZXkgfSA9IGNyZWF0ZUVkMjU1MTlLZXlQYWlyMigpO1xuICAgIGNvbnN0IGRhcHBFZDI1NTE5UHVibGljS2V5QjY0ID0gZW5jb2RlQmFzZTY0MyhwdWJsaWNLZXkua2V5KTtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuZnJvbnRlbmRCYXNlVVJMfS9wYWlyaW5nYCk7XG4gICAgY29uc3QgcHJvbXB0V2luZG93ID0gYXdhaXQgb3BlblByb21wdCh1cmwuaHJlZik7XG4gICAgbGV0IHBhaXJpbmdJZDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGVuZGluZ1BhaXJpbmcgPSBhd2FpdCB0aGlzLmNyZWF0ZVBhaXJpbmdSZXF1ZXN0KGRhcHBFZDI1NTE5UHVibGljS2V5QjY0KTtcbiAgICAgIHBhaXJpbmdJZCA9IHBlbmRpbmdQYWlyaW5nLmlkO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcHJvbXB0V2luZG93LmNsb3NlKCk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicGFpcmluZ0lkXCIsIHBhaXJpbmdJZCk7XG4gICAgcHJvbXB0V2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmwuaHJlZjtcbiAgICBjb25zdCBwcm9tcHRSZXNwb25zZSA9IGF3YWl0IHdhaXRGb3JQcm9tcHRSZXNwb25zZShwcm9tcHRXaW5kb3cpO1xuICAgIGlmIChwcm9tcHRSZXNwb25zZS5zdGF0dXMgPT09IFwiZGlzbWlzc2VkXCIpIHtcbiAgICAgIHZvaWQgdGhpcy5kZWxldGVQYWlyaW5nKHBhaXJpbmdJZCwgc2VjcmV0S2V5LCBwdWJsaWNLZXkpO1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgY29uc3QgZmluYWxpemVkUGFpcmluZyA9IHByb21wdFJlc3BvbnNlLmFyZ3M7XG4gICAgYXdhaXQgdGhpcy5hZGRQYWlyaW5nKHsgcHVibGljS2V5LCBzZWNyZXRLZXkgfSwgZmluYWxpemVkUGFpcmluZyk7XG4gICAgcmV0dXJuIGZpbmFsaXplZFBhaXJpbmcuYWNjb3VudC5hY2NvdW50QWRkcmVzcztcbiAgfVxuICBhc3luYyBvZmZib2FyZChhZGRyZXNzKSB7XG4gICAgY29uc3QgcGFpcmluZyA9IGF3YWl0IHRoaXMuYWNjZXNzb3JzLmdldChhZGRyZXNzKTtcbiAgICBpZiAocGFpcmluZyA9PT0gdm9pZCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGFjY291bnQgaXMgbm90IHBhaXJlZFwiKTtcbiAgICB9XG4gICAgY29uc3Qgd2FsbGV0SWQgPSBwYWlyaW5nLmRhcHBXYWxsZXRJZDtcbiAgICBpZiAod2FsbGV0SWQgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBhY2NvdW50IGNhbm5vdCBiZSBvZmZib2FyZGVkXCIpO1xuICAgIH1cbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuZnJvbnRlbmRCYXNlVVJMfS9vZmZib2FyZGluZz93YWxsZXRJZD0ke3dhbGxldElkfWApO1xuICAgIGNvbnN0IHByb21wdFdpbmRvdyA9IG9wZW5Qcm9tcHQodXJsKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdhaXRGb3JQcm9tcHRSZXNwb25zZShwcm9tcHRXaW5kb3cpO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IFwiYXBwcm92ZWRcIiAmJiByZXNwb25zZS5hcmdzLm9mZmJvYXJkZWQpIHtcbiAgICAgIHRoaXMuZGlzY29ubmVjdChhZGRyZXNzKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gZW5kcmVnaW9uXG59O1xuXG4vLyBzcmMvS2V5bGVzc0NsaWVudC50c1xuaW1wb3J0IHtcbiAgQ29ubmVjdFJlcXVlc3QgYXMgQ29ubmVjdFJlcXVlc3QyLFxuICBDb25uZWN0UmVzcG9uc2UgYXMgQ29ubmVjdFJlc3BvbnNlMixcbiAgRGlzY29ubmVjdFJlcXVlc3QgYXMgRGlzY29ubmVjdFJlcXVlc3QyLFxuICBHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QgYXMgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0MixcbiAgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXNwb25zZSBhcyBHZXRDb25uZWN0ZWRBY2NvdW50c1Jlc3BvbnNlMixcbiAgSXNDb25uZWN0ZWRSZXF1ZXN0LFxuICBJc0Nvbm5lY3RlZFJlc3BvbnNlLFxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0IGFzIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QyLFxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZSBhcyBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZTIsXG4gIFNpZ25NZXNzYWdlUmVxdWVzdCBhcyBTaWduTWVzc2FnZVJlcXVlc3QyLFxuICBTaWduTWVzc2FnZVJlc3BvbnNlIGFzIFNpZ25NZXNzYWdlUmVzcG9uc2UyLFxuICBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0IGFzIFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLFxuICBTaWduVHJhbnNhY3Rpb25SZXNwb25zZSBhcyBTaWduVHJhbnNhY3Rpb25SZXNwb25zZTJcbn0gZnJvbSBcIkBhcHRvcy1jb25uZWN0L3dhbGxldC1hcGlcIjtcbmltcG9ydCB7IFdlYldhbGxldFRyYW5zcG9ydCBhcyBXZWJXYWxsZXRUcmFuc3BvcnQyIH0gZnJvbSBcIkBhcHRvcy1jb25uZWN0L3dlYi10cmFuc3BvcnRcIjtcbmltcG9ydCB7IE5ldHdvcmtOYW1lIGFzIE5ldHdvcmtOYW1lMyB9IGZyb20gXCJAaWRlbnRpdHktY29ubmVjdC9hcGlcIjtcbnZhciBBQ0tleWxlc3NDbGllbnQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHtcbiAgICBkYXBwSW1hZ2VVUkksXG4gICAgZGFwcE5hbWUsXG4gICAgZGVmYXVsdE5ldHdvcmtOYW1lID0gTmV0d29ya05hbWUzLk1BSU5ORVQsXG4gICAgZnJvbnRlbmRCYXNlVVJMID0gREVGQVVMVF9GUk9OVEVORF9VUkxcbiAgfSA9IHt9KSB7XG4gICAgdGhpcy5kZWZhdWx0TmV0d29ya05hbWUgPSBkZWZhdWx0TmV0d29ya05hbWU7XG4gICAgdGhpcy5kYXBwSW5mbyA9IHtcbiAgICAgIGRvbWFpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgIGltYWdlVVJJOiBkYXBwSW1hZ2VVUkksXG4gICAgICBuYW1lOiBkYXBwTmFtZSA/PyBkb2N1bWVudC50aXRsZVxuICAgIH07XG4gICAgdGhpcy50cmFuc3BvcnQgPSBuZXcgV2ViV2FsbGV0VHJhbnNwb3J0Mihmcm9udGVuZEJhc2VVUkwpO1xuICB9XG4gIC8vIHJlZ2lvbiBQdWJsaWMgQVBJXG4gIGFzeW5jIGlzQ29ubmVjdGVkKCkge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXF1ZXN0ID0gSXNDb25uZWN0ZWRSZXF1ZXN0LnNlcmlhbGl6ZSh0aGlzLmRhcHBJbmZvKTtcbiAgICBjb25zdCBzZXJpYWxpemVkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydC5zZW5kUmVxdWVzdChzZXJpYWxpemVkUmVxdWVzdCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBJc0Nvbm5lY3RlZFJlc3BvbnNlLmRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXNwb25zZSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmFyZ3M7XG4gIH1cbiAgYXN5bmMgZ2V0Q29ubmVjdGVkQWNjb3VudHMoKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZFJlcXVlc3QgPSBHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QyLnNlcmlhbGl6ZSh0aGlzLmRhcHBJbmZvKTtcbiAgICBjb25zdCBzZXJpYWxpemVkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydC5zZW5kUmVxdWVzdChzZXJpYWxpemVkUmVxdWVzdCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBHZXRDb25uZWN0ZWRBY2NvdW50c1Jlc3BvbnNlMi5kZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UpO1xuICAgIHJldHVybiByZXNwb25zZS5hcmdzO1xuICB9XG4gIGFzeW5jIGRpc2Nvbm5lY3QoKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZFJlcXVlc3QgPSBEaXNjb25uZWN0UmVxdWVzdDIuc2VyaWFsaXplKHRoaXMuZGFwcEluZm8pO1xuICAgIGF3YWl0IHRoaXMudHJhbnNwb3J0LnNlbmRSZXF1ZXN0KHNlcmlhbGl6ZWRSZXF1ZXN0KTtcbiAgfVxuICBhc3luYyBjb25uZWN0KCkge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXF1ZXN0ID0gQ29ubmVjdFJlcXVlc3QyLnNlcmlhbGl6ZSh0aGlzLmRhcHBJbmZvKTtcbiAgICBjb25zdCBzZXJpYWxpemVkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydC5zZW5kUmVxdWVzdChzZXJpYWxpemVkUmVxdWVzdCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBDb25uZWN0UmVzcG9uc2UyLmRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXNwb25zZSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmFyZ3M7XG4gIH1cbiAgYXN5bmMgc2lnbk1lc3NhZ2UoYXJncykge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRSZXF1ZXN0ID0gU2lnbk1lc3NhZ2VSZXF1ZXN0Mi5zZXJpYWxpemUodGhpcy5kYXBwSW5mbywgYXJncyk7XG4gICAgY29uc3Qgc2VyaWFsaXplZFJlc3BvbnNlID0gYXdhaXQgdGhpcy50cmFuc3BvcnQuc2VuZFJlcXVlc3Qoc2VyaWFsaXplZFJlcXVlc3QpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gU2lnbk1lc3NhZ2VSZXNwb25zZTIuZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuYXJncztcbiAgfVxuICBhc3luYyBzaWduVHJhbnNhY3Rpb24oYXJncykge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRBcmdzID0gXCJ0cmFuc2FjdGlvblwiIGluIGFyZ3MgPyBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Mi5ub3JtYWxpemVBcmdzKGFyZ3MpIDogYXJncztcbiAgICBjb25zdCBzZXJpYWxpemVkUmVxdWVzdCA9IFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLnNlcmlhbGl6ZSh0aGlzLmRhcHBJbmZvLCBub3JtYWxpemVkQXJncyk7XG4gICAgY29uc3Qgc2VyaWFsaXplZFJlc3BvbnNlID0gYXdhaXQgdGhpcy50cmFuc3BvcnQuc2VuZFJlcXVlc3Qoc2VyaWFsaXplZFJlcXVlc3QpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gU2lnblRyYW5zYWN0aW9uUmVzcG9uc2UyLmRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXNwb25zZSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmFyZ3M7XG4gIH1cbiAgYXN5bmMgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKGFyZ3MpIHtcbiAgICBjb25zdCBzZXJpYWxpemVkUmVxdWVzdCA9IFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QyLnNlcmlhbGl6ZSh0aGlzLmRhcHBJbmZvLCBhcmdzKTtcbiAgICBjb25zdCBzZXJpYWxpemVkUmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRyYW5zcG9ydC5zZW5kUmVxdWVzdChzZXJpYWxpemVkUmVxdWVzdCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZTIuZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuYXJncztcbiAgfVxuICAvLyBlbmRyZWdpb25cbn07XG5leHBvcnQge1xuICBBQ0RhcHBDbGllbnQsXG4gIEFDS2V5bGVzc0NsaWVudCxcbiAgREFQUF9QQUlSSU5HU19XSU5ET1dfU1RPUkFHRV9LRVksXG4gIElDRGFwcENsaWVudCxcbiAgd2luZG93U3RhdGVBY2Nlc3NvcnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@identity-connect/dapp-sdk/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@identity-connect/wallet-api/dist/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@identity-connect/wallet-api/dist/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bcsDeserialize: () => (/* binding */ bcsDeserialize),\n/* harmony export */   bcsSerialize: () => (/* binding */ bcsSerialize),\n/* harmony export */   deserializeJsonTransactionPayload: () => (/* binding */ deserializeJsonTransactionPayload),\n/* harmony export */   deserializeRawTransaction: () => (/* binding */ deserializeRawTransaction),\n/* harmony export */   deserializeSignAndSubmitTransactionRequestArgs: () => (/* binding */ deserializeSignAndSubmitTransactionRequestArgs),\n/* harmony export */   deserializeSignTransactionRequestArgs: () => (/* binding */ deserializeSignTransactionRequestArgs),\n/* harmony export */   deserializeSignTransactionResponseArgs: () => (/* binding */ deserializeSignTransactionResponseArgs),\n/* harmony export */   isBcsSerializable: () => (/* binding */ isBcsSerializable),\n/* harmony export */   makeFullMessage: () => (/* binding */ makeFullMessage),\n/* harmony export */   serializeJsonTransactionPayload: () => (/* binding */ serializeJsonTransactionPayload),\n/* harmony export */   serializeRawTransaction: () => (/* binding */ serializeRawTransaction),\n/* harmony export */   serializeSignAndSubmitTransactionRequestArgs: () => (/* binding */ serializeSignAndSubmitTransactionRequestArgs),\n/* harmony export */   serializeSignTransactionRequestArgs: () => (/* binding */ serializeSignTransactionRequestArgs),\n/* harmony export */   serializeSignTransactionResponseArgs: () => (/* binding */ serializeSignTransactionResponseArgs)\n/* harmony export */ });\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/./node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var aptos__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aptos */ \"(ssr)/./node_modules/aptos/dist/index.mjs\");\n// src/serialization/bcsSerialization.ts\n\n\nfunction isBcsSerializableV1(value) {\n  return value?.serialize !== void 0;\n}\nfunction isBcsSerializableV2(value) {\n  return value?.serialize !== void 0 && value?.bcsToBytes !== void 0 && value?.bcsToHex !== void 0;\n}\nfunction isBcsSerializable(value) {\n  return isBcsSerializableV1(value) || isBcsSerializableV2(value);\n}\nfunction bcsSerialize(serializable) {\n  if (isBcsSerializableV2(serializable)) {\n    return serializable.bcsToHex().toString();\n  }\n  const serializedValueBytes = aptos__WEBPACK_IMPORTED_MODULE_1__.BCS.bcsToBytes(serializable);\n  return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Hex.fromHexInput(serializedValueBytes).toString();\n}\nfunction bcsDeserialize(deserializableClass, serializedValue) {\n  const serializedValueBytes = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Hex.fromHexString(serializedValue).toUint8Array();\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(serializedValueBytes);\n  return deserializableClass.deserialize(deserializer);\n}\n\n// src/serialization/jsonPayload.ts\n\n\n// src/serialization/error.ts\nvar UnexpectedValueError = class _UnexpectedValueError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"UnexpectedValueError\";\n    Object.setPrototypeOf(this, _UnexpectedValueError.prototype);\n  }\n};\n\n// src/serialization/jsonPayload.ts\nfunction isSerializedUint8Array(arg) {\n  return arg?.type === \"Uint8Array\" && typeof arg?.value === \"string\";\n}\nfunction serializeEntryFunctionArg(arg) {\n  if (arg instanceof Uint8Array) {\n    return {\n      type: \"Uint8Array\",\n      value: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Hex.fromHexInput(arg).toString()\n    };\n  }\n  if (Array.isArray(arg)) {\n    return arg.map(serializeEntryFunctionArg);\n  }\n  return arg;\n}\nfunction deserializeEntryFunctionArg(arg) {\n  if (isSerializedUint8Array(arg)) {\n    return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Hex.fromHexInput(arg.value).toUint8Array();\n  }\n  if (Array.isArray(arg)) {\n    return arg.map(deserializeEntryFunctionArg);\n  }\n  return arg;\n}\nfunction serializeEntryFunctionPayload(payload) {\n  const normalizedArgs = payload.arguments.map(serializeEntryFunctionArg);\n  return {\n    ...payload,\n    arguments: normalizedArgs,\n    type: \"entry_function_payload\"\n  };\n}\nfunction deserializeEntryFunctionPayload(payload) {\n  const deserializedArgs = payload.arguments.map(deserializeEntryFunctionArg);\n  return {\n    ...payload,\n    arguments: deserializedArgs,\n    type: \"entry_function_payload\"\n  };\n}\nfunction serializeJsonTransactionPayload(payload) {\n  if (payload.type === \"entry_function_payload\" || payload.type === void 0) {\n    return serializeEntryFunctionPayload(payload);\n  }\n  if (payload.type === \"multisig_payload\") {\n    const innerPayload = payload.transaction_payload !== void 0 ? serializeEntryFunctionPayload(payload.transaction_payload) : void 0;\n    return { ...payload, transaction_payload: innerPayload };\n  }\n  throw new UnexpectedValueError();\n}\nfunction deserializeJsonTransactionPayload(payload) {\n  if (payload.type === \"entry_function_payload\" || payload.type === void 0) {\n    return deserializeEntryFunctionPayload(payload);\n  }\n  if (payload.type === \"multisig_payload\") {\n    const innerPayload = payload.transaction_payload !== void 0 ? deserializeEntryFunctionPayload(payload.transaction_payload) : void 0;\n    return { ...payload, transaction_payload: innerPayload };\n  }\n  throw new UnexpectedValueError();\n}\n\n// src/serialization/rawTxn.ts\n\nfunction serializeRawTransaction(rawTxn) {\n  const value = bcsSerialize(rawTxn);\n  if (\"fee_payer_address\" in rawTxn) {\n    return { type: \"fee_payer_raw_txn\", value };\n  }\n  if (\"secondary_signer_addresses\" in rawTxn) {\n    return { type: \"multi_agent_raw_txn\", value };\n  }\n  if (\"chain_id\" in rawTxn) {\n    return { type: \"raw_txn\", value };\n  }\n  throw new UnexpectedValueError(\"Invalid raw transaction type\");\n}\nfunction deserializeRawTransaction(serialized) {\n  switch (serialized.type) {\n    case \"raw_txn\":\n      return bcsDeserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.RawTransaction, serialized.value);\n    case \"fee_payer_raw_txn\":\n      return bcsDeserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.RawTransactionWithData, serialized.value);\n    case \"multi_agent_raw_txn\":\n      return bcsDeserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.RawTransactionWithData, serialized.value);\n    default:\n      throw new UnexpectedValueError(\"Invalid raw transaction type\");\n  }\n}\n\n// src/serialization/signAndSubmitTransactionRequestArgs.ts\n\nfunction serializeSignAndSubmitTransactionRequestArgs(args) {\n  if (\"payload\" in args) {\n    const serializedPayload = isBcsSerializable(args.payload) ? bcsSerialize(args.payload) : serializeJsonTransactionPayload(args.payload);\n    return { options: args.options, payload: serializedPayload };\n  }\n  if (\"feePayerAuthenticator\" in args) {\n    return {\n      feePayerAuthenticator: bcsSerialize(args.feePayerAuthenticator),\n      rawTxn: serializeRawTransaction(args.rawTxn)\n    };\n  }\n  if (\"rawTxn\" in args) {\n    return { rawTxn: serializeRawTransaction(args.rawTxn) };\n  }\n  throw new UnexpectedValueError();\n}\nfunction deserializeSignAndSubmitTransactionRequestArgs(args) {\n  if (\"payload\" in args) {\n    const payload = typeof args.payload === \"string\" ? bcsDeserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.TransactionPayload, args.payload) : deserializeJsonTransactionPayload(args.payload);\n    return { options: args.options, payload };\n  }\n  if (\"feePayerAuthenticator\" in args) {\n    const deserializedRawTxn = deserializeRawTransaction(args.rawTxn);\n    const feePayerAuthenticator = bcsDeserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAuthenticator, args.feePayerAuthenticator);\n    return { feePayerAuthenticator, rawTxn: deserializedRawTxn };\n  }\n  if (\"rawTxn\" in args) {\n    const deserializedRawTxn = deserializeRawTransaction(args.rawTxn);\n    return { rawTxn: deserializedRawTxn };\n  }\n  throw new UnexpectedValueError();\n}\n\n// src/serialization/signTransactionRequestArgs.ts\n\nfunction serializeSignTransactionRequestArgs(args) {\n  if (\"payload\" in args) {\n    const serializedPayload = isBcsSerializable(args.payload) ? bcsSerialize(args.payload) : serializeJsonTransactionPayload(args.payload);\n    return { options: args.options, payload: serializedPayload };\n  }\n  if (\"rawTxn\" in args) {\n    const serializedRawTxn = serializeRawTransaction(args.rawTxn);\n    return { rawTxn: serializedRawTxn };\n  }\n  throw new UnexpectedValueError();\n}\nfunction deserializeSignTransactionRequestArgs(args) {\n  if (\"payload\" in args) {\n    const payload = typeof args.payload === \"string\" ? bcsDeserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.TransactionPayload, args.payload) : deserializeJsonTransactionPayload(args.payload);\n    return { options: args.options, payload };\n  }\n  if (\"rawTxn\" in args) {\n    const deserializedRawTxn = deserializeRawTransaction(args.rawTxn);\n    return { rawTxn: deserializedRawTxn };\n  }\n  throw new UnexpectedValueError();\n}\n\n// src/serialization/signTransactionResponseArgs.ts\n\nfunction serializeSignTransactionResponseArgs(args) {\n  const accountAuthenticator = bcsSerialize(args.accountAuthenticator);\n  if (\"rawTxn\" in args) {\n    const rawTxn = bcsSerialize(args.rawTxn);\n    return { accountAuthenticator, rawTxn };\n  }\n  return { accountAuthenticator };\n}\nfunction deserializeSignTransactionResponseArgs(args) {\n  const accountAuthenticator = bcsDeserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAuthenticator, args.accountAuthenticator);\n  if (\"rawTxn\" in args) {\n    const rawTxn = bcsDeserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.RawTransaction, args.rawTxn);\n    return { accountAuthenticator, rawTxn };\n  }\n  return { accountAuthenticator };\n}\n\n// src/utils/makeFullMessage.ts\nvar prefix = \"APTOS\";\nfunction makeFullMessage(params, flags) {\n  let fullMessage = prefix;\n  if (flags.address) {\n    fullMessage += `\naddress: ${params.address}`;\n  }\n  if (flags.application) {\n    fullMessage += `\napplication: ${params.application}`;\n  }\n  if (flags.chainId) {\n    fullMessage += `\nchainId: ${params.chainId}`;\n  }\n  fullMessage += `\nmessage: ${params.message}`;\n  fullMessage += `\nnonce: ${params.nonce}`;\n  return {\n    fullMessage,\n    prefix\n  };\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGlkZW50aXR5LWNvbm5lY3Qvd2FsbGV0LWFwaS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDdUQ7QUFDM0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isc0NBQUc7QUFDbEMsU0FBUyxtREFBRztBQUNaO0FBQ0E7QUFDQSwrQkFBK0IsbURBQUc7QUFDbEMsMkJBQTJCLDREQUFZO0FBQ3ZDO0FBQ0E7O0FBRUE7QUFDaUQ7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbURBQUk7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxtREFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFJNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQWM7QUFDMUM7QUFDQSw0QkFBNEIsc0VBQXNCO0FBQ2xEO0FBQ0EsNEJBQTRCLHNFQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUM4RTtBQUM5RTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFLGtFQUFrQjtBQUN4RixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaURBQWlELG9FQUFvQjtBQUNyRSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUMrRTtBQUMvRTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRUFBc0Usa0VBQW1CO0FBQ3pGLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ3NIO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSw4Q0FBOEMsb0VBQXFCO0FBQ25FO0FBQ0Esa0NBQWtDLDhEQUFlO0FBQ2pELGFBQWE7QUFDYjtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtQkFBbUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxlQUFlO0FBQzFCO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUI7QUFDQSxTQUFTLGFBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWdCRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXB0b2dvdGNoaS1yYW5kb20tbWludC1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BpZGVudGl0eS1jb25uZWN0L3dhbGxldC1hcGkvZGlzdC9pbmRleC5tanM/YjNlZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvc2VyaWFsaXphdGlvbi9iY3NTZXJpYWxpemF0aW9uLnRzXG5pbXBvcnQgeyBEZXNlcmlhbGl6ZXIsIEhleCB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IEJDUyB9IGZyb20gXCJhcHRvc1wiO1xuZnVuY3Rpb24gaXNCY3NTZXJpYWxpemFibGVWMSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU/LnNlcmlhbGl6ZSAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gaXNCY3NTZXJpYWxpemFibGVWMih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU/LnNlcmlhbGl6ZSAhPT0gdm9pZCAwICYmIHZhbHVlPy5iY3NUb0J5dGVzICE9PSB2b2lkIDAgJiYgdmFsdWU/LmJjc1RvSGV4ICE9PSB2b2lkIDA7XG59XG5mdW5jdGlvbiBpc0Jjc1NlcmlhbGl6YWJsZSh2YWx1ZSkge1xuICByZXR1cm4gaXNCY3NTZXJpYWxpemFibGVWMSh2YWx1ZSkgfHwgaXNCY3NTZXJpYWxpemFibGVWMih2YWx1ZSk7XG59XG5mdW5jdGlvbiBiY3NTZXJpYWxpemUoc2VyaWFsaXphYmxlKSB7XG4gIGlmIChpc0Jjc1NlcmlhbGl6YWJsZVYyKHNlcmlhbGl6YWJsZSkpIHtcbiAgICByZXR1cm4gc2VyaWFsaXphYmxlLmJjc1RvSGV4KCkudG9TdHJpbmcoKTtcbiAgfVxuICBjb25zdCBzZXJpYWxpemVkVmFsdWVCeXRlcyA9IEJDUy5iY3NUb0J5dGVzKHNlcmlhbGl6YWJsZSk7XG4gIHJldHVybiBIZXguZnJvbUhleElucHV0KHNlcmlhbGl6ZWRWYWx1ZUJ5dGVzKS50b1N0cmluZygpO1xufVxuZnVuY3Rpb24gYmNzRGVzZXJpYWxpemUoZGVzZXJpYWxpemFibGVDbGFzcywgc2VyaWFsaXplZFZhbHVlKSB7XG4gIGNvbnN0IHNlcmlhbGl6ZWRWYWx1ZUJ5dGVzID0gSGV4LmZyb21IZXhTdHJpbmcoc2VyaWFsaXplZFZhbHVlKS50b1VpbnQ4QXJyYXkoKTtcbiAgY29uc3QgZGVzZXJpYWxpemVyID0gbmV3IERlc2VyaWFsaXplcihzZXJpYWxpemVkVmFsdWVCeXRlcyk7XG4gIHJldHVybiBkZXNlcmlhbGl6YWJsZUNsYXNzLmRlc2VyaWFsaXplKGRlc2VyaWFsaXplcik7XG59XG5cbi8vIHNyYy9zZXJpYWxpemF0aW9uL2pzb25QYXlsb2FkLnRzXG5pbXBvcnQgeyBIZXggYXMgSGV4MiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcblxuLy8gc3JjL3NlcmlhbGl6YXRpb24vZXJyb3IudHNcbnZhciBVbmV4cGVjdGVkVmFsdWVFcnJvciA9IGNsYXNzIF9VbmV4cGVjdGVkVmFsdWVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiVW5leHBlY3RlZFZhbHVlRXJyb3JcIjtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgX1VuZXhwZWN0ZWRWYWx1ZUVycm9yLnByb3RvdHlwZSk7XG4gIH1cbn07XG5cbi8vIHNyYy9zZXJpYWxpemF0aW9uL2pzb25QYXlsb2FkLnRzXG5mdW5jdGlvbiBpc1NlcmlhbGl6ZWRVaW50OEFycmF5KGFyZykge1xuICByZXR1cm4gYXJnPy50eXBlID09PSBcIlVpbnQ4QXJyYXlcIiAmJiB0eXBlb2YgYXJnPy52YWx1ZSA9PT0gXCJzdHJpbmdcIjtcbn1cbmZ1bmN0aW9uIHNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25BcmcoYXJnKSB7XG4gIGlmIChhcmcgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiVWludDhBcnJheVwiLFxuICAgICAgdmFsdWU6IEhleDIuZnJvbUhleElucHV0KGFyZykudG9TdHJpbmcoKVxuICAgIH07XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuICAgIHJldHVybiBhcmcubWFwKHNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25BcmcpO1xuICB9XG4gIHJldHVybiBhcmc7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25BcmcoYXJnKSB7XG4gIGlmIChpc1NlcmlhbGl6ZWRVaW50OEFycmF5KGFyZykpIHtcbiAgICByZXR1cm4gSGV4Mi5mcm9tSGV4SW5wdXQoYXJnLnZhbHVlKS50b1VpbnQ4QXJyYXkoKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgcmV0dXJuIGFyZy5tYXAoZGVzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJnKTtcbiAgfVxuICByZXR1cm4gYXJnO1xufVxuZnVuY3Rpb24gc2VyaWFsaXplRW50cnlGdW5jdGlvblBheWxvYWQocGF5bG9hZCkge1xuICBjb25zdCBub3JtYWxpemVkQXJncyA9IHBheWxvYWQuYXJndW1lbnRzLm1hcChzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJnKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5wYXlsb2FkLFxuICAgIGFyZ3VtZW50czogbm9ybWFsaXplZEFyZ3MsXG4gICAgdHlwZTogXCJlbnRyeV9mdW5jdGlvbl9wYXlsb2FkXCJcbiAgfTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplRW50cnlGdW5jdGlvblBheWxvYWQocGF5bG9hZCkge1xuICBjb25zdCBkZXNlcmlhbGl6ZWRBcmdzID0gcGF5bG9hZC5hcmd1bWVudHMubWFwKGRlc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZyk7XG4gIHJldHVybiB7XG4gICAgLi4ucGF5bG9hZCxcbiAgICBhcmd1bWVudHM6IGRlc2VyaWFsaXplZEFyZ3MsXG4gICAgdHlwZTogXCJlbnRyeV9mdW5jdGlvbl9wYXlsb2FkXCJcbiAgfTtcbn1cbmZ1bmN0aW9uIHNlcmlhbGl6ZUpzb25UcmFuc2FjdGlvblBheWxvYWQocGF5bG9hZCkge1xuICBpZiAocGF5bG9hZC50eXBlID09PSBcImVudHJ5X2Z1bmN0aW9uX3BheWxvYWRcIiB8fCBwYXlsb2FkLnR5cGUgPT09IHZvaWQgMCkge1xuICAgIHJldHVybiBzZXJpYWxpemVFbnRyeUZ1bmN0aW9uUGF5bG9hZChwYXlsb2FkKTtcbiAgfVxuICBpZiAocGF5bG9hZC50eXBlID09PSBcIm11bHRpc2lnX3BheWxvYWRcIikge1xuICAgIGNvbnN0IGlubmVyUGF5bG9hZCA9IHBheWxvYWQudHJhbnNhY3Rpb25fcGF5bG9hZCAhPT0gdm9pZCAwID8gc2VyaWFsaXplRW50cnlGdW5jdGlvblBheWxvYWQocGF5bG9hZC50cmFuc2FjdGlvbl9wYXlsb2FkKSA6IHZvaWQgMDtcbiAgICByZXR1cm4geyAuLi5wYXlsb2FkLCB0cmFuc2FjdGlvbl9wYXlsb2FkOiBpbm5lclBheWxvYWQgfTtcbiAgfVxuICB0aHJvdyBuZXcgVW5leHBlY3RlZFZhbHVlRXJyb3IoKTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplSnNvblRyYW5zYWN0aW9uUGF5bG9hZChwYXlsb2FkKSB7XG4gIGlmIChwYXlsb2FkLnR5cGUgPT09IFwiZW50cnlfZnVuY3Rpb25fcGF5bG9hZFwiIHx8IHBheWxvYWQudHlwZSA9PT0gdm9pZCAwKSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplRW50cnlGdW5jdGlvblBheWxvYWQocGF5bG9hZCk7XG4gIH1cbiAgaWYgKHBheWxvYWQudHlwZSA9PT0gXCJtdWx0aXNpZ19wYXlsb2FkXCIpIHtcbiAgICBjb25zdCBpbm5lclBheWxvYWQgPSBwYXlsb2FkLnRyYW5zYWN0aW9uX3BheWxvYWQgIT09IHZvaWQgMCA/IGRlc2VyaWFsaXplRW50cnlGdW5jdGlvblBheWxvYWQocGF5bG9hZC50cmFuc2FjdGlvbl9wYXlsb2FkKSA6IHZvaWQgMDtcbiAgICByZXR1cm4geyAuLi5wYXlsb2FkLCB0cmFuc2FjdGlvbl9wYXlsb2FkOiBpbm5lclBheWxvYWQgfTtcbiAgfVxuICB0aHJvdyBuZXcgVW5leHBlY3RlZFZhbHVlRXJyb3IoKTtcbn1cblxuLy8gc3JjL3NlcmlhbGl6YXRpb24vcmF3VHhuLnRzXG5pbXBvcnQge1xuICBSYXdUcmFuc2FjdGlvbixcbiAgUmF3VHJhbnNhY3Rpb25XaXRoRGF0YVxufSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5mdW5jdGlvbiBzZXJpYWxpemVSYXdUcmFuc2FjdGlvbihyYXdUeG4pIHtcbiAgY29uc3QgdmFsdWUgPSBiY3NTZXJpYWxpemUocmF3VHhuKTtcbiAgaWYgKFwiZmVlX3BheWVyX2FkZHJlc3NcIiBpbiByYXdUeG4pIHtcbiAgICByZXR1cm4geyB0eXBlOiBcImZlZV9wYXllcl9yYXdfdHhuXCIsIHZhbHVlIH07XG4gIH1cbiAgaWYgKFwic2Vjb25kYXJ5X3NpZ25lcl9hZGRyZXNzZXNcIiBpbiByYXdUeG4pIHtcbiAgICByZXR1cm4geyB0eXBlOiBcIm11bHRpX2FnZW50X3Jhd190eG5cIiwgdmFsdWUgfTtcbiAgfVxuICBpZiAoXCJjaGFpbl9pZFwiIGluIHJhd1R4bikge1xuICAgIHJldHVybiB7IHR5cGU6IFwicmF3X3R4blwiLCB2YWx1ZSB9O1xuICB9XG4gIHRocm93IG5ldyBVbmV4cGVjdGVkVmFsdWVFcnJvcihcIkludmFsaWQgcmF3IHRyYW5zYWN0aW9uIHR5cGVcIik7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVJhd1RyYW5zYWN0aW9uKHNlcmlhbGl6ZWQpIHtcbiAgc3dpdGNoIChzZXJpYWxpemVkLnR5cGUpIHtcbiAgICBjYXNlIFwicmF3X3R4blwiOlxuICAgICAgcmV0dXJuIGJjc0Rlc2VyaWFsaXplKFJhd1RyYW5zYWN0aW9uLCBzZXJpYWxpemVkLnZhbHVlKTtcbiAgICBjYXNlIFwiZmVlX3BheWVyX3Jhd190eG5cIjpcbiAgICAgIHJldHVybiBiY3NEZXNlcmlhbGl6ZShSYXdUcmFuc2FjdGlvbldpdGhEYXRhLCBzZXJpYWxpemVkLnZhbHVlKTtcbiAgICBjYXNlIFwibXVsdGlfYWdlbnRfcmF3X3R4blwiOlxuICAgICAgcmV0dXJuIGJjc0Rlc2VyaWFsaXplKFJhd1RyYW5zYWN0aW9uV2l0aERhdGEsIHNlcmlhbGl6ZWQudmFsdWUpO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgVW5leHBlY3RlZFZhbHVlRXJyb3IoXCJJbnZhbGlkIHJhdyB0cmFuc2FjdGlvbiB0eXBlXCIpO1xuICB9XG59XG5cbi8vIHNyYy9zZXJpYWxpemF0aW9uL3NpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3RBcmdzLnRzXG5pbXBvcnQgeyBBY2NvdW50QXV0aGVudGljYXRvciwgVHJhbnNhY3Rpb25QYXlsb2FkIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuZnVuY3Rpb24gc2VyaWFsaXplU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdEFyZ3MoYXJncykge1xuICBpZiAoXCJwYXlsb2FkXCIgaW4gYXJncykge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRQYXlsb2FkID0gaXNCY3NTZXJpYWxpemFibGUoYXJncy5wYXlsb2FkKSA/IGJjc1NlcmlhbGl6ZShhcmdzLnBheWxvYWQpIDogc2VyaWFsaXplSnNvblRyYW5zYWN0aW9uUGF5bG9hZChhcmdzLnBheWxvYWQpO1xuICAgIHJldHVybiB7IG9wdGlvbnM6IGFyZ3Mub3B0aW9ucywgcGF5bG9hZDogc2VyaWFsaXplZFBheWxvYWQgfTtcbiAgfVxuICBpZiAoXCJmZWVQYXllckF1dGhlbnRpY2F0b3JcIiBpbiBhcmdzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZlZVBheWVyQXV0aGVudGljYXRvcjogYmNzU2VyaWFsaXplKGFyZ3MuZmVlUGF5ZXJBdXRoZW50aWNhdG9yKSxcbiAgICAgIHJhd1R4bjogc2VyaWFsaXplUmF3VHJhbnNhY3Rpb24oYXJncy5yYXdUeG4pXG4gICAgfTtcbiAgfVxuICBpZiAoXCJyYXdUeG5cIiBpbiBhcmdzKSB7XG4gICAgcmV0dXJuIHsgcmF3VHhuOiBzZXJpYWxpemVSYXdUcmFuc2FjdGlvbihhcmdzLnJhd1R4bikgfTtcbiAgfVxuICB0aHJvdyBuZXcgVW5leHBlY3RlZFZhbHVlRXJyb3IoKTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdEFyZ3MoYXJncykge1xuICBpZiAoXCJwYXlsb2FkXCIgaW4gYXJncykge1xuICAgIGNvbnN0IHBheWxvYWQgPSB0eXBlb2YgYXJncy5wYXlsb2FkID09PSBcInN0cmluZ1wiID8gYmNzRGVzZXJpYWxpemUoVHJhbnNhY3Rpb25QYXlsb2FkLCBhcmdzLnBheWxvYWQpIDogZGVzZXJpYWxpemVKc29uVHJhbnNhY3Rpb25QYXlsb2FkKGFyZ3MucGF5bG9hZCk7XG4gICAgcmV0dXJuIHsgb3B0aW9uczogYXJncy5vcHRpb25zLCBwYXlsb2FkIH07XG4gIH1cbiAgaWYgKFwiZmVlUGF5ZXJBdXRoZW50aWNhdG9yXCIgaW4gYXJncykge1xuICAgIGNvbnN0IGRlc2VyaWFsaXplZFJhd1R4biA9IGRlc2VyaWFsaXplUmF3VHJhbnNhY3Rpb24oYXJncy5yYXdUeG4pO1xuICAgIGNvbnN0IGZlZVBheWVyQXV0aGVudGljYXRvciA9IGJjc0Rlc2VyaWFsaXplKEFjY291bnRBdXRoZW50aWNhdG9yLCBhcmdzLmZlZVBheWVyQXV0aGVudGljYXRvcik7XG4gICAgcmV0dXJuIHsgZmVlUGF5ZXJBdXRoZW50aWNhdG9yLCByYXdUeG46IGRlc2VyaWFsaXplZFJhd1R4biB9O1xuICB9XG4gIGlmIChcInJhd1R4blwiIGluIGFyZ3MpIHtcbiAgICBjb25zdCBkZXNlcmlhbGl6ZWRSYXdUeG4gPSBkZXNlcmlhbGl6ZVJhd1RyYW5zYWN0aW9uKGFyZ3MucmF3VHhuKTtcbiAgICByZXR1cm4geyByYXdUeG46IGRlc2VyaWFsaXplZFJhd1R4biB9O1xuICB9XG4gIHRocm93IG5ldyBVbmV4cGVjdGVkVmFsdWVFcnJvcigpO1xufVxuXG4vLyBzcmMvc2VyaWFsaXphdGlvbi9zaWduVHJhbnNhY3Rpb25SZXF1ZXN0QXJncy50c1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25QYXlsb2FkIGFzIFRyYW5zYWN0aW9uUGF5bG9hZDIgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5mdW5jdGlvbiBzZXJpYWxpemVTaWduVHJhbnNhY3Rpb25SZXF1ZXN0QXJncyhhcmdzKSB7XG4gIGlmIChcInBheWxvYWRcIiBpbiBhcmdzKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZFBheWxvYWQgPSBpc0Jjc1NlcmlhbGl6YWJsZShhcmdzLnBheWxvYWQpID8gYmNzU2VyaWFsaXplKGFyZ3MucGF5bG9hZCkgOiBzZXJpYWxpemVKc29uVHJhbnNhY3Rpb25QYXlsb2FkKGFyZ3MucGF5bG9hZCk7XG4gICAgcmV0dXJuIHsgb3B0aW9uczogYXJncy5vcHRpb25zLCBwYXlsb2FkOiBzZXJpYWxpemVkUGF5bG9hZCB9O1xuICB9XG4gIGlmIChcInJhd1R4blwiIGluIGFyZ3MpIHtcbiAgICBjb25zdCBzZXJpYWxpemVkUmF3VHhuID0gc2VyaWFsaXplUmF3VHJhbnNhY3Rpb24oYXJncy5yYXdUeG4pO1xuICAgIHJldHVybiB7IHJhd1R4bjogc2VyaWFsaXplZFJhd1R4biB9O1xuICB9XG4gIHRocm93IG5ldyBVbmV4cGVjdGVkVmFsdWVFcnJvcigpO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVTaWduVHJhbnNhY3Rpb25SZXF1ZXN0QXJncyhhcmdzKSB7XG4gIGlmIChcInBheWxvYWRcIiBpbiBhcmdzKSB7XG4gICAgY29uc3QgcGF5bG9hZCA9IHR5cGVvZiBhcmdzLnBheWxvYWQgPT09IFwic3RyaW5nXCIgPyBiY3NEZXNlcmlhbGl6ZShUcmFuc2FjdGlvblBheWxvYWQyLCBhcmdzLnBheWxvYWQpIDogZGVzZXJpYWxpemVKc29uVHJhbnNhY3Rpb25QYXlsb2FkKGFyZ3MucGF5bG9hZCk7XG4gICAgcmV0dXJuIHsgb3B0aW9uczogYXJncy5vcHRpb25zLCBwYXlsb2FkIH07XG4gIH1cbiAgaWYgKFwicmF3VHhuXCIgaW4gYXJncykge1xuICAgIGNvbnN0IGRlc2VyaWFsaXplZFJhd1R4biA9IGRlc2VyaWFsaXplUmF3VHJhbnNhY3Rpb24oYXJncy5yYXdUeG4pO1xuICAgIHJldHVybiB7IHJhd1R4bjogZGVzZXJpYWxpemVkUmF3VHhuIH07XG4gIH1cbiAgdGhyb3cgbmV3IFVuZXhwZWN0ZWRWYWx1ZUVycm9yKCk7XG59XG5cbi8vIHNyYy9zZXJpYWxpemF0aW9uL3NpZ25UcmFuc2FjdGlvblJlc3BvbnNlQXJncy50c1xuaW1wb3J0IHsgQWNjb3VudEF1dGhlbnRpY2F0b3IgYXMgQWNjb3VudEF1dGhlbnRpY2F0b3IyLCBSYXdUcmFuc2FjdGlvbiBhcyBSYXdUcmFuc2FjdGlvbjIgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5mdW5jdGlvbiBzZXJpYWxpemVTaWduVHJhbnNhY3Rpb25SZXNwb25zZUFyZ3MoYXJncykge1xuICBjb25zdCBhY2NvdW50QXV0aGVudGljYXRvciA9IGJjc1NlcmlhbGl6ZShhcmdzLmFjY291bnRBdXRoZW50aWNhdG9yKTtcbiAgaWYgKFwicmF3VHhuXCIgaW4gYXJncykge1xuICAgIGNvbnN0IHJhd1R4biA9IGJjc1NlcmlhbGl6ZShhcmdzLnJhd1R4bik7XG4gICAgcmV0dXJuIHsgYWNjb3VudEF1dGhlbnRpY2F0b3IsIHJhd1R4biB9O1xuICB9XG4gIHJldHVybiB7IGFjY291bnRBdXRoZW50aWNhdG9yIH07XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVNpZ25UcmFuc2FjdGlvblJlc3BvbnNlQXJncyhhcmdzKSB7XG4gIGNvbnN0IGFjY291bnRBdXRoZW50aWNhdG9yID0gYmNzRGVzZXJpYWxpemUoQWNjb3VudEF1dGhlbnRpY2F0b3IyLCBhcmdzLmFjY291bnRBdXRoZW50aWNhdG9yKTtcbiAgaWYgKFwicmF3VHhuXCIgaW4gYXJncykge1xuICAgIGNvbnN0IHJhd1R4biA9IGJjc0Rlc2VyaWFsaXplKFJhd1RyYW5zYWN0aW9uMiwgYXJncy5yYXdUeG4pO1xuICAgIHJldHVybiB7IGFjY291bnRBdXRoZW50aWNhdG9yLCByYXdUeG4gfTtcbiAgfVxuICByZXR1cm4geyBhY2NvdW50QXV0aGVudGljYXRvciB9O1xufVxuXG4vLyBzcmMvdXRpbHMvbWFrZUZ1bGxNZXNzYWdlLnRzXG52YXIgcHJlZml4ID0gXCJBUFRPU1wiO1xuZnVuY3Rpb24gbWFrZUZ1bGxNZXNzYWdlKHBhcmFtcywgZmxhZ3MpIHtcbiAgbGV0IGZ1bGxNZXNzYWdlID0gcHJlZml4O1xuICBpZiAoZmxhZ3MuYWRkcmVzcykge1xuICAgIGZ1bGxNZXNzYWdlICs9IGBcbmFkZHJlc3M6ICR7cGFyYW1zLmFkZHJlc3N9YDtcbiAgfVxuICBpZiAoZmxhZ3MuYXBwbGljYXRpb24pIHtcbiAgICBmdWxsTWVzc2FnZSArPSBgXG5hcHBsaWNhdGlvbjogJHtwYXJhbXMuYXBwbGljYXRpb259YDtcbiAgfVxuICBpZiAoZmxhZ3MuY2hhaW5JZCkge1xuICAgIGZ1bGxNZXNzYWdlICs9IGBcbmNoYWluSWQ6ICR7cGFyYW1zLmNoYWluSWR9YDtcbiAgfVxuICBmdWxsTWVzc2FnZSArPSBgXG5tZXNzYWdlOiAke3BhcmFtcy5tZXNzYWdlfWA7XG4gIGZ1bGxNZXNzYWdlICs9IGBcbm5vbmNlOiAke3BhcmFtcy5ub25jZX1gO1xuICByZXR1cm4ge1xuICAgIGZ1bGxNZXNzYWdlLFxuICAgIHByZWZpeFxuICB9O1xufVxuZXhwb3J0IHtcbiAgYmNzRGVzZXJpYWxpemUsXG4gIGJjc1NlcmlhbGl6ZSxcbiAgZGVzZXJpYWxpemVKc29uVHJhbnNhY3Rpb25QYXlsb2FkLFxuICBkZXNlcmlhbGl6ZVJhd1RyYW5zYWN0aW9uLFxuICBkZXNlcmlhbGl6ZVNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3RBcmdzLFxuICBkZXNlcmlhbGl6ZVNpZ25UcmFuc2FjdGlvblJlcXVlc3RBcmdzLFxuICBkZXNlcmlhbGl6ZVNpZ25UcmFuc2FjdGlvblJlc3BvbnNlQXJncyxcbiAgaXNCY3NTZXJpYWxpemFibGUsXG4gIG1ha2VGdWxsTWVzc2FnZSxcbiAgc2VyaWFsaXplSnNvblRyYW5zYWN0aW9uUGF5bG9hZCxcbiAgc2VyaWFsaXplUmF3VHJhbnNhY3Rpb24sXG4gIHNlcmlhbGl6ZVNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3RBcmdzLFxuICBzZXJpYWxpemVTaWduVHJhbnNhY3Rpb25SZXF1ZXN0QXJncyxcbiAgc2VyaWFsaXplU2lnblRyYW5zYWN0aW9uUmVzcG9uc2VBcmdzXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@identity-connect/wallet-api/dist/index.mjs\n");

/***/ })

};
;